<!DOCTYPE html>












  


<html class="theme-next pisces use-motion" lang="en">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">






















<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.7.0">

<link rel="stylesheet" href="/css/main.css?v=7.1.2">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.1.2">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=7.1.2">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=7.1.2">


  <link rel="mask-icon" href="/images/logo.svg?v=7.1.2" color="#222">







<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '7.1.2',
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false,"dimmer":false},
    back2top: true,
    back2top_sidebar: false,
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta property="og:type" content="website">
<meta property="og:title" content="xiyuanæŠ€æœ¯åœˆ">
<meta property="og:url" content="http://techq.xyz/page/4/index.html">
<meta property="og:site_name" content="xiyuanæŠ€æœ¯åœˆ">
<meta property="og:locale" content="en">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="xiyuanæŠ€æœ¯åœˆ">





  
  
  <link rel="canonical" href="http://techq.xyz/page/4/">



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>xiyuanæŠ€æœ¯åœˆ</title>
  












  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">xiyuanæŠ€æœ¯åœˆ</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
      
        <p class="site-subtitle">æºªæºçš„æŠ€æœ¯åšå®¢ï¼ŒæŠ€æœ¯çš„ä¸æ–­è¿›å–ä¹‹è·¯</p>
      
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="Toggle navigation bar">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">

    
    
    
      
    

    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>Home</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-æŠ€æœ¯">

    
    
    
      
    

    

    <a href="/categories/æŠ€æœ¯/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>æŠ€æœ¯</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-éšç¬”">

    
    
    
      
    

    

    <a href="/categories/éšç¬”/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>éšç¬”</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-è¯»ä¹¦">

    
    
    
      
    

    

    <a href="/categories/è¯»ä¹¦/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>è¯»ä¹¦</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-ç®¡ç†">

    
    
    
      
    

    

    <a href="/categories/ç®¡ç†/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>ç®¡ç†</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-å½’æ¡£">

    
    
    
      
    

    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archives"></i> <br>å½’æ¡£</a>

  </li>

      
      
    </ul>
  

  

  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
            

          
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://techq.xyz/2020/04/30/æŠ€æœ¯/ä½¿ç”¨è‡ªå®šä¹‰DelegatingHandlerç¼–å†™æ›´æ¸…æ´çš„Typed HttpClient/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="æºªæº">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="xiyuanæŠ€æœ¯åœˆ">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2020/04/30/æŠ€æœ¯/ä½¿ç”¨è‡ªå®šä¹‰DelegatingHandlerç¼–å†™æ›´æ¸…æ´çš„Typed HttpClient/" class="post-title-link" itemprop="url">ä½¿ç”¨è‡ªå®šä¹‰DelegatingHandlerç¼–å†™æ›´æ•´æ´çš„Typed HttpClient</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2020-04-30 19:07:00" itemprop="dateCreated datePublished" datetime="2020-04-30T19:07:00+00:00">2020-04-30</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2021-04-25 11:04:00" itemprop="dateModified" datetime="2021-04-25T11:04:00+00:00">2021-04-25</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/æŠ€æœ¯/" itemprop="url" rel="index"><span itemprop="name">æŠ€æœ¯</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="ä½¿ç”¨è‡ªå®šä¹‰DelegatingHandlerç¼–å†™æ›´æ•´æ´çš„Typed-HttpClient"><a href="#ä½¿ç”¨è‡ªå®šä¹‰DelegatingHandlerç¼–å†™æ›´æ•´æ´çš„Typed-HttpClient" class="headerlink" title="ä½¿ç”¨è‡ªå®šä¹‰DelegatingHandlerç¼–å†™æ›´æ•´æ´çš„Typed HttpClient"></a>ä½¿ç”¨è‡ªå®šä¹‰DelegatingHandlerç¼–å†™æ›´æ•´æ´çš„Typed HttpClient</h1><h2 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹ï»¿"></a><strong>ç®€ä»‹</strong>ï»¿</h2><p>æˆ‘å†™äº†å¾ˆå¤š<a href="https://docs.microsoft.com/en-us/dotnet/api/system.net.http.httpclient?view=netcore-3.0" target="_blank" rel="noopener">HttpClient</a>ï¼ŒåŒ…æ‹¬ç±»å‹åŒ–çš„å®¢æˆ·ç«¯ã€‚è‡ªä»æˆ‘å‘ç°<a href="https://github.com/reactiveui/refit" target="_blank" rel="noopener">Refit</a>ä»¥æ¥ï¼Œæˆ‘åªä½¿ç”¨äº†é‚£ä¸€ä¸ªï¼Œæ‰€ä»¥æˆ‘åªç¼–å†™äº†å¾ˆå°‘çš„ä»£ç ï¼ä½†æ˜¯æˆ‘æƒ³åˆ°äº†ä½ ï¼ä½ ä»¬ä¸­çš„æŸäº›äººä¸ä¸€å®šä¼šä½¿ç”¨<a href="https://github.com/reactiveui/refit" target="_blank" rel="noopener">Refitï¼Œ</a>å› æ­¤ï¼Œæˆ‘å°†ä¸ºæ‚¨æä¾›ä¸€äº›æŠ€å·§ï¼Œä»¥ä½¿ç”¨<a href="https://docs.microsoft.com/en-us/aspnet/web-api/overview/advanced/httpclient-message-handlers" target="_blank" rel="noopener">HttpClientæ¶ˆæ¯å¤„ç†ç¨‹åº</a>ï¼ˆå°¤å…¶æ˜¯<a href="https://docs.microsoft.com/en-us/dotnet/api/system.net.http.delegatinghandler?view=netframework-4.8" target="_blank" rel="noopener">DelegatingHandlersï¼‰</a>ç¼–å†™å…·æœ‰æœ€å¤§å¯é‡ç”¨æ€§çš„<a href="https://docs.microsoft.com/en-us/dotnet/architecture/microservices/implement-resilient-applications/use-httpclientfactory-to-implement-resilient-http-requests" target="_blank" rel="noopener">ç±»å‹åŒ–HttpClient</a>ã€‚</p>
<h2 id="ç¼–å†™ç±»å‹åŒ–çš„HttpClientæ¥è½¬å‘JWTå¹¶è®°å½•é”™è¯¯"><a href="#ç¼–å†™ç±»å‹åŒ–çš„HttpClientæ¥è½¬å‘JWTå¹¶è®°å½•é”™è¯¯" class="headerlink" title="ç¼–å†™ç±»å‹åŒ–çš„HttpClientæ¥è½¬å‘JWTå¹¶è®°å½•é”™è¯¯"></a><strong>ç¼–å†™ç±»å‹åŒ–çš„HttpClientæ¥è½¬å‘JWTå¹¶è®°å½•é”™è¯¯</strong></h2><p>è¿™æ˜¯è¦æ¸…ç†çš„<a href="https://docs.microsoft.com/en-us/dotnet/architecture/microservices/implement-resilient-applications/use-httpclientfactory-to-implement-resilient-http-requests" target="_blank" rel="noopener">é”®å…¥çš„HttpClient</a>ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">using DemoRefit.Models;</span><br><span class="line">using DemoRefit.Repositories;</span><br><span class="line">using Microsoft.AspNetCore.Authentication;</span><br><span class="line">using Microsoft.AspNetCore.Http;</span><br><span class="line">using Microsoft.Extensions.Logging;</span><br><span class="line">using System;</span><br><span class="line">using System.Collections.Generic;</span><br><span class="line">using System.Net.Http;</span><br><span class="line">using System.Net.Http.Headers;</span><br><span class="line">using System.Threading.Tasks;</span><br><span class="line"></span><br><span class="line">namespace DemoRefit.HttpClients</span><br><span class="line">&#123;</span><br><span class="line">    public class CountryRepositoryClient : ICountryRepositoryClient</span><br><span class="line">    &#123;</span><br><span class="line">        private readonly HttpClient _client;</span><br><span class="line">        private readonly IHttpContextAccessor _httpContextAccessor;</span><br><span class="line">        private readonly ILogger&lt;CountryRepositoryClient&gt; _logger;</span><br><span class="line"></span><br><span class="line">        public CountryRepositoryClient(HttpClient client, ILogger&lt;CountryRepositoryClient&gt; logger, IHttpContextAccessor httpContextAccessor)</span><br><span class="line">        &#123;</span><br><span class="line">            _client = client;</span><br><span class="line">            _logger = logger;</span><br><span class="line">            _httpContextAccessor = httpContextAccessor;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        public async Task&lt;IEnumerable&lt;Country&gt;&gt; GetAsync()</span><br><span class="line">        &#123;</span><br><span class="line">            try</span><br><span class="line">            &#123;</span><br><span class="line">                string accessToken = await _httpContextAccessor.HttpContext.GetTokenAsync(&quot;access_token&quot;);</span><br><span class="line">                if (string.IsNullOrEmpty(accessToken))</span><br><span class="line">                &#123;</span><br><span class="line">                    throw new Exception(&quot;Access token is missing&quot;);</span><br><span class="line">                &#125;</span><br><span class="line">                _client.DefaultRequestHeaders.Authorization = new AuthenticationHeaderValue(&quot;bearer&quot;, accessToken);</span><br><span class="line"></span><br><span class="line">                var headers = _httpContextAccessor.HttpContext.Request.Headers;</span><br><span class="line">                if (headers.ContainsKey(&quot;X-Correlation-ID&quot;) &amp;&amp; !string.IsNullOrEmpty(headers[&quot;X-Correlation-ID&quot;]))</span><br><span class="line">                &#123;</span><br><span class="line">                    _client.DefaultRequestHeaders.Add(&quot;X-Correlation-ID&quot;, headers[&quot;X-Correlation-ID&quot;].ToString());</span><br><span class="line">                &#125;</span><br><span class="line">                </span><br><span class="line">                using (HttpResponseMessage response = await _client.GetAsync(&quot;/api/democrud&quot;))</span><br><span class="line">                &#123;</span><br><span class="line">                    response.EnsureSuccessStatusCode();</span><br><span class="line">                    return await response.Content.ReadAsAsync&lt;IEnumerable&lt;Country&gt;&gt;();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            catch (Exception e)</span><br><span class="line">            &#123;</span><br><span class="line">                _logger.LogError(e, &quot;Failed to run http query&quot;);</span><br><span class="line">                return null;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™é‡Œæœ‰è®¸å¤šäº‹æƒ…éœ€è¦æ¸…ç†ï¼Œå› ä¸ºå®ƒä»¬åœ¨æ‚¨å°†åœ¨åŒä¸€åº”ç”¨ç¨‹åºä¸­ç¼–å†™çš„æ¯ä¸ªå®¢æˆ·ç«¯ä¸­å¯èƒ½éƒ½æ˜¯å¤šä½™çš„ï¼š</p>
<ul>
<li>ä»<strong>HttpContext</strong>è¯»å–è®¿é—®ä»¤ç‰Œ</li>
<li>ä»¤ç‰Œä¸ºç©ºæ—¶ï¼Œç®¡ç†è®¿é—®ä»¤ç‰Œ</li>
<li>å°†è®¿é—®ä»¤ç‰Œé™„åŠ åˆ°<a href="https://docs.microsoft.com/en-us/dotnet/api/system.net.http.httpclient?view=netcore-3.0" target="_blank" rel="noopener">HttpClient</a>è¿›è¡Œå§”æ´¾</li>
<li>ä»<strong>HttpContext</strong>è¯»å–CorrelationId</li>
<li>å°†CorrelationIdé™„åŠ åˆ°<a href="https://docs.microsoft.com/en-us/dotnet/api/system.net.http.httpclient?view=netcore-3.0" target="_blank" rel="noopener">HttpClient</a>è¿›è¡Œå§”æ‰˜</li>
<li>ä½¿ç”¨<em>EnsureSuccessStatusCodeï¼ˆï¼‰</em>éªŒè¯HttpæŸ¥è¯¢æ˜¯å¦æˆåŠŸ</li>
</ul>
<h2 id="ç¼–å†™è‡ªå®šä¹‰çš„DelegatingHandleræ¥å¤„ç†å†—ä½™ä»£ç "><a href="#ç¼–å†™è‡ªå®šä¹‰çš„DelegatingHandleræ¥å¤„ç†å†—ä½™ä»£ç " class="headerlink" title="ç¼–å†™è‡ªå®šä¹‰çš„DelegatingHandleræ¥å¤„ç†å†—ä½™ä»£ç "></a><strong>ç¼–å†™è‡ªå®šä¹‰çš„DelegatingHandleræ¥å¤„ç†å†—ä½™ä»£ç </strong></h2><p>è¿™æ˜¯<a href="https://docs.microsoft.com/en-us/dotnet/api/system.net.http.delegatinghandler?view=netframework-4.8" target="_blank" rel="noopener">DelegatingHandler</a>ï¼š          </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">using Microsoft.AspNetCore.Authentication;</span><br><span class="line">using Microsoft.AspNetCore.Http;</span><br><span class="line">using Microsoft.Extensions.Logging;</span><br><span class="line">using System;</span><br><span class="line">using System.Net.Http;</span><br><span class="line">using System.Net.Http.Headers;</span><br><span class="line">using System.Threading;</span><br><span class="line">using System.Threading.Tasks;</span><br><span class="line"></span><br><span class="line">namespace DemoRefit.Handlers</span><br><span class="line">&#123;</span><br><span class="line">    public class MyDelegatingHandler : DelegatingHandler</span><br><span class="line">    &#123;</span><br><span class="line">        private readonly IHttpContextAccessor _httpContextAccessor;</span><br><span class="line">        private readonly ILogger&lt;MyDelegatingHandler&gt; _logger;</span><br><span class="line"></span><br><span class="line">        public MyDelegatingHandler(IHttpContextAccessor httpContextAccessor, ILogger&lt;MyDelegatingHandler&gt; logger)</span><br><span class="line">        &#123;</span><br><span class="line">            _httpContextAccessor = httpContextAccessor;</span><br><span class="line">            _logger = logger;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        protected override async Task&lt;HttpResponseMessage&gt; SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)</span><br><span class="line">        &#123;</span><br><span class="line">            HttpResponseMessage httpResponseMessage;</span><br><span class="line">            try</span><br><span class="line">            &#123;</span><br><span class="line">                string accessToken = await _httpContextAccessor.HttpContext.GetTokenAsync(&quot;access_token&quot;);</span><br><span class="line">                if (string.IsNullOrEmpty(accessToken))</span><br><span class="line">                &#123;</span><br><span class="line">                    throw new Exception($&quot;Access token is missing for the request &#123;request.RequestUri&#125;&quot;);</span><br><span class="line">                &#125;</span><br><span class="line">                request.Headers.Authorization = new AuthenticationHeaderValue(&quot;bearer&quot;, accessToken);</span><br><span class="line"></span><br><span class="line">                var headers = _httpContextAccessor.HttpContext.Request.Headers;</span><br><span class="line">                if (headers.ContainsKey(&quot;X-Correlation-ID&quot;) &amp;&amp; !string.IsNullOrEmpty(headers[&quot;X-Correlation-ID&quot;]))</span><br><span class="line">                &#123;</span><br><span class="line">                    request.Headers.Add(&quot;X-Correlation-ID&quot;, headers[&quot;X-Correlation-ID&quot;].ToString());</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                httpResponseMessage = await base.SendAsync(request, cancellationToken);</span><br><span class="line">                httpResponseMessage.EnsureSuccessStatusCode();</span><br><span class="line">            &#125;</span><br><span class="line">            catch (Exception ex)</span><br><span class="line">            &#123;</span><br><span class="line">                _logger.LogError(ex, &quot;Failed to run http query &#123;RequestUri&#125;&quot;, request.RequestUri);</span><br><span class="line">                throw;</span><br><span class="line">            &#125;</span><br><span class="line">            return httpResponseMessage;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¦‚æ‚¨æ‰€è§ï¼Œç°åœ¨å®ƒå°è£…äº†ç”¨äºåŒä¸€åº”ç”¨ç¨‹åºä¸­æ¯ä¸ª<a href="https://docs.microsoft.com/en-us/dotnet/api/system.net.http.httpclient?view=netcore-3.0" target="_blank" rel="noopener">HttpClient</a>çš„å†—ä½™é€»è¾‘ ã€‚</p>
<p>ç°åœ¨ï¼Œæ¸…ç†åçš„<a href="https://docs.microsoft.com/en-us/dotnet/api/system.net.http.httpclient?view=netcore-3.0" target="_blank" rel="noopener">HttpClient</a>å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">using DemoRefit.Models;</span><br><span class="line">using DemoRefit.Repositories;</span><br><span class="line">using Microsoft.Extensions.Logging;</span><br><span class="line">using System;</span><br><span class="line">using System.Collections.Generic;</span><br><span class="line">using System.Net.Http;</span><br><span class="line">using System.Threading.Tasks;</span><br><span class="line"></span><br><span class="line">namespace DemoRefit.HttpClients</span><br><span class="line">&#123;</span><br><span class="line">    public class CountryRepositoryClientV2 : ICountryRepositoryClient</span><br><span class="line">    &#123;</span><br><span class="line">        private readonly HttpClient _client;</span><br><span class="line">        private readonly ILogger&lt;CountryRepositoryClient&gt; _logger;</span><br><span class="line"></span><br><span class="line">        public CountryRepositoryClientV2(HttpClient client, ILogger&lt;CountryRepositoryClient&gt; logger)</span><br><span class="line">        &#123;</span><br><span class="line">            _client = client;</span><br><span class="line">            _logger = logger;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        public async Task&lt;IEnumerable&lt;Country&gt;&gt; GetAsync()</span><br><span class="line">        &#123;</span><br><span class="line">            using (HttpResponseMessage response = await _client.GetAsync(&quot;/api/democrud&quot;))</span><br><span class="line">            &#123;</span><br><span class="line">                try</span><br><span class="line">                &#123;</span><br><span class="line">                    return await response.Content.ReadAsAsync&lt;IEnumerable&lt;Country&gt;&gt;();</span><br><span class="line">                &#125;</span><br><span class="line">                catch (Exception e)</span><br><span class="line">                &#123;</span><br><span class="line">                    _logger.LogError(e, &quot;Failed to read content&quot;);</span><br><span class="line">                    return null;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¥½å¤šäº†ä¸æ˜¯å—ï¼ŸğŸ™‚</p>
<p>æœ€åï¼Œè®©æˆ‘ä»¬å°†<a href="https://docs.microsoft.com/en-us/dotnet/api/system.net.http.delegatinghandler?view=netframework-4.8" target="_blank" rel="noopener">DelegatingHandler</a>é™„åŠ åˆ°Startup.csä¸­çš„<a href="https://docs.microsoft.com/en-us/dotnet/api/system.net.http.httpclient?view=netcore-3.0" target="_blank" rel="noopener">HttpClient</a>ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">using DemoRefit.Handlers;</span><br><span class="line">using DemoRefit.HttpClients;</span><br><span class="line">using DemoRefit.Repositories;</span><br><span class="line">using Microsoft.AspNetCore.Builder;</span><br><span class="line">using Microsoft.AspNetCore.Hosting;</span><br><span class="line">using Microsoft.Extensions.Configuration;</span><br><span class="line">using Microsoft.Extensions.DependencyInjection;</span><br><span class="line">using Microsoft.Extensions.Hosting;</span><br><span class="line">using Refit;</span><br><span class="line">using System;</span><br><span class="line"></span><br><span class="line">namespace DemoRefit</span><br><span class="line">&#123;</span><br><span class="line">    public class Startup</span><br><span class="line">    &#123;</span><br><span class="line">        public Startup(IConfiguration configuration)</span><br><span class="line">        &#123;</span><br><span class="line">            Configuration = configuration;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        public IConfiguration Configuration &#123; get; &#125;</span><br><span class="line"></span><br><span class="line">        // This method gets called by the runtime. Use this method to add services to the container.</span><br><span class="line">        public void ConfigureServices(IServiceCollection services)</span><br><span class="line">        &#123;</span><br><span class="line">            services.AddHttpContextAccessor();</span><br><span class="line"></span><br><span class="line">            services.AddControllers();</span><br><span class="line"></span><br><span class="line">            services.AddHttpClient&lt;ICountryRepositoryClient, CountryRepositoryClientV2&gt;()</span><br><span class="line">                    .ConfigureHttpClient(c =&gt; c.BaseAddress = new Uri(Configuration.GetSection(&quot;Apis:CountryApi:Url&quot;).Value))</span><br><span class="line">                    .AddHttpMessageHandler&lt;MyDelegatingHandler&gt;();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        // This method gets called by the runtime. Use this method to configure the HTTP request pipeline.</span><br><span class="line">        public void Configure(IApplicationBuilder app, IWebHostEnvironment env)</span><br><span class="line">        &#123;</span><br><span class="line">            if (env.IsDevelopment())</span><br><span class="line">            &#123;</span><br><span class="line">                app.UseDeveloperExceptionPage();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            app.UseHttpsRedirection();</span><br><span class="line"></span><br><span class="line">            app.UseRouting();</span><br><span class="line"></span><br><span class="line">            app.UseAuthorization();</span><br><span class="line"></span><br><span class="line">            app.UseEndpoints(endpoints =&gt;</span><br><span class="line">            &#123;</span><br><span class="line">                endpoints.MapControllers();</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="ä½¿ç”¨Refit"><a href="#ä½¿ç”¨Refit" class="headerlink" title="ä½¿ç”¨Refit"></a><strong>ä½¿ç”¨Refit</strong></h2><p>å¦‚æœæ‚¨æ­£åœ¨ä½¿ç”¨<a href="https://github.com/reactiveui/refit" target="_blank" rel="noopener">Refit</a>ï¼Œåˆ™ç»å¯¹å¯ä»¥é‡ç”¨è¯¥<a href="https://docs.microsoft.com/en-us/dotnet/api/system.net.http.delegatinghandler?view=netframework-4.8" target="_blank" rel="noopener">DelegatingHandler</a>ï¼</p>
<p>ä¾‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">using DemoRefit.Handlers;</span><br><span class="line">using DemoRefit.HttpClients;</span><br><span class="line">using DemoRefit.Repositories;</span><br><span class="line">using Microsoft.AspNetCore.Builder;</span><br><span class="line">using Microsoft.AspNetCore.Hosting;</span><br><span class="line">using Microsoft.Extensions.Configuration;</span><br><span class="line">using Microsoft.Extensions.DependencyInjection;</span><br><span class="line">using Microsoft.Extensions.Hosting;</span><br><span class="line">using Refit;</span><br><span class="line">using System;</span><br><span class="line"></span><br><span class="line">namespace DemoRefit</span><br><span class="line">&#123;</span><br><span class="line">    public class Startup</span><br><span class="line">    &#123;</span><br><span class="line">        public Startup(IConfiguration configuration)</span><br><span class="line">        &#123;</span><br><span class="line">            Configuration = configuration;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        public IConfiguration Configuration &#123; get; &#125;</span><br><span class="line"></span><br><span class="line">        // This method gets called by the runtime. Use this method to add services to the container.</span><br><span class="line">        public void ConfigureServices(IServiceCollection services)</span><br><span class="line">        &#123;</span><br><span class="line">            services.AddHttpContextAccessor();</span><br><span class="line"></span><br><span class="line">            services.AddControllers();</span><br><span class="line"></span><br><span class="line">            services.AddRefitClient&lt;ICountryRepositoryClient&gt;()</span><br><span class="line">                    .ConfigureHttpClient(c =&gt; c.BaseAddress = new Uri(Configuration.GetSection(&quot;Apis:CountryApi:Url&quot;).Value));</span><br><span class="line">                    .AddHttpMessageHandler&lt;MyDelegatingHandler&gt;();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        // This method gets called by the runtime. Use this method to configure the HTTP request pipeline.</span><br><span class="line">        public void Configure(IApplicationBuilder app, IWebHostEnvironment env)</span><br><span class="line">        &#123;</span><br><span class="line">            if (env.IsDevelopment())</span><br><span class="line">            &#123;</span><br><span class="line">                app.UseDeveloperExceptionPage();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            app.UseHttpsRedirection();</span><br><span class="line"></span><br><span class="line">            app.UseRouting();</span><br><span class="line"></span><br><span class="line">            app.UseAuthorization();</span><br><span class="line"></span><br><span class="line">            app.UseEndpoints(endpoints =&gt;</span><br><span class="line">            &#123;</span><br><span class="line">                endpoints.MapControllers();</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="è½®å­ä»‹ç»ï¼š"><a href="#è½®å­ä»‹ç»ï¼š" class="headerlink" title="è½®å­ä»‹ç»ï¼š"></a>è½®å­ä»‹ç»ï¼š</h5><p>Refitæ˜¯ä¸€ä¸ªæ·±å—Squareçš„ Retrofit åº“å¯å‘çš„åº“,ç›®å‰åœ¨githubä¸Šå…±æœ‰star 4000æšï¼Œé€šè¿‡è¿™ä¸ªæ¡†æ¶ï¼Œå¯ä»¥æŠŠä½ çš„REST APIå˜æˆäº†ä¸€ä¸ªæ´»çš„æ¥å£:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">public interface IGitHubApi</span><br><span class="line">&#123;</span><br><span class="line">    [Get(&quot;/users/&#123;user&#125;&quot;)]</span><br><span class="line">    Task&lt;User&gt; GetUser(string user);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>RestServiceç±»ç”Ÿæˆä¸€ä¸ªIGitHubApiçš„å®ç°ï¼Œå®ƒä½¿ç”¨HttpClientè¿›è¡Œè°ƒç”¨:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var gitHubApi = RestService.For&lt;IGitHubApi&gt;(&quot;https://api.github.com&quot;);</span><br><span class="line"></span><br><span class="line">var octocat = await gitHubApi.GetUser(&quot;octocat&quot;);</span><br></pre></td></tr></table></figure>

<p>æŸ¥çœ‹æ›´å¤šï¼š <a href="https://reactiveui.github.io/refit/" target="_blank" rel="noopener">https://reactiveui.github.io/refit/</a> </p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://techq.xyz/2020/04/28/æŠ€æœ¯/åœ¨Cï¼ƒä¸­ä½¿ç”¨RESTful APIçš„å‡ ç§å¥½æ–¹æ³•/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="æºªæº">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="xiyuanæŠ€æœ¯åœˆ">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2020/04/28/æŠ€æœ¯/åœ¨Cï¼ƒä¸­ä½¿ç”¨RESTful APIçš„å‡ ç§å¥½æ–¹æ³•/" class="post-title-link" itemprop="url">åœ¨Cï¼ƒä¸­ä½¿ç”¨RESTful APIçš„å‡ ç§å¥½æ–¹æ³•</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2020-04-28 23:28:00" itemprop="dateCreated datePublished" datetime="2020-04-28T23:28:00+00:00">2020-04-28</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2021-04-25 11:04:00" itemprop="dateModified" datetime="2021-04-25T11:04:00+00:00">2021-04-25</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/æŠ€æœ¯/" itemprop="url" rel="index"><span itemprop="name">æŠ€æœ¯</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="åœ¨Cï¼ƒä¸­ä½¿ç”¨RESTful-APIçš„å‡ ç§å¥½æ–¹æ³•"><a href="#åœ¨Cï¼ƒä¸­ä½¿ç”¨RESTful-APIçš„å‡ ç§å¥½æ–¹æ³•" class="headerlink" title="åœ¨Cï¼ƒä¸­ä½¿ç”¨RESTful APIçš„å‡ ç§å¥½æ–¹æ³•"></a>åœ¨Cï¼ƒä¸­ä½¿ç”¨RESTful APIçš„å‡ ç§å¥½æ–¹æ³•</h1><p> <a href="https://code-maze.com/author/codemaze_blog/" target="_blank" rel="noopener">Vladimir Pecanac</a> </p>
<p>é€šè¿‡Webå¼€å‘çš„è·¯å¾„ï¼Œæ‚¨å‘ç°è‡ªå·±è¿Ÿæ—©éœ€è¦å¤„ç†å¤–éƒ¨APIï¼ˆåº”ç”¨ç¨‹åºç¼–ç¨‹æ¥å£ï¼‰ã€‚åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘çš„ç›®æ ‡æ˜¯åˆ—å‡ºåœ¨Cï¼ƒé¡¹ç›®ä¸­ä½¿ç”¨RESTful APIçš„æ–¹æ³•çš„æœ€å…¨é¢åˆ—è¡¨ï¼Œå¹¶é€šè¿‡ä¸€äº›ç®€å•ç¤ºä¾‹å‘æ‚¨å±•ç¤ºå¦‚ä½•åšåˆ°è¿™ä¸€ç‚¹ã€‚</p>
<p>é˜…è¯»è¯¥æ–‡ç« åï¼Œæ‚¨å°†æ›´æ·±å…¥åœ°äº†è§£å¯ä»¥ä½¿ç”¨å“ªäº›é€‰é¡¹ï¼Œä»¥åŠä¸‹æ¬¡éœ€è¦ä½¿ç”¨<a href="https://code-maze.com/ultimate-aspnet-core-3-web-api/" target="_blank" rel="noopener">RESTful API</a>æ—¶å¦‚ä½•é€‰æ‹©æ­£ç¡®çš„é€‰é¡¹ã€‚</p>
<h2 id="ä»€ä¹ˆæ˜¯RESTful-APIï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯RESTful-APIï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯RESTful APIï¼Ÿ"></a>ä»€ä¹ˆæ˜¯RESTful APIï¼Ÿ</h2><p>å› æ­¤ï¼Œåœ¨å¼€å§‹ä¹‹å‰ï¼Œæ‚¨å¯èƒ½æƒ³çŸ¥é“<a href="https://code-maze.com/ultimate-aspnet-core-3-web-api/" target="_blank" rel="noopener">API</a>ä»£è¡¨ä»€ä¹ˆï¼Œä»¥åŠRESTfulçš„å…¨éƒ¨å«ä¹‰æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<p>ç®€è€Œè¨€ä¹‹ï¼ŒAPIæ˜¯è½¯ä»¶åº”ç”¨ç¨‹åºä¹‹é—´çš„å±‚ã€‚æ‚¨å¯ä»¥å°†è¯·æ±‚å‘é€åˆ°<a href="https://code-maze.com/ultimate-aspnet-core-3-web-api/" target="_blank" rel="noopener">API</a>ï¼Œå¹¶ä»ä¸­è·å¾—å“åº”ã€‚APIéšè—äº†è½¯ä»¶åº”ç”¨ç¨‹åºå…·ä½“å®ç°çš„æ‰€æœ‰ç»†èŠ‚ï¼Œå¹¶å…¬å¼€äº†æ‚¨ç”¨äºä¸è¯¥åº”ç”¨ç¨‹åºé€šä¿¡çš„æ¥å£ã€‚</p>
<p>æ•´ä¸ªäº’è”ç½‘æ˜¯ç”±APIç»„æˆçš„å¤§å‹èœ˜è››ç½‘ã€‚æˆ‘ä»¬ä½¿ç”¨APIåœ¨åº”ç”¨ç¨‹åºä¹‹é—´é€šä¿¡å’Œå…³è”ä¿¡æ¯ã€‚æˆ‘ä»¬æœ‰ä¸€ä¸ª<a href="https://code-maze.com/ultimate-aspnet-core-3-web-api/" target="_blank" rel="noopener">API</a>ï¼Œå¯ä»¥å¤„ç†å‡ ä¹æ‰€æœ‰å†…å®¹ã€‚æ‚¨æ¯å¤©ä½¿ç”¨çš„å¤§å¤šæ•°æœåŠ¡éƒ½æœ‰è‡ªå·±çš„APIï¼ˆGoogleMapsï¼ŒFacebookï¼ŒTwitterï¼ŒInstagramï¼Œå¤©æ°”é—¨æˆ·â€¦ï¼‰</p>
<p>RESTfuléƒ¨åˆ†æ„å‘³ç€APIæ˜¯æ ¹æ®RESTï¼ˆè¡¨ç¤ºçŠ¶æ€ä¼ è¾“ï¼‰çš„åŸç†å’Œè§„åˆ™æ¥å®ç°çš„ï¼ŒRESTæ˜¯ç½‘ç»œçš„åŸºç¡€æ¶æ„åŸç†ã€‚RESTful APIåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ä¼šè¿”å›çº¯æ–‡æœ¬ï¼ŒJSONæˆ–XMLå“åº”ã€‚æ›´è¯¦ç»†åœ°è§£é‡ŠRESTä¸åœ¨æœ¬æ–‡çš„è®¨è®ºèŒƒå›´ä¹‹å†…ï¼Œä½†æ˜¯æ‚¨å¯ä»¥åœ¨æˆ‘ä»¬çš„æ–‡ç« <a href="https://code-maze.com/top-rest-api-best-practices/" target="_blank" rel="noopener">REST APIæœ€ä½³å®è·µä¸­</a>é˜…è¯»æœ‰å…³RESTçš„æ›´å¤šä¿¡æ¯ã€‚</p>
<h2 id="å¦‚ä½•ä½¿ç”¨RESTful-API"><a href="#å¦‚ä½•ä½¿ç”¨RESTful-API" class="headerlink" title="å¦‚ä½•ä½¿ç”¨RESTful API"></a>å¦‚ä½•ä½¿ç”¨RESTful API</h2><p>å¥½å§ï¼Œè®©æˆ‘ä»¬è¿›å…¥æ•´ä¸ªæ•…äº‹ä¸­æœ€é‡è¦çš„éƒ¨åˆ†ã€‚</p>
<p>æœ‰å‡ ç§æ–¹æ³•å¯ä»¥åœ¨Cï¼ƒä¸­ä½¿ç”¨RESTful APIï¼š</p>
<ul>
<li><a href="https://code-maze.com/different-ways-consume-restful-api-csharp/#HttpWebRequest" target="_blank" rel="noopener"><strong>HttpWebRequest/Response Class</strong></a></li>
<li><a href="https://code-maze.com/different-ways-consume-restful-api-csharp/#webclient" target="_blank" rel="noopener"><strong>WebClient Class</strong></a></li>
<li><a href="https://code-maze.com/different-ways-consume-restful-api-csharp/#HttpClient" target="_blank" rel="noopener"><strong>HttpClient Class</strong></a></li>
<li><a href="https://code-maze.com/different-ways-consume-restful-api-csharp/#RestSharp" target="_blank" rel="noopener"><strong>RestSharp NuGet Package</strong></a></li>
<li><a href="https://code-maze.com/different-ways-consume-restful-api-csharp/#ServiceStack" target="_blank" rel="noopener"><strong>ServiceStack Http Utils</strong></a></li>
<li><strong><a href="https://code-maze.com/different-ways-consume-restful-api-csharp/#flurl" target="_blank" rel="noopener">Flurl</a></strong></li>
<li><strong><a href="https://code-maze.com/different-ways-consume-restful-api-csharp/#dalsoft" target="_blank" rel="noopener">DalSoft.RestClient</a></strong></li>
</ul>
<p>è¿™äº›ä¸­çš„æ¯ä¸€ä¸ªéƒ½æœ‰ä¼˜ç‚¹å’Œç¼ºç‚¹ï¼Œå› æ­¤è®©æˆ‘ä»¬ä»”ç»†ç ”ç©¶å®ƒä»¬ï¼Œçœ‹çœ‹å®ƒä»¬æä¾›äº†ä»€ä¹ˆã€‚</p>
<p>ä¾‹å¦‚ï¼Œæˆ‘ä»¬å°†é€šè¿‡GitHub APIæ”¶é›†æœ‰å…³RestSharpå›è´­ç‰ˆæœ¬åŠå…¶å‘å¸ƒæ—¥æœŸçš„ä¿¡æ¯ã€‚æ­¤ä¿¡æ¯æ˜¯å…¬å¼€å¯ç”¨çš„ï¼Œæ‚¨å¯ä»¥åœ¨æ­¤å¤„æŸ¥çœ‹åŸå§‹JSONå“åº”çš„å¤–è§‚ï¼š <a href="https://api.github.com/repos/restsharp/restsharp/releases" target="_blank" rel="noopener">RestSharpç‰ˆæœ¬</a></p>
<p>æˆ‘ä»¬å°†åˆ©ç”¨Json.NETåº“çš„å¸®åŠ©æ¥ååºåˆ—åŒ–è·å¾—çš„å“åº”ã€‚åŒæ ·ï¼Œå¯¹äºæŸäº›ç¤ºä¾‹ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨åº“çš„å†…ç½®ååºåˆ—åŒ–æœºåˆ¶ã€‚é€‰æ‹©å“ªç§æ–¹å¼å–å†³äºæ‚¨ï¼Œå› ä¸ºæ²¡æœ‰æ­£ç¡®çš„æ–¹æ³•ã€‚ï¼ˆæ‚¨å¯ä»¥åœ¨<a href="https://github.com/CodeMazeBlog/ConsumeRestfulApisExamples" target="_blank" rel="noopener">æºä»£ç ä¸­</a>çœ‹åˆ°è¿™ä¸¤ç§æœºåˆ¶çš„å®ç°ï¼‰ã€‚</p>
<p>æˆ‘æœŸæœ›é€šè¿‡æ¥ä¸‹æ¥çš„å‡ ä¸ªç¤ºä¾‹å¾—åˆ°ä¸€ä¸ªååºåˆ—åŒ–<code>JArray</code>ï¼ˆä¸ºç®€å•èµ·è§ï¼‰ï¼Œå…¶ä¸­åŒ…å«RestSharpå‘å¸ƒä¿¡æ¯ã€‚ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥éå†å®ƒä»¥è·å¾—ä»¥ä¸‹ç»“æœã€‚</p>
<p> <img src="https://code-maze.com/wp-content/uploads/2017/06/RestSharp-releases.png" alt="img"> </p>
<h2 id="HttpWebRequest-Responseç±»"><a href="#HttpWebRequest-Responseç±»" class="headerlink" title="HttpWebRequest / Responseç±»"></a>HttpWebRequest / Responseç±»</h2><p>è¿™æ˜¯<code>WebRequest</code> ç±»çš„ç‰¹å®šäºHTTPçš„å®ç°ï¼Œè¯¥å®ç°æœ€åˆç”¨äºå¤„ç†HTTPè¯·æ±‚ï¼Œä½†å·²è¿‡æ—¶å¹¶ç”±<code>WebClient</code>è¯¥ç±»ä»£æ›¿ ã€‚</p>
<p>è¯¥<code>HttpWebRequest</code> æä¾›ç»†ç²’åº¦æ§åˆ¶çš„è¦æ±‚åˆ¶å®šè¿‡ç¨‹çš„æ¯ä¸€ä¸ªç¯èŠ‚ã€‚æ‚¨å¯ä»¥æƒ³è±¡ï¼Œè¿™å¯èƒ½æ˜¯ä¸€æŠŠåŒåˆƒå‰‘ï¼Œæ‚¨å¾ˆå®¹æ˜“æµªè´¹å¤§é‡æ—¶é—´æ¥å¾®è°ƒæ‚¨çš„è¯·æ±‚ã€‚å¦ä¸€æ–¹é¢ï¼Œè¿™å¯èƒ½æ­£æ˜¯æ‚¨é’ˆå¯¹ç‰¹å®šæ¡ˆä¾‹æ‰€éœ€è¦çš„ã€‚</p>
<p><code>HttpWebRequest</code> ç±»ä¸ä¼šé˜»æ­¢ç”¨æˆ·ç•Œé¢ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ç›¸ä¿¡æ‚¨ä¼šåŒæ„è¿™ä¸€ç‚¹ï¼Œè¿™ä¸€ç‚¹éå¸¸é‡è¦ã€‚</p>
<p><code>HttpWebResponse</code> ç±»ä¸ºä¼ å…¥çš„å“åº”æä¾›äº†ä¸€ä¸ªå®¹å™¨ã€‚</p>
<p>è¿™æ˜¯æœ‰å…³å¦‚ä½•ä½¿ç”¨è¿™äº›ç±»ä½¿ç”¨APIçš„ç®€å•ç¤ºä¾‹ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">public class HttpWebRequestHandler : IRequestHandler</span><br><span class="line">&#123;</span><br><span class="line">    public string GetReleases(string url)</span><br><span class="line">    &#123;</span><br><span class="line">        var request = (HttpWebRequest)WebRequest.Create(url);</span><br><span class="line"></span><br><span class="line">        request.Method = &quot;GET&quot;;</span><br><span class="line">        request.UserAgent = RequestConstants.UserAgentValue;</span><br><span class="line">        request.AutomaticDecompression = DecompressionMethods.Deflate | DecompressionMethods.GZip;</span><br><span class="line"></span><br><span class="line">        var content = string.Empty;</span><br><span class="line"></span><br><span class="line">        using (var response = (HttpWebResponse)request.GetResponse())</span><br><span class="line">        &#123;</span><br><span class="line">            using (var stream = response.GetResponseStream())</span><br><span class="line">            &#123;</span><br><span class="line">                using (var sr = new StreamReader(stream))</span><br><span class="line">                &#123;</span><br><span class="line">                    content = sr.ReadToEnd();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        return content;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p> å°½ç®¡æ˜¯ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼Œä½†æ˜¯å½“æ‚¨éœ€è¦å¤„ç†æ›´å¤æ‚çš„æ–¹æ¡ˆï¼ˆä¾‹å¦‚ï¼Œå‘å¸ƒè¡¨å•ä¿¡æ¯ï¼Œæˆæƒç­‰ï¼‰æ—¶ï¼Œå®ƒä¼šå˜å¾—æ›´åŠ å¤æ‚ã€‚ </p>
<h2 id="WebClientç±»åˆ«"><a href="#WebClientç±»åˆ«" class="headerlink" title="WebClientç±»åˆ«"></a>WebClientç±»åˆ«</h2><p>è¿™ä¸ªç±»å¯¹<code>HttpWebRequest</code>çš„åŒ…è£…ã€‚å®ƒé€šè¿‡<code>HttpWebRequest</code>ä»å¼€å‘äººå‘˜ä¸­æå–çš„ç»†èŠ‚æ¥ç®€åŒ–æµç¨‹ã€‚è¯¥ä»£ç æ›´å®¹æ˜“ç¼–å†™ï¼Œå¹¶ä¸”æ‚¨é€šè¿‡è¿™ç§æ–¹å¼çŠ¯é”™è¯¯çš„å¯èƒ½æ€§è¾ƒå°ã€‚å¦‚æœæ‚¨æƒ³ç¼–å†™æ›´å°‘çš„ä»£ç ï¼Œè€Œä¸ç”¨æ‹…å¿ƒæ‰€æœ‰ç»†èŠ‚ï¼Œå¹¶ä¸”æ‰§è¡Œé€Ÿåº¦æ˜¯ä¸é‡è¦çš„ï¼Œè¯·è€ƒè™‘ä½¿ç”¨<code>WebClient</code>classã€‚</p>
<p>è¿™ä¸ªç¤ºä¾‹åº”è¯¥ä½¿æ‚¨å¤§è‡´äº†è§£<code>WebClient</code>ä¸<code>HttpWebRequest</code>/ <code>HttpWebResponse</code>æ–¹æ³•ç›¸æ¯”ä½¿ç”¨èµ·æ¥è¦å®¹æ˜“å¾—å¤šã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">public string GetReleases(string url)</span><br><span class="line">&#123;</span><br><span class="line">    var client = new WebClient();</span><br><span class="line">    client.Headers.Add(RequestConstants.UserAgent, RequestConstants.UserAgentValue);</span><br><span class="line"></span><br><span class="line">    var response = client.DownloadString(url);</span><br><span class="line"></span><br><span class="line">    return response;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å®¹æ˜“å¾—å¤šï¼Œå¯¹å—ï¼Ÿ</p>
<p>é™¤äº†å…¶ä»–<code>DownloadString</code>æ–¹æ³•ï¼Œ<code>WebClient</code>ç±»è¿˜æä¾›äº†è®¸å¤šå…¶ä»–æœ‰ç”¨çš„æ–¹æ³•ï¼Œä½¿æˆ‘ä»¬çš„ç”Ÿæ´»æ›´è½»æ¾ã€‚æˆ‘ä»¬å¯ä»¥è½»æ¾åœ°ä½¿ç”¨å®ƒæ¥æ“ä½œå­—ç¬¦ä¸²ï¼Œæ–‡ä»¶æˆ–å­—èŠ‚æ•°ç»„ï¼Œå¹¶ä¸”ä»·æ ¼æ¯”<code>HttpWebRequest</code>/ <code>HttpWebResponse</code>æ–¹æ³•è¦æ…¢å‡ æ¯«ç§’ã€‚</p>
<p>æ— è®ºæ˜¯<code>HttpWebRequest</code>/ <code>HttpWebResponse</code>å’Œ<code>WebClient</code>ç±»åœ¨æ—§ç‰ˆæœ¬çš„.NETå¯ä¾›é€‰æ‹©ã€‚å¦‚æœæ‚¨å¯¹å…¶ä»–äº§å“æ„Ÿå…´è¶£ï¼Œè¯·åŠ¡å¿…æŸ¥çœ‹<a href="https://msdn.microsoft.com/en-us/library/system.net.webclient(v=vs.110).aspx" target="_blank" rel="noopener">MSDN</a><code>WebClient</code>ã€‚</p>
<h2 id="HttpClientç±»"><a href="#HttpClientç±»" class="headerlink" title="HttpClientç±»"></a>HttpClientç±»</h2><p><code>HttpClient</code> æ˜¯â€œæ–°äººâ€ï¼Œå®ƒæä¾›äº†æ—§åº“æ‰€ç¼ºä¹çš„ä¸€äº›ç°ä»£.NETåŠŸèƒ½ã€‚ä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨çš„å•ä¸ªå®ä¾‹å‘é€å¤šä¸ªè¯·æ±‚<code>HttpClient</code>ï¼Œå®ƒä¸ç»‘å®šåˆ°ç‰¹å®šçš„HTTPæœåŠ¡å™¨æˆ–ä¸»æœºï¼Œè€Œæ˜¯ä½¿ç”¨async / awaitæœºåˆ¶ã€‚</p>
<p>æ‚¨å¯ä»¥<a href="https://channel9.msdn.com/Events/Build/2013/4-092" target="_blank" rel="noopener">åœ¨æ­¤è§†é¢‘ä¸­</a>æ‰¾åˆ°<a href="https://channel9.msdn.com/Events/Build/2013/4-092" target="_blank" rel="noopener">ä½¿ç”¨HttpClient</a>çš„<a href="https://channel9.msdn.com/Events/Build/2013/4-092" target="_blank" rel="noopener">äº”ä¸ªå¾ˆå¥½çš„ç†ç”±</a>ï¼š</p>
<ul>
<li>å¼ºç±»å‹æ ‡é¢˜ã€‚</li>
<li>å…±äº«ç¼“å­˜ï¼Œcookieå’Œå‡­æ®</li>
<li>è®¿é—®cookieå’Œå…±äº«cookie</li>
<li>æ§åˆ¶ç¼“å­˜å’Œå…±äº«ç¼“å­˜ã€‚</li>
<li>å°†æ‚¨çš„ä»£ç æ¨¡å—æ³¨å…¥ASP.NETç®¡é“ã€‚æ¸…æ´å’Œæ¨¡å—åŒ–çš„ä»£ç ã€‚</li>
</ul>
<p><code>HttpClient</code>åœ¨æˆ‘ä»¬çš„ç¤ºä¾‹ä¸­ï¼Œè¿™æ˜¯å®é™…çš„ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">public string GetReleases(string url)</span><br><span class="line">&#123;</span><br><span class="line">    using (var httpClient = new HttpClient())</span><br><span class="line">    &#123;</span><br><span class="line">        httpClient.DefaultRequestHeaders.Add(RequestConstants.UserAgent, RequestConstants.UserAgentValue);</span><br><span class="line"></span><br><span class="line">        var response = httpClient.GetStringAsync(new Uri(url)).Result;</span><br><span class="line"></span><br><span class="line">        return response;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸ºäº†ç®€å•èµ·è§ï¼Œæˆ‘åŒæ­¥å®ç°äº†å®ƒã€‚æ¯ä¸ª<code>HttpClient</code>æ–¹æ³•éƒ½åº”å¼‚æ­¥ä½¿ç”¨ï¼Œåº”è¯¥ä»¥è¿™ç§æ–¹å¼ä½¿ç”¨ã€‚</p>
<p>å¦å¤–ï¼Œæˆ‘è¿˜è¦æåˆ°ä¸€ä»¶äº‹ã€‚<strong>æ˜¯å¦<code>HttpClient</code>åº”è¯¥åŒ…è£…åœ¨usingå—ä¸­è¿˜æ˜¯åœ¨åº”ç”¨ç¨‹åºçº§åˆ«ä¸Šè¿›è¡Œé™æ€è®¨è®ºã€‚å°½ç®¡å®ƒå®ç°äº†<code>IDisposable</code>ï¼Œä½†ä¼¼ä¹é€šè¿‡å°†å®ƒåŒ…è£…åœ¨usingå—ä¸­ï¼Œ<a href="https://aspnetmonsters.com/2016/08/2016-08-27-httpclientwrong/" target="_blank" rel="noopener">ä¼šä½¿åº”ç”¨ç¨‹åºå‡ºç°æ•…éšœå¹¶è·å¾—SocketException</a>ã€‚</strong>è€Œåœ¨ANKITåšå®¢ä¸­ï¼Œæä¾›äº†åŸºäº<a href="https://ankitvijay.net/2016/09/25/dispose-httpclient-or-have-a-static-instance/" target="_blank" rel="noopener">å¾ˆå¤šæœ‰åˆ©äºé™æ€åˆå§‹åŒ–çš„</a>çš„<code>HttpClient</code>æ€§èƒ½æµ‹è¯•ç»“æœæ˜¯ã€‚<strong>è¯·åŠ¡å¿…é˜…è¯»è¿™äº›åšå®¢æ–‡ç« ï¼Œ</strong>å› ä¸ºå®ƒä»¬å¯ä»¥å¸®åŠ©æ‚¨æ›´äº†è§£è¯¥<code>HttpClient</code> åº“çš„æ­£ç¡®ç”¨æ³•ã€‚ï¼ˆåŸæ–‡ç¼–å†™æ—¶é—´æ¯”è¾ƒæ—§ï¼Œåœ¨æ–°ç‰ˆçš„.NET Core3.1ä¸­ï¼Œç›¸å…³é—®é¢˜å·²ç»è§£å†³ï¼‰</p>
<p>å¹¶ä¸”ä¸è¦å¿˜è®°ï¼Œç”±äºæ˜¯æ–°çš„ï¼Œ<code>HttpClient</code>æ˜¯.NET 4.5ä»¥ä¸Šç‰ˆæœ¬æ‰æœ‰ï¼Œå› æ­¤åœ¨æŸäº›æ—§é¡¹ç›®ä¸­ä½¿ç”¨å®ƒå¯èƒ½ä¼šé‡åˆ°éº»çƒ¦ã€‚</p>
<h2 id="RestSharp"><a href="#RestSharp" class="headerlink" title="RestSharp"></a>RestSharp</h2><p>RestSharpæ˜¯æ ‡å‡†.NETåº“çš„OpenSourceæ›¿ä»£å“ï¼Œä¹Ÿæ˜¯ç›®å‰æœ€é…·çš„.NETåº“ä¹‹ä¸€ã€‚å®ƒä»¥NuGetè½¯ä»¶åŒ…çš„å½¢å¼æä¾›ï¼Œå‡ºäºæŸäº›åŸå› ï¼Œæ‚¨åº”è¯¥è€ƒè™‘å°è¯•ä¸€ä¸‹ã€‚</p>
<p>å°±åƒ<code>HttpClient</code>RestSharp ä¸€æ ·ï¼Œå®ƒæ˜¯ä¸€ä¸ªç°ä»£è€Œå…¨é¢çš„åº“ï¼Œæ˜“äºä½¿ç”¨ä¸”ä»¤äººæ„‰æ‚¦ï¼ŒåŒæ—¶ä»æ”¯æŒæ—§ç‰ˆæœ¬çš„.NET Frameworkã€‚å®ƒå…·æœ‰å†…ç½®çš„<a href="https://github.com/restsharp/RestSharp/wiki/Authenticators" target="_blank" rel="noopener">èº«ä»½éªŒè¯</a>å’Œ<a href="https://github.com/restsharp/RestSharp/wiki/Deserialization" target="_blank" rel="noopener">åºåˆ—åŒ–/ååºåˆ—åŒ–æœºåˆ¶ï¼Œ</a>ä½†å…è®¸æ‚¨ä½¿ç”¨è‡ªå®šä¹‰<a href="https://github.com/restsharp/RestSharp/wiki/Deserialization" target="_blank" rel="noopener">æœºåˆ¶</a>è¦†ç›–å®ƒä»¬ã€‚å®ƒ<a href="https://github.com/restsharp/RestSharp/wiki/Cross-Platform-Support" target="_blank" rel="noopener">å¯è·¨å¹³å°ä½¿ç”¨ï¼Œ</a>å¹¶æ”¯æŒOAuth1ï¼ŒOAuth2ï¼ŒåŸºæœ¬ï¼ŒNTLMå’ŒåŸºäºå‚æ•°çš„èº«ä»½éªŒè¯ã€‚æ‚¨å¯ä»¥é€‰æ‹©åŒæ­¥æˆ–å¼‚æ­¥å·¥ä½œã€‚è¯¥åº“è¿˜æœ‰å¾ˆå¤šå…¶ä»–åŠŸèƒ½ï¼Œè€Œè¿™äº›åªæ˜¯å®ƒæä¾›çš„ä¼—å¤šå¥½å¤„ä¸­çš„ä¸€éƒ¨åˆ†ã€‚æœ‰å…³RestSharpçš„ç”¨æ³•å’ŒåŠŸèƒ½çš„è¯¦ç»†ä¿¡æ¯ï¼Œæ‚¨å¯ä»¥è®¿é—®<a href="https://github.com/restsharp/RestSharp/wiki/Getting-Started" target="_blank" rel="noopener">GitHubä¸Š</a>çš„RestSharp <a href="https://github.com/restsharp/RestSharp/wiki/Getting-Started" target="_blank" rel="noopener">é¡µé¢</a>ã€‚</p>
<p>ç°åœ¨ï¼Œè®©æˆ‘ä»¬å°è¯•ä½¿ç”¨RestSharp getè·å–RestSharpç‰ˆæœ¬çš„åˆ—è¡¨ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">public string GetReleases(string url)</span><br><span class="line">&#123;</span><br><span class="line">    var client = new RestClient(url);</span><br><span class="line"></span><br><span class="line">    var response = client.Execute(new RestRequest());</span><br><span class="line"></span><br><span class="line">    return response.Content;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¾ˆç®€å•ã€‚RestSharpéå¸¸çµæ´»ï¼Œæ‹¥æœ‰ä½¿ç”¨RESTful APIæ—¶å‡ ä¹å¯ä»¥å®ç°æ‰€æœ‰åŠŸèƒ½æ‰€éœ€çš„æ‰€æœ‰å·¥å…·ã€‚</p>
<p>åœ¨æ­¤ç¤ºä¾‹ä¸­è¦æ³¨æ„çš„ä¸€ä»¶äº‹æ˜¯ï¼Œç”±äºç¤ºä¾‹çš„ä¸€è‡´æ€§ï¼Œæˆ‘æ²¡æœ‰ä½¿ç”¨RestSharpçš„ååºåˆ—åŒ–æœºåˆ¶ï¼Œè¿™æœ‰ç‚¹æµªè´¹ï¼Œä½†æ˜¯æˆ‘é¼“åŠ±æ‚¨ä½¿ç”¨å®ƒï¼Œå› ä¸ºå®ƒç¡®å®éå¸¸å®¹æ˜“å’Œæ–¹ä¾¿ã€‚å› æ­¤ï¼Œæ‚¨å¯ä»¥è½»æ¾åœ°åˆ¶ä½œä¸€ä¸ªè¿™æ ·çš„å®¹å™¨ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">public class GitHubRelease</span><br><span class="line">&#123;</span><br><span class="line">    [JsonProperty(PropertyName = &quot;name&quot;)]</span><br><span class="line">    public string Name &#123; get; set; &#125;</span><br><span class="line">    [JsonProperty(PropertyName = &quot;published_at&quot;)]</span><br><span class="line">    public string PublishedAt &#123; get; set; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p> ç„¶åä½¿ç”¨è¯¥<code>Execute</code>æ–¹æ³•ç›´æ¥ååºåˆ—åŒ–å¯¹è¯¥å®¹å™¨çš„å“åº”ã€‚æ‚¨å¯ä»¥ä»…æ·»åŠ æ‰€éœ€çš„å±æ€§ï¼Œå¹¶ä½¿ç”¨å±æ€§<code>JsonProperty</code>å°†å®ƒä»¬æ˜ å°„åˆ°Cï¼ƒå±æ€§ï¼ˆå¾ˆå¥½çš„è§¦æ‘¸ï¼‰ã€‚ç”±äºæˆ‘ä»¬åœ¨å“åº”ä¸­è·å¾—äº†å‘å¸ƒåˆ—è¡¨ï¼Œå› æ­¤æˆ‘ä»¬å°†<code>List</code> ç”¨ä½œåŒ…å«ç±»å‹ã€‚ </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">public List&lt;GitHubRelease&gt; GetDeserializedReleases(string url)</span><br><span class="line">&#123;</span><br><span class="line">    var client = new RestClient(url);</span><br><span class="line"></span><br><span class="line">    var response = client.Execute&lt;List&lt;GitHubRelease&gt;&gt;(new RestRequest());</span><br><span class="line"></span><br><span class="line">    return response.Data;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸€ç§éå¸¸ç›´æ¥è€Œä¼˜é›…çš„æ–¹å¼æ¥è·å–æˆ‘ä»¬çš„æ•°æ®ã€‚</p>
<p>RestSharpä¸ä»…å…·æœ‰å‘é€<code>GET</code>è¯·æ±‚çš„åŠŸèƒ½ï¼Œè¿˜å¯ä»¥è‡ªå·±æ¢ç´¢å¹¶è§‚å¯Ÿå®ƒçš„é…·ç‚«ä¹‹å¤„ã€‚</p>
<p>åœ¨RestSharpæ¡ˆä¾‹ä¸­è¦è¡¥å……çš„æœ€åä¸€ç‚¹æ˜¯ï¼Œå…¶å­˜å‚¨åº“éœ€è¦ç»´æŠ¤è€…ã€‚å¦‚æœæ‚¨æƒ³äº†è§£æ›´å¤šæœ‰å…³è¿™ä¸ªå¾ˆæ£’çš„åº“çš„ä¿¡æ¯ï¼Œæˆ‘æ•¦ä¿ƒæ‚¨å‰å¾€<a href="https://github.com/restsharp/RestSharp" target="_blank" rel="noopener">RestSharpå­˜å‚¨åº“</a>ï¼Œå¸®åŠ©è¯¥é¡¹ç›®ç»§ç»­å‘å±•å¹¶å˜å¾—æ›´å¥½ã€‚</p>
<h2 id="ServiceStack-Httpå®ç”¨ç¨‹åº"><a href="#ServiceStack-Httpå®ç”¨ç¨‹åº" class="headerlink" title="ServiceStack Httpå®ç”¨ç¨‹åº"></a>ServiceStack Httpå®ç”¨ç¨‹åº</h2><p>å¦ä¸€ä¸ªåº“ï¼Œä½†ä¸RestSharpä¸åŒï¼ŒServiceStackä¼¼ä¹å¾—åˆ°äº†é€‚å½“ç»´æŠ¤ï¼Œå¹¶ä¸ç°ä»£<a href="https://code-maze.com/ultimate-aspnet-core-3-web-api/" target="_blank" rel="noopener">API</a>è¶‹åŠ¿ä¿æŒåŒæ­¥ã€‚ServiceStackåŠŸèƒ½åˆ—è¡¨ä»¤äººå°è±¡æ·±åˆ»ï¼Œå¹¶ä¸”è‚¯å®šå…·æœ‰å„ç§åº”ç”¨ç¨‹åºã€‚</p>
<p>åœ¨è¿™é‡Œå¯¹æˆ‘ä»¬æœ€æœ‰ç”¨çš„æ˜¯æ¼”ç¤ºå¦‚ä½•ä½¿ç”¨å¤–éƒ¨RESTful APIã€‚ServiceStackå…·æœ‰ä¸€ç§ä¸“é—¨çš„æ–¹å¼æ¥å¤„ç†ç§°ä¸º<a href="http://docs.servicestack.net/http-utils" target="_blank" rel="noopener">Http Utilsçš„</a>ç¬¬ä¸‰æ–¹HTTP API ã€‚</p>
<p>è®©æˆ‘ä»¬çœ‹çœ‹å¦‚ä½•é¦–å…ˆä½¿ç”¨Json.NETè§£æå™¨æ¥è·å–RestSharpç‰ˆæœ¬æ˜¯å¦‚ä½•ä½¿ç”¨ServiceStack Http Utilsã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">public string GetReleases(string url)</span><br><span class="line">&#123;</span><br><span class="line">    var response = url.GetJsonFromUrl(webReq =&gt;</span><br><span class="line">    &#123;</span><br><span class="line">        webReq.UserAgent = RequestConstants.UserAgentValue;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    return response;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p> æ‚¨è¿˜å¯ä»¥é€‰æ‹©å°†å…¶ç•™ç»™ServiceStackè§£æå™¨ã€‚æˆ‘ä»¬å¯ä»¥é‡ç”¨æœ¬æ–‡å‰é¢å®šä¹‰çš„<code>Release</code>ç±» ã€‚ </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">public List&lt;GitHubRelease&gt; GetDeserializedReleases(string url)</span><br><span class="line">&#123;</span><br><span class="line">    var releases = url.GetJsonFromUrl(webReq =&gt;</span><br><span class="line">    &#123;</span><br><span class="line">        webReq.UserAgent = RequestConstants.UserAgentValue;</span><br><span class="line">    &#125;).FromJson&lt;List&lt;GitHubRelease&gt;&gt;();</span><br><span class="line"></span><br><span class="line">    return releases;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¦‚æ‚¨æ‰€è§ï¼Œæ— è®ºå“ªç§æ–¹å¼éƒ½å¯ä»¥æ­£å¸¸å·¥ä½œï¼Œå¹¶ä¸”æ‚¨å¯ä»¥é€‰æ‹©æ˜¯è·å–å­—ç¬¦ä¸²å“åº”è¿˜æ˜¯ç«‹å³ååºåˆ—åŒ–å®ƒã€‚</p>
<p>å°½ç®¡ServiceStackæ˜¯æˆ‘ä»¬å¶ç„¶å‘ç°çš„æœ€åä¸€ä¸ªåº“ï¼Œä½†ä»¤æˆ‘æ„Ÿåˆ°æƒŠè®¶çš„æ˜¯ï¼Œå®ƒä½¿ç”¨èµ·æ¥å¦‚æ­¤å®¹æ˜“ï¼Œè€Œä¸”æˆ‘è®¤ä¸ºå®ƒå°†æ¥å¯èƒ½æˆä¸ºæˆ‘å¤„ç†APIå’ŒæœåŠ¡çš„é¦–é€‰å·¥å…·ã€‚</p>
<h2 id="Flurl"><a href="#Flurl" class="headerlink" title="Flurl"></a>Flurl</h2><p>è¯„è®ºåº“ä¸­è®¸å¤šäººè¦æ±‚çš„å›¾ä¹¦é¦†ä¹‹ä¸€ï¼Œå¹¶åœ¨Internetä¸Šå—åˆ°è®¸å¤šäººçš„å–œçˆ±ï¼Œä½†ä»å¸å¼•ç€äººä»¬ã€‚</p>
<p>Flurlä»£è¡¨Fluent Url Builderï¼Œè¿™æ˜¯åº“æ„å»ºå…¶æŸ¥è¯¢çš„æ–¹å¼ã€‚å¯¹äºä¸ç†Ÿæ‚‰flurlçš„åšäº‹æ–¹å¼çš„äººæ¥è¯´ï¼Œflurlåªæ˜¯æ„å‘³ç€åº“çš„æ„å»ºæ–¹å¼æ˜¯å°†æ–¹æ³•é“¾æ¥åœ¨ä¸€èµ·ä»¥å®ç°æ›´é«˜çš„å¯è¯»æ€§ï¼Œç±»ä¼¼äºäººç±»è¯­è¨€ã€‚</p>
<p>ä¸ºäº†ä½¿äº‹æƒ…æ›´å®¹æ˜“ç†è§£ï¼Œè®©æˆ‘ä»¬ä¸¾ä¸€äº›ä¾‹å­ï¼ˆè¿™ä¸ªä¾‹å­æ¥è‡ªå®˜æ–¹æ–‡æ¡£ï¼‰ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">// Flurl will use 1 HttpClient instance per host</span><br><span class="line">var person = await &quot;https://api.com&quot;</span><br><span class="line">    .AppendPathSegment(&quot;person&quot;)</span><br><span class="line">    .SetQueryParams(new &#123; a = 1, b = 2 &#125;)</span><br><span class="line">    .WithOAuthBearerToken(&quot;my_oauth_token&quot;)</span><br><span class="line">    .PostJsonAsync(new</span><br><span class="line">    &#123;</span><br><span class="line">        first_name = &quot;Claire&quot;,</span><br><span class="line">        last_name = &quot;Underwood&quot;</span><br><span class="line">    &#125;)</span><br><span class="line">    .ReceiveJson&lt;Person&gt;();</span><br></pre></td></tr></table></figure>

<p>æ‚¨å¯ä»¥çœ‹åˆ°æ–¹æ³•å¦‚ä½•é“¾æ¥åœ¨ä¸€èµ·ä»¥å®Œæˆâ€œå¥å­â€ã€‚</p>
<p>åœ¨åå°ï¼ŒFlurlä½¿ç”¨HttpClientæˆ–é€šè¿‡è‡ªå·±çš„è¯­æ³•ç³–å¢å¼ºHttpClientåº“ã€‚å› æ­¤ï¼Œè¿™æ„å‘³ç€Flurlæ˜¯ä¸€ä¸ªå¼‚æ­¥åº“ï¼Œå› æ­¤è¯·ç‰¢è®°è¿™ä¸€ç‚¹ã€‚</p>
<p>ä¸å…¶ä»–é«˜çº§åº“ä¸€æ ·ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸¤ç§ä¸åŒçš„æ–¹å¼æ¥åšåˆ°è¿™ä¸€ç‚¹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">public string GetReleases(string url)</span><br><span class="line">&#123;</span><br><span class="line">    var result = url</span><br><span class="line">        .WithHeader(RequestConstants.UserAgent, RequestConstants.UserAgentValue)</span><br><span class="line">        .GetJsonAsync&lt;List&lt;GitHubRelease&gt;&gt;()</span><br><span class="line">        .Result;</span><br><span class="line"></span><br><span class="line">    return JsonConvert.SerializeObject(result);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™ç§æ–¹å¼ç›¸å½“ç³Ÿç³•ï¼Œå› ä¸ºæˆ‘ä»¬åªæ˜¯åºåˆ—åŒ–ç»“æœï¼Œä»¥ä¾¿ç¨åå¯¹å…¶è¿›è¡Œååºåˆ—åŒ–ã€‚å¦‚æœæ‚¨ä½¿ç”¨çš„æ˜¯Flurlä¹‹ç±»çš„åº“ï¼Œåˆ™ä¸åº”ä»¥è¿™ç§æ–¹å¼è¿›è¡Œæ“ä½œã€‚</p>
<p>æ›´å¥½çš„åšäº‹æ–¹å¼æ˜¯ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">public List&lt;GitHubRelease&gt; GetDeserializedReleases(string url)</span><br><span class="line">&#123;</span><br><span class="line">    var result = url</span><br><span class="line">        .WithHeader(RequestConstants.UserAgent, RequestConstants.UserAgentValue)</span><br><span class="line">        .GetJsonAsync&lt;List&lt;GitHubRelease&gt;&gt;()</span><br><span class="line">        .Result;</span><br><span class="line"></span><br><span class="line">    return result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p> éšç€<code>.Result</code>æˆ‘ä»¬å¼ºè¿«ä»£ç çš„åŒæ­¥è¡Œä¸ºã€‚ä½¿ç”¨Flurlçš„å®é™…å’Œé¢„æœŸæ–¹å¼å¦‚ä¸‹æ‰€ç¤ºï¼š </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">public async Task&lt;List&lt;GitHubRelease&gt;&gt; GetDeserializedReleases(string url)</span><br><span class="line">&#123;</span><br><span class="line">    var result = await url</span><br><span class="line">        .WithHeader(RequestConstants.UserAgent, RequestConstants.UserAgentValue)</span><br><span class="line">        .GetJsonAsync&lt;List&lt;GitHubRelease&gt;&gt;();</span><br><span class="line"></span><br><span class="line">    return result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™å±•ç¤ºäº†Flurlåº“çš„å…¨éƒ¨æ½œåŠ›ã€‚</p>
<p>å¦‚æœæ‚¨æƒ³äº†è§£æ›´å¤šæœ‰å…³å¦‚ä½•åœ¨ä¸åŒçš„ç°å®ç”Ÿæ´»åœºæ™¯ä½¿ç”¨Flurlï¼Œçœ‹çœ‹æˆ‘ä»¬çš„ <a href="https://code-maze.com/consuming-github-api-rest-with-flurl/" target="_blank" rel="noopener">æ¶ˆè´¹GitHubçš„APIï¼ˆRESTï¼‰éšç€</a><a href="https://code-maze.com/wp-admin/post.php?post=4822&action=edit" target="_blank" rel="noopener">Flurl</a> æ–‡ç« </p>
<p>æ€»è€Œè¨€ä¹‹ï¼Œå®ƒå°±åƒå¹¿å‘Šä¸€æ ·ï¼šæ˜“äºä½¿ç”¨ï¼Œç°ä»£ï¼Œå¯è¯»æ€§å’Œå¯æµ‹è¯•æ€§ã€‚æ‚¨å¯¹è¿™ä¸ªåº“è¿˜æœ‰ä»€ä¹ˆæœŸæœ›ï¼Ÿè¦å¼€æºï¼Ÿ<a href="https://github.com/tmenier/Flurl" target="_blank" rel="noopener">ç­¾</a>å‡ºï¼š <a href="https://github.com/tmenier/Flurl" target="_blank" rel="noopener">Flurlå­˜å‚¨åº“</a>ï¼Œå¦‚æœæ‚¨æ„¿æ„ï¼Œå¯ä»¥è´¡çŒ®è‡ªå·±çš„åŠ›é‡ï¼</p>
<h2 id="DalSoft-RestClient"><a href="#DalSoft-RestClient" class="headerlink" title="DalSoft.RestClient"></a>DalSoft.RestClient</h2><p>ç°åœ¨ï¼Œæ­¤åˆ—è¡¨ä¸è¯¥åˆ—è¡¨ä¸­çš„ä»»ä½•å†…å®¹éƒ½æœ‰äº›ä¸åŒã€‚ä½†è¿™ä¸€ç‚¹æœ‰æ‰€ä¸åŒã€‚</p>
<p>è®©æˆ‘ä»¬çœ‹çœ‹å¦‚ä½•ä½¿ç”¨DalSoft.RestClientæ¥ä½¿ç”¨GitHub APIï¼Œç„¶åè°ˆè®ºæˆ‘ä»¬å·²å®Œæˆçš„å·¥ä½œã€‚</p>
<p>é¦–å…ˆï¼Œæ‚¨å¯ä»¥é€šè¿‡è¾“å…¥ä»¥ä¸‹å†…å®¹ï¼Œé€šè¿‡NuGetè½¯ä»¶åŒ…ç®¡ç†å™¨ä¸‹è½½DalSoft.RestClientï¼š <code>Install-Package DalSoft.RestClient</code></p>
<p>æˆ–é€šè¿‡.NET Core CLIï¼š <code>dotnet add package DalSoft.RestClient</code></p>
<p>ä¸¤ç§æ–¹æ³•éƒ½å¯ä»¥ã€‚</p>
<p>æ‹¥æœ‰å›¾ä¹¦é¦†åï¼Œæˆ‘ä»¬å¯ä»¥æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">public string GetReleases(string url)</span><br><span class="line">&#123;</span><br><span class="line">    dynamic client = new RestClient(RequestConstants.BaseUrl,</span><br><span class="line">        new Headers &#123; &#123; RequestConstants.UserAgent, RequestConstants.UserAgentValue &#125; &#125;);</span><br><span class="line"></span><br><span class="line">    var response = client.repos.restsharp.restsharp.releases.Get().Result.ToString();</span><br><span class="line"></span><br><span class="line">    return response;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p> æˆ–æœ€å¥½ä½¿ç”¨DalSoft.RestClientåœ¨å……åˆ†åˆ©ç”¨å…¶åŠŸèƒ½çš„åŒæ—¶ç«‹å³ååºåˆ—åŒ–å“åº”ï¼š </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">public async Task&lt;List&lt;GitHubRelease&gt;&gt; GetDeserializedReleases(string url)</span><br><span class="line">&#123;</span><br><span class="line">    dynamic client = new RestClient(RequestConstants.BaseUrl,</span><br><span class="line">        new Headers &#123; &#123; RequestConstants.UserAgent, RequestConstants.UserAgentValue &#125; &#125;);</span><br><span class="line"></span><br><span class="line">    var response = await client.repos.restsharp.restsharp.releases.Get();</span><br><span class="line"></span><br><span class="line">    return response;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å› æ­¤ï¼Œè®©æˆ‘ä»¬ç¨å¾®è®¨è®ºä¸€ä¸‹è¿™äº›ä¾‹å­ã€‚</p>
<p>ä¹ä¸€çœ‹ï¼Œå®ƒä¼¼ä¹å¹¶ä¸æ¯”æˆ‘ä»¬ä½¿ç”¨çš„å…¶ä»–ä¸€äº›ç°ä»£åº“ç®€å•å¾—å¤šã€‚</p>
<p>ä½†è¿™å½’ç»“ä¸ºå½¢æˆè¯·æ±‚çš„æ–¹å¼ï¼Œé‚£å°±æ˜¯åˆ©ç”¨RestClientçš„åŠ¨æ€ç‰¹æ€§ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬çš„BaseUrlæ˜¯<code>https://api.github.com</code> ï¼Œæˆ‘ä»¬éœ€è¦è¿›å…¥<code>https://api.github.com/repos/restsharp/restsharp/releases</code>ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡åŠ¨æ€åˆ›å»ºå®¢æˆ·ç«¯ï¼Œç„¶åé€šè¿‡é“¾æ¥Urlçš„â€œéƒ¨åˆ†â€æ¥å½¢æˆUrlæ¥åšåˆ°è¿™ä¸€ç‚¹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">await client.repos.restsharp.restsharp.releases.Get();</span><br></pre></td></tr></table></figure>

<p>å½¢æˆè¯·æ±‚çš„ä¸€ç§éå¸¸ç‹¬ç‰¹çš„æ–¹æ³•ã€‚è¿˜æœ‰ä¸€ä¸ªéå¸¸çµæ´»çš„ï¼</p>
<p>å› æ­¤ï¼Œä¸€æ—¦æˆ‘ä»¬è®¾ç½®äº†åŸºæœ¬çš„ç½‘å€ï¼Œå°±å¯ä»¥è½»æ¾åœ°ä½¿ç”¨ä¸åŒçš„ç«¯ç‚¹ã€‚</p>
<p>è¿˜å€¼å¾—ä¸€æçš„æ˜¯ï¼Œæˆ‘ä»¬å¾—åˆ°çš„JSONå“åº”ä¼šè‡ªåŠ¨è¿›è¡Œç±»å‹è½¬æ¢ã€‚å¦‚æ‚¨åœ¨ç¬¬äºŒä¸ªç¤ºä¾‹ä¸­çœ‹åˆ°çš„é‚£æ ·ï¼Œæˆ‘ä»¬æ–¹æ³•çš„è¿”å›å€¼æ˜¯<code>Task&gt;.</code> Soï¼Œè¯¥åº“è¶³å¤Ÿèªæ˜ï¼Œå¯ä»¥å°†å“åº”è½¬æ¢ä¸ºæˆ‘ä»¬çš„ç±»å‹ï¼ˆä¾èµ–äºJson.NETï¼‰ã€‚è¿™ä½¿æˆ‘ä»¬çš„ç”Ÿæ´»æ›´åŠ è½»æ¾ã€‚</p>
<p>é™¤äº†æ˜“äºç†è§£å’Œä½¿ç”¨ä¹‹å¤–ï¼ŒDalSoft.RestClientè¿˜å…·æœ‰ç°ä»£åº“åº”å…·å¤‡çš„æ‰€æœ‰åŠŸèƒ½ã€‚å®ƒæ˜¯å¯<strong>é…ç½®çš„ï¼Œå¼‚æ­¥çš„ï¼Œå¯æ‰©å±•çš„ï¼Œå¯æµ‹è¯•çš„ï¼Œå¹¶ä¸”æ”¯æŒå¤šä¸ªå¹³å°</strong>ã€‚</p>
<p>æˆ‘ä»¬ä»…æ¼”ç¤ºäº†DalSoft.RestClientåŠŸèƒ½çš„ä¸€å°éƒ¨åˆ†ã€‚å¦‚æœæ‚¨å¯¹ä½¿ç”¨DalSoft.RestClientæ„Ÿå…´è¶£ï¼Œè¯·è½¬è‡³<a href="https://code-maze.com/dalsoft-restclient-consume-any-rest-api/" target="_blank" rel="noopener">æˆ‘ä»¬çš„æ–‡ç« ï¼Œ</a>ä»¥å­¦ä¹ å¦‚ä½•åœ¨ä¸åŒæƒ…å†µä¸‹ä½¿ç”¨å®ƒï¼Œæˆ–å‚é˜… <a href="https://github.com/DalSoft/DalSoft.RestClient" target="_blank" rel="noopener">GitHubå®˜æ–¹ä»“åº“</a>å’Œ<a href="https://restclient.dalsoft.io/" target="_blank" rel="noopener">æ–‡æ¡£</a>ã€‚</p>
<h2 id="å…¶ä»–é€‰æ‹©"><a href="#å…¶ä»–é€‰æ‹©" class="headerlink" title="å…¶ä»–é€‰æ‹©"></a>å…¶ä»–é€‰æ‹©</h2><p>å¯¹äºæ‚¨çš„ç‰¹å®šé—®é¢˜ï¼Œè¿˜æœ‰è®¸å¤šå…¶ä»–é€‰é¡¹å¯ç”¨ã€‚æ‚¨å¯ä»¥ä½¿ç”¨ä»»ä½•è¿™äº›åº“æ¥ä½¿ç”¨ç‰¹å®šçš„RESTful APIã€‚ä¾‹å¦‚ï¼Œ<a href="https://github.com/octokit/octokit.net" target="_blank" rel="noopener">octokit.netä¸“é—¨ </a>ç”¨äºGitHub APIï¼Œ<a href="https://github.com/facebook-csharp-sdk/facebook-csharp-sdk" target="_blank" rel="noopener">Facebook SDK</a> ç”¨äºä½¿ç”¨Facebook APIï¼Œå¹¶ä¸”è¿˜æœ‰è®¸å¤šå…¶ä»–åŠŸèƒ½å¯ç”¨äºä»»ä½•ç”¨é€”ã€‚</p>
<p>è™½ç„¶è¿™äº›åº“æ˜¯ä¸“é—¨ä¸ºè¿™äº›APIè€Œè®¾è®¡çš„ï¼Œå¹¶ä¸”å¯èƒ½æ“…é•¿äºå®ƒä»¬çš„ç”¨é€”ï¼Œä½†å®ƒä»¬çš„ç”¨é€”æ˜¯æœ‰é™çš„ï¼Œå› ä¸ºæ‚¨ç»å¸¸éœ€è¦åœ¨åº”ç”¨ç¨‹åºä¸­è¿æ¥å¤šä¸ª<a href="https://code-maze.com/ultimate-aspnet-core-3-web-api/" target="_blank" rel="noopener">API</a>ã€‚è¿™å¯èƒ½ä¼šå¯¼è‡´æ¯ä¸ªå®ç°éƒ½æœ‰ä¸åŒçš„å®ç°æ–¹å¼ï¼Œä»¥åŠæ›´å¤šçš„ä¾èµ–å…³ç³»ï¼Œè¿™å¯èƒ½å¯¼è‡´é‡å¤å¹¶ä¸”å®¹æ˜“å‡ºé”™ã€‚åº“è¶Šå…·ä½“ï¼Œå…¶çµæ´»æ€§å°±è¶Šå·®ã€‚</p>
<h2 id="GitHubä¸Šçš„æºä»£ç "><a href="#GitHubä¸Šçš„æºä»£ç " class="headerlink" title="GitHubä¸Šçš„æºä»£ç "></a>GitHubä¸Šçš„æºä»£ç </h2><p><a href="https://github.com/CodeMazeBlog/ConsumeRestfulApisExamples" target="_blank" rel="noopener">GitHubä¸Šçš„æºä»£ç </a></p>
<h2 id="ç»“è®º"><a href="#ç»“è®º" class="headerlink" title="ç»“è®º"></a>ç»“è®º</h2><p>å› æ­¤ï¼Œæ€»è€Œè¨€ä¹‹ï¼Œæˆ‘ä»¬å·²ç»è®¨è®ºäº†å¯ç”¨äºä½¿ç”¨RESTful APIçš„ä¸åŒå·¥å…·ã€‚æˆ‘ä»¬å·²ç»æåˆ°äº†ä¸€äº›.NETåº“ï¼Œå¯ä»¥è¿™æ ·åš<code>HttpWebRequest</code>ï¼Œ<code>WebClient</code>å’Œ<code>HttpClient</code>ï¼Œä»¥åŠä¸€äº›æƒŠäººçš„ç¬¬ä¸‰æ–¹å·¥å…·ï¼Œå¦‚RestSharpå’ŒServiceStackã€‚æ‚¨è¿˜å¯¹è¿™äº›å·¥å…·è¿›è¡Œäº†ç®€çŸ­çš„ä»‹ç»ï¼Œå¹¶ç»™å‡ºäº†ä¸€äº›éå¸¸ç®€å•çš„ç¤ºä¾‹æ¥å‘æ‚¨å±•ç¤ºå¦‚ä½•å¼€å§‹ä½¿ç”¨å®ƒä»¬ã€‚</p>
<p>æˆ‘è®¤ä¸ºæ‚¨ç°åœ¨è‡³å°‘æœ‰95ï¼…å‡†å¤‡ä½¿ç”¨ä¸€äº›RESTã€‚ç»§ç»­å±•å¼€ç¿…è†€ï¼Œæ¢ç´¢å¹¶æ‰¾åˆ°æ›´å¤šæœ‰è¶£ä¸”æœ‰è¶£çš„æ–¹å¼æ¥ä½¿ç”¨å’Œè¿æ¥ä¸åŒçš„APIã€‚</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://techq.xyz/2020/04/22/æŠ€æœ¯/æ‚¨åº”è¯¥çŸ¥é“çš„5ç§é¿å…Cï¼ƒ.NETä¸­äº‹ä»¶é€ æˆçš„å†…å­˜æ³„æ¼çš„æŠ€æœ¯/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="æºªæº">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="xiyuanæŠ€æœ¯åœˆ">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2020/04/22/æŠ€æœ¯/æ‚¨åº”è¯¥çŸ¥é“çš„5ç§é¿å…Cï¼ƒ.NETä¸­äº‹ä»¶é€ æˆçš„å†…å­˜æ³„æ¼çš„æŠ€æœ¯/" class="post-title-link" itemprop="url">æ‚¨åº”è¯¥çŸ¥é“çš„5ç§é¿å…Cï¼ƒ.NETä¸­äº‹ä»¶é€ æˆçš„å†…å­˜æ³„æ¼çš„æŠ€æœ¯</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2020-04-22 22:58:00" itemprop="dateCreated datePublished" datetime="2020-04-22T22:58:00+00:00">2020-04-22</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2021-04-25 11:04:00" itemprop="dateModified" datetime="2021-04-25T11:04:00+00:00">2021-04-25</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/æŠ€æœ¯/" itemprop="url" rel="index"><span itemprop="name">æŠ€æœ¯</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="æ‚¨åº”è¯¥çŸ¥é“çš„5ç§é¿å…Cï¼ƒ-NETä¸­äº‹ä»¶é€ æˆçš„å†…å­˜æ³„æ¼çš„æŠ€æœ¯"><a href="#æ‚¨åº”è¯¥çŸ¥é“çš„5ç§é¿å…Cï¼ƒ-NETä¸­äº‹ä»¶é€ æˆçš„å†…å­˜æ³„æ¼çš„æŠ€æœ¯" class="headerlink" title="æ‚¨åº”è¯¥çŸ¥é“çš„5ç§é¿å…Cï¼ƒ.NETä¸­äº‹ä»¶é€ æˆçš„å†…å­˜æ³„æ¼çš„æŠ€æœ¯"></a>æ‚¨åº”è¯¥çŸ¥é“çš„5ç§é¿å…Cï¼ƒ.NETä¸­äº‹ä»¶é€ æˆçš„å†…å­˜æ³„æ¼çš„æŠ€æœ¯</h1><p>Cï¼ƒï¼ˆé€šå¸¸æ˜¯.NETï¼‰ä¸­çš„äº‹ä»¶æ³¨å†Œæ˜¯å†…å­˜æ³„æ¼çš„æœ€å¸¸è§åŸå› ã€‚è‡³å°‘ä»æˆ‘çš„ç»éªŒæ¥çœ‹ã€‚å®é™…ä¸Šï¼Œæˆ‘ä»äº‹ä»¶ä¸­çœ‹åˆ°äº†å¤ªå¤šçš„å†…å­˜æ³„æ¼ï¼Œå› æ­¤ åœ¨ä»£ç ä¸­çœ‹åˆ° <strong>+ =</strong>å°†ç«‹å³ä½¿æˆ‘æ„Ÿåˆ°æ€€ç–‘ã€‚</p>
<p>å°½ç®¡äº‹ä»¶å¾ˆå¸¸è§ï¼Œä½†å®ƒä»¬ä¹Ÿå¾ˆå±é™©ã€‚å¦‚æœæ‚¨ä¸çŸ¥é“è¦æŸ¥æ‰¾çš„å†…å®¹ï¼Œåˆ™äº‹ä»¶å¾ˆå®¹æ˜“å¯¼è‡´å†…å­˜æ³„æ¼ã€‚åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘å°†è§£é‡Šæ­¤é—®é¢˜çš„æ ¹æœ¬åŸå› ï¼Œå¹¶æä¾›å‡ ç§æœ€ä½³å®è·µæŠ€æœ¯æ¥è§£å†³è¯¥é—®é¢˜ã€‚æœ€åï¼Œæˆ‘å°†å‘æ‚¨å±•ç¤ºä¸€ä¸ªç®€å•çš„æŠ€å·§ï¼Œä»¥æ‰¾å‡ºæ‚¨æ˜¯å¦ç¡®å®å­˜åœ¨å†…å­˜æ³„æ¼ã€‚</p>
<h2 id="äº†è§£å†…å­˜æ³„æ¼"><a href="#äº†è§£å†…å­˜æ³„æ¼" class="headerlink" title="äº†è§£å†…å­˜æ³„æ¼"></a>äº†è§£å†…å­˜æ³„æ¼</h2><p>åœ¨åƒåœ¾æ”¶é›†ç¯å¢ƒä¸­ï¼Œæœ¯è¯­â€œå†…å­˜æ³„æ¼â€æœ‰ç‚¹åç›´è§‰ã€‚å½“æœ‰ä¸€ä¸ªåƒåœ¾æ”¶é›†å™¨è´Ÿè´£æ”¶é›†æ‰€æœ‰å†…å®¹æ—¶ï¼Œæˆ‘çš„å†…å­˜å¦‚ä½•æ³„æ¼ï¼Ÿ</p>
<p>ç­”æ¡ˆæ˜¯ï¼Œåœ¨å­˜åœ¨åƒåœ¾æ”¶é›†å™¨ï¼ˆ<strong>GC</strong>ï¼‰çš„æƒ…å†µä¸‹ï¼Œå†…å­˜æ³„æ¼è¡¨ç¤ºæœ‰äº›å¯¹è±¡ä»åœ¨å¼•ç”¨ä¸­ï¼Œä½†å®é™…ä¸Šæœªè¢«ä½¿ç”¨ã€‚ç”±äºå·²å¼•ç”¨å®ƒä»¬ï¼Œå› æ­¤GCå°†ä¸ä¼šæ”¶é›†å®ƒä»¬ï¼Œå¹¶ä¸”å®ƒä»¬å°†æ°¸ä¹…ä¿å­˜ï¼Œå ç”¨å†…å­˜ã€‚</p>
<p>è®©æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªä¾‹å­ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">public class WiFiManager</span><br><span class="line">&#123;</span><br><span class="line">    public event EventHandler &lt;WifiEventArgs&gt; WiFiSignalChanged;</span><br><span class="line">    // ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">public class MyClass</span><br><span class="line">&#123;</span><br><span class="line">    public MyClass(WiFiManager wiFiManager)</span><br><span class="line">    &#123;</span><br><span class="line">        wiFiManager.WiFiSignalChanged += OnWiFiChanged;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    private void OnWiFiChanged(object sender, WifiEventArgs e)</span><br><span class="line">    &#123;</span><br><span class="line">        // do something</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">public void SomeOperation(WiFiManager wiFiManager)</span><br><span class="line">&#123;</span><br><span class="line">    var myClass = new MyClass(wiFiManager);</span><br><span class="line">    myClass.DoSomething();</span><br><span class="line">    </span><br><span class="line">    //... myClass is not used again</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å‡è®¾<strong>WiFiManager</strong> åœ¨ç¨‹åºçš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸä¸­éƒ½å¤„äºæ´»åŠ¨çŠ¶æ€ã€‚æ‰§è¡Œ<strong>SomeOperationä¹‹å</strong>ï¼Œå°†åˆ›å»º<strong>MyClass</strong>çš„å®ä¾‹ï¼Œå¹¶ä¸”ä¸å†ä½¿ç”¨å®ƒã€‚ç¨‹åºå‘˜å¯èƒ½ä¼šè®¤ä¸ºGCå°†æ”¶é›†å®ƒï¼Œä½†äº‹å®å¹¶éå¦‚æ­¤ã€‚æ‰€è¿°<strong>WiFiManager</strong>ä¿æŒåœ¨å…¶äº‹ä»¶MyClassçš„å‚è€ƒ <strong>WiFiSignalChanged</strong>å’Œå®ƒå¼•èµ·äº†å†…å­˜æ³„æ¼ã€‚GCå°†æ°¸è¿œä¸ä¼šæ”¶é›†<strong>MyClass</strong>ã€‚</p>
<h2 id="1-ç¡®ä¿é€€è®¢"><a href="#1-ç¡®ä¿é€€è®¢" class="headerlink" title="1.ç¡®ä¿é€€è®¢"></a>1.ç¡®ä¿é€€è®¢</h2><p>æ˜¾è€Œæ˜“è§çš„è§£å†³æ–¹æ¡ˆï¼ˆå°½ç®¡å¹¶éæ€»æ˜¯æœ€ç®€å•çš„ï¼‰æ˜¯è®°ä½ä»äº‹ä»¶ä¸­æ³¨é”€äº‹ä»¶å¤„ç†ç¨‹åºã€‚ä¸€ç§æ–¹æ³•æ˜¯å®ç°IDisposableï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">public class MyClass : IDisposable</span><br><span class="line">&#123;</span><br><span class="line">    private readonly WiFiManager _wiFiManager;</span><br><span class="line"> </span><br><span class="line">    public MyClass(WiFiManager wiFiManager)</span><br><span class="line">    &#123;</span><br><span class="line">        _wiFiManager = wiFiManager;</span><br><span class="line">        _wiFiManager.WiFiSignalChanged += OnWiFiChanged;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    public void Dispose()</span><br><span class="line">    &#123;</span><br><span class="line">        _wiFiManager.WiFiSignalChanged -= OnWiFiChanged;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    private void OnWiFiChanged(object sender, WifiEventArgs e)</span><br><span class="line">    &#123;</span><br><span class="line">        // do something</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>å½“ç„¶ï¼Œæ‚¨å¿…é¡»ç¡®ä¿è°ƒç”¨<strong>Dispose</strong>ã€‚å¦‚æœæ‚¨æœ‰WPFæ§ä»¶ï¼Œä¸€ä¸ªç®€å•çš„è§£å†³æ–¹æ¡ˆæ˜¯é€€è®¢<strong>Unloaded</strong>äº‹ä»¶ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">public partial class MyUserControl : UserControl</span><br><span class="line">&#123;</span><br><span class="line">    public MyUserControl(WiFiManager wiFiManager)</span><br><span class="line">    &#123;</span><br><span class="line">        InitializeComponent();</span><br><span class="line">        this.Loaded += (sender, args) =&gt; wiFiManager.WiFiSignalChanged += OnWiFiChanged;</span><br><span class="line">        this.Unloaded += (sender, args) =&gt; wiFiManager.WiFiSignalChanged -= OnWiFiChanged;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    private void OnWiFiChanged(object sender, WifiEventArgs e)</span><br><span class="line">    &#123;</span><br><span class="line">        // do something</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¼˜ç‚¹**ï¼šç®€å•æ˜“è¯»çš„ä»£ç ã€‚</p>
<p><strong>ç¼ºç‚¹ï¼š</strong>æ‚¨å¾ˆå®¹æ˜“å¿˜è®°å–æ¶ˆè®¢é˜…ï¼Œæˆ–è€…åœ¨æ‰€æœ‰æƒ…å†µä¸‹éƒ½ä¸ä¼šå–æ¶ˆè®¢é˜…ï¼Œè¿™å°†å¯¼è‡´å†…å­˜æ³„æ¼ã€‚</p>
<h6 id="æ³¨æ„ï¼šå¹¶éæ‰€æœ‰äº‹ä»¶æ³¨å†Œéƒ½ä¼šå¯¼è‡´å†…å­˜æ³„æ¼ã€‚æ³¨å†Œåˆ°å°†è¦è¿‡æœŸçš„äº‹ä»¶æ—¶ï¼Œä¸ä¼šå‘ç”Ÿå†…å­˜æ³„æ¼ã€‚ä¾‹å¦‚ï¼Œåœ¨WPF-UserControlä¸­ï¼Œæ‚¨å¯ä»¥æ³¨å†Œåˆ°Buttonçš„Clickäº‹ä»¶ã€‚è¿™å¾ˆå¥½ï¼Œå¹¶ä¸”ä¸éœ€è¦æ³¨é”€ï¼Œå› ä¸ºç”¨æˆ·æ§ä»¶æ˜¯å”¯ä¸€å¼•ç”¨è¯¥Buttonçš„æ§ä»¶ã€‚å¦‚æœæ²¡æœ‰ä¸€ä¸ªäººå¼•ç”¨ç”¨æˆ·æ§ä»¶ï¼Œé‚£ä¹ˆä¹Ÿå°†æ²¡æœ‰ä¸€ä¸ªäººå¼•ç”¨æŒ‰é’®ï¼Œå¹¶ä¸”GCå°†åŒæ—¶æ”¶é›†ä¸¤è€…ã€‚"><a href="#æ³¨æ„ï¼šå¹¶éæ‰€æœ‰äº‹ä»¶æ³¨å†Œéƒ½ä¼šå¯¼è‡´å†…å­˜æ³„æ¼ã€‚æ³¨å†Œåˆ°å°†è¦è¿‡æœŸçš„äº‹ä»¶æ—¶ï¼Œä¸ä¼šå‘ç”Ÿå†…å­˜æ³„æ¼ã€‚ä¾‹å¦‚ï¼Œåœ¨WPF-UserControlä¸­ï¼Œæ‚¨å¯ä»¥æ³¨å†Œåˆ°Buttonçš„Clickäº‹ä»¶ã€‚è¿™å¾ˆå¥½ï¼Œå¹¶ä¸”ä¸éœ€è¦æ³¨é”€ï¼Œå› ä¸ºç”¨æˆ·æ§ä»¶æ˜¯å”¯ä¸€å¼•ç”¨è¯¥Buttonçš„æ§ä»¶ã€‚å¦‚æœæ²¡æœ‰ä¸€ä¸ªäººå¼•ç”¨ç”¨æˆ·æ§ä»¶ï¼Œé‚£ä¹ˆä¹Ÿå°†æ²¡æœ‰ä¸€ä¸ªäººå¼•ç”¨æŒ‰é’®ï¼Œå¹¶ä¸”GCå°†åŒæ—¶æ”¶é›†ä¸¤è€…ã€‚" class="headerlink" title="æ³¨æ„ï¼šå¹¶éæ‰€æœ‰äº‹ä»¶æ³¨å†Œéƒ½ä¼šå¯¼è‡´å†…å­˜æ³„æ¼ã€‚æ³¨å†Œåˆ°å°†è¦è¿‡æœŸçš„äº‹ä»¶æ—¶ï¼Œä¸ä¼šå‘ç”Ÿå†…å­˜æ³„æ¼ã€‚ä¾‹å¦‚ï¼Œåœ¨WPF UserControlä¸­ï¼Œæ‚¨å¯ä»¥æ³¨å†Œåˆ°Buttonçš„Clickäº‹ä»¶ã€‚è¿™å¾ˆå¥½ï¼Œå¹¶ä¸”ä¸éœ€è¦æ³¨é”€ï¼Œå› ä¸ºç”¨æˆ·æ§ä»¶æ˜¯å”¯ä¸€å¼•ç”¨è¯¥Buttonçš„æ§ä»¶ã€‚å¦‚æœæ²¡æœ‰ä¸€ä¸ªäººå¼•ç”¨ç”¨æˆ·æ§ä»¶ï¼Œé‚£ä¹ˆä¹Ÿå°†æ²¡æœ‰ä¸€ä¸ªäººå¼•ç”¨æŒ‰é’®ï¼Œå¹¶ä¸”GCå°†åŒæ—¶æ”¶é›†ä¸¤è€…ã€‚"></a>æ³¨æ„ï¼šå¹¶éæ‰€æœ‰äº‹ä»¶æ³¨å†Œéƒ½ä¼šå¯¼è‡´å†…å­˜æ³„æ¼ã€‚æ³¨å†Œåˆ°å°†è¦<strong>è¿‡æœŸ</strong>çš„äº‹ä»¶æ—¶ï¼Œä¸ä¼šå‘ç”Ÿå†…å­˜æ³„æ¼ã€‚ä¾‹å¦‚ï¼Œåœ¨WPF <strong>UserControlä¸­ï¼Œ</strong>æ‚¨å¯ä»¥æ³¨å†Œåˆ°Buttonçš„<strong>Click</strong>äº‹ä»¶ã€‚è¿™å¾ˆå¥½ï¼Œå¹¶ä¸”ä¸éœ€è¦æ³¨é”€ï¼Œå› ä¸ºç”¨æˆ·æ§ä»¶æ˜¯å”¯ä¸€å¼•ç”¨è¯¥Buttonçš„æ§ä»¶ã€‚å¦‚æœæ²¡æœ‰ä¸€ä¸ªäººå¼•ç”¨ç”¨æˆ·æ§ä»¶ï¼Œé‚£ä¹ˆä¹Ÿå°†æ²¡æœ‰ä¸€ä¸ªäººå¼•ç”¨æŒ‰é’®ï¼Œå¹¶ä¸”<strong>GC</strong>å°†åŒæ—¶æ”¶é›†ä¸¤è€…ã€‚</h6><h2 id="2-è®©å¤„ç†ç¨‹åºé€€è®¢"><a href="#2-è®©å¤„ç†ç¨‹åºé€€è®¢" class="headerlink" title="2.è®©å¤„ç†ç¨‹åºé€€è®¢"></a>2.è®©å¤„ç†ç¨‹åºé€€è®¢</h2><p>åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œæ‚¨å¯èƒ½å¸Œæœ›äº‹ä»¶å¤„ç†ç¨‹åºä»…å‘ç”Ÿä¸€æ¬¡ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ‚¨å°†å¸Œæœ›ä»£ç è‡ªå·±é€€è®¢ã€‚å½“äº‹ä»¶å¤„ç†ç¨‹åºæ˜¯å‘½åæ–¹æ³•æ—¶ï¼Œå®ƒå¾ˆå®¹æ˜“ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">public class MyClass</span><br><span class="line">&#123;</span><br><span class="line">    private readonly WiFiManager _wiFiManager;</span><br><span class="line"> </span><br><span class="line">    public MyClass(WiFiManager wiFiManager)</span><br><span class="line">    &#123;</span><br><span class="line">        _wiFiManager = wiFiManager;</span><br><span class="line">        _wiFiManager.WiFiSignalChanged += OnWiFiChanged;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    private void OnWiFiChanged(object sender, WifiEventArgs e)</span><br><span class="line">    &#123;</span><br><span class="line">        // do something</span><br><span class="line">        _wiFiManager.WiFiSignalChanged -= OnWiFiChanged;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä½†æ˜¯ï¼Œæœ‰æ—¶æ‚¨å¸Œæœ›äº‹ä»¶å¤„ç†ç¨‹åºæ˜¯lambdaè¡¨è¾¾å¼ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä»¥ä¸‹æ˜¯ä¸€ç§ä½¿è‡ªå·±é€€è®¢çš„æœ‰ç”¨æŠ€æœ¯ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">public class MyClass</span><br><span class="line">&#123;</span><br><span class="line">    public MyClass(WiFiManager wiFiManager)</span><br><span class="line">    &#123;</span><br><span class="line">        var someObject = GetSomeObject();</span><br><span class="line">        EventHandler&lt;WifiEventArgs&gt; handler = null;</span><br><span class="line">        handler = (sender, args) =&gt;</span><br><span class="line">        &#123;</span><br><span class="line">            Console.WriteLine(someObject);</span><br><span class="line">            wiFiManager.WiFiSignalChanged -= handler;</span><br><span class="line">        &#125;;</span><br><span class="line">        wiFiManager.WiFiSignalChanged += handler;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œlambdaè¡¨è¾¾å¼éå¸¸æœ‰ç”¨ï¼Œå› ä¸ºæ‚¨å¯ä»¥æ•è·å±€éƒ¨å˜é‡<strong>someObject</strong>ï¼Œè€Œä½¿ç”¨å¤„ç†ç¨‹åºæ–¹æ³•åˆ™æ— æ³•åšåˆ°è¿™ä¸€ç‚¹ã€‚</p>
<p><strong>ä¼˜ç‚¹ï¼š</strong>ç®€å•ï¼Œæ˜“è¯»ï¼Œåªè¦æ‚¨ç¡®å®šäº‹ä»¶è‡³å°‘ä¼šè§¦å‘ä¸€æ¬¡ï¼Œå°±ä¸ä¼šå‘ç”Ÿå†…å­˜æ³„æ¼ã€‚</p>
<p><strong>ç¼ºç‚¹ï¼š</strong>ä»…åœ¨éœ€è¦å¤„ç†ä¸€æ¬¡äº‹ä»¶çš„ç‰¹æ®Šæƒ…å†µä¸‹å¯ç”¨ã€‚</p>
<h2 id="3-å°†å¼±äº‹ä»¶ä¸äº‹ä»¶èšåˆå™¨ä¸€èµ·ä½¿ç”¨"><a href="#3-å°†å¼±äº‹ä»¶ä¸äº‹ä»¶èšåˆå™¨ä¸€èµ·ä½¿ç”¨" class="headerlink" title="3.å°†å¼±äº‹ä»¶ä¸äº‹ä»¶èšåˆå™¨ä¸€èµ·ä½¿ç”¨"></a>3.å°†å¼±äº‹ä»¶ä¸äº‹ä»¶èšåˆå™¨ä¸€èµ·ä½¿ç”¨</h2><p>åœ¨.NETä¸­å¼•ç”¨å¯¹è±¡æ—¶ï¼Œæ‚¨åŸºæœ¬ä¸Šä¼šå‘Šè¯‰GCè¯¥å¯¹è±¡æ­£åœ¨ä½¿ç”¨ä¸­ï¼Œå› æ­¤è¯·ä¸è¦æ”¶é›†å®ƒã€‚æœ‰ä¸€ç§å¼•ç”¨å¯¹è±¡çš„æ–¹æ³•ï¼Œè€Œæ— éœ€å®é™…è¯´â€œæˆ‘æ­£åœ¨ä½¿ç”¨å®ƒâ€ã€‚è¿™ç§å‚è€ƒç§°ä¸º <em>å¼±å‚è€ƒ</em>ã€‚æ‚¨æ˜¯è¯´â€œæˆ‘ä¸éœ€è¦å®ƒï¼Œä½†æ˜¯å¦‚æœå®ƒä»ç„¶å­˜åœ¨ï¼Œé‚£ä¹ˆæˆ‘ä¼šä½¿ç”¨å®ƒâ€ã€‚åœ¨å…¶ä»–æ¢å¥è¯è¯´ï¼Œå¦‚æœæŸä¸ªå¯¹è±¡ä»…è¢«å¼±å¼•ç”¨å¼•ç”¨ï¼Œåˆ™<strong>GC</strong>ä¼šæ”¶é›†è¯¥å¯¹è±¡å¹¶é‡Šæ”¾è¯¥å†…å­˜ã€‚è¿™æ˜¯ä½¿ç”¨.NETçš„<strong>WeakReference</strong> ç±»å®ç°çš„ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥é€šè¿‡å¤šç§æ–¹å¼ä½¿ç”¨å®ƒæ¥é˜²æ­¢å†…å­˜æ³„æ¼ã€‚ä¸€ç§æµè¡Œçš„è®¾è®¡æ¨¡å¼æ˜¯ä½¿ç”¨<a href="https://www.codeproject.com/Articles/812461/Event-Aggregator-Pattern" target="_blank" rel="noopener">äº‹ä»¶èšåˆå™¨</a>ã€‚è¿™ä¸ªæ¦‚å¿µæ˜¯ï¼Œä»»ä½•äººéƒ½å¯ä»¥<strong>è®¢é˜…</strong> Tç±»å‹çš„äº‹ä»¶ï¼Œä»»ä½•äººéƒ½å¯ä»¥<strong>å‘å¸ƒ</strong> Tç±»å‹çš„äº‹ä»¶ã€‚å› æ­¤ï¼Œå½“ä¸€ä¸ªç±»å‘å¸ƒäº‹ä»¶æ—¶ï¼Œå°†è°ƒç”¨æ‰€æœ‰è®¢é˜…çš„äº‹ä»¶å¤„ç†ç¨‹åºã€‚äº‹ä»¶èšåˆå™¨ä½¿ç”¨WeakReferenceå¼•ç”¨æ‰€æœ‰å†…å®¹ã€‚æ‰€ä»¥å³ä½¿æœ‰ç‰©ä½“ææ–¯ è®¢é˜…äº‹ä»¶ï¼Œä»ç„¶å¯ä»¥å¯¹å…¶è¿›è¡Œåƒåœ¾å›æ”¶ã€‚</p>
<p>è¿™æ˜¯ä¸€ä¸ªä½¿ç”¨<strong>Prism</strong> æµè¡Œçš„äº‹ä»¶èšåˆå™¨ï¼ˆé€šè¿‡NuGet <a href="https://www.nuget.org/packages/Prism.Core/" target="_blank" rel="noopener">Prism.Coreæä¾›</a>ï¼‰çš„<a href="https://www.nuget.org/packages/Prism.Core/" target="_blank" rel="noopener">ç¤ºä¾‹</a>ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">public class WiFiManager</span><br><span class="line">&#123;</span><br><span class="line">    private readonly IEventAggregator _eventAggregator;</span><br><span class="line"> </span><br><span class="line">    public WiFiManager(IEventAggregator eventAggregator)</span><br><span class="line">    &#123;</span><br><span class="line">        _eventAggregator = eventAggregator;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    public void PublishEvent()</span><br><span class="line">    &#123;</span><br><span class="line">        _eventAggregator.GetEvent&lt;WiFiEvent&gt;().Publish(new WifiEventArgs());</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">public class MyClass</span><br><span class="line">&#123;</span><br><span class="line">    public MyClass(IEventAggregator eventAggregator)</span><br><span class="line">    &#123;</span><br><span class="line">        eventAggregator.GetEvent&lt;WiFiEvent&gt;().Subscribe(OnWiFiChanged);</span><br><span class="line"> </span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    private void OnWiFiChanged(WifiEventArgs args)</span><br><span class="line">    &#123;</span><br><span class="line">        // do something</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">public class WiFiEvent : PubSubEvent&lt;WifiEventArgs&gt;</span><br><span class="line">&#123;</span><br><span class="line">    // ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>ä¼˜ç‚¹ï¼š</strong> é˜²æ­¢å†…å­˜æ³„æ¼ï¼Œç›¸å¯¹æ˜“äºä½¿ç”¨ã€‚</p>
<p><strong>ç¼ºç‚¹ï¼š</strong></p>
<p> å……å½“æ‰€æœ‰äº‹ä»¶çš„å…¨å±€å®¹å™¨ã€‚ä»»ä½•äººéƒ½å¯ä»¥è®¢é˜…ä»»ä½•äººã€‚è¿™ä½¿å¾—ç³»ç»Ÿåœ¨è¿‡åº¦ä½¿ç”¨æ—¶éš¾ä»¥ç†è§£ã€‚æ²¡æœ‰åˆ†ç¦»çš„å…³æ³¨ç‚¹ã€‚</p>
<h2 id="4-å¯¹å¸¸è§„äº‹ä»¶ä½¿ç”¨å¼±äº‹ä»¶å¤„ç†ç¨‹åº"><a href="#4-å¯¹å¸¸è§„äº‹ä»¶ä½¿ç”¨å¼±äº‹ä»¶å¤„ç†ç¨‹åº" class="headerlink" title="4.å¯¹å¸¸è§„äº‹ä»¶ä½¿ç”¨å¼±äº‹ä»¶å¤„ç†ç¨‹åº"></a>4.å¯¹å¸¸è§„äº‹ä»¶ä½¿ç”¨å¼±äº‹ä»¶å¤„ç†ç¨‹åº</h2><p>å€ŸåŠ©ä¸€äº›ä»£ç æŠ€å·§ï¼Œå¯ä»¥å°†å¼±å¼•ç”¨ä¸å¸¸è§„äº‹ä»¶ä¸€èµ·ä½¿ç”¨ã€‚è¿™å¯ä»¥é€šè¿‡å‡ ç§ä¸åŒçš„æ–¹å¼æ¥å®ç°ã€‚è¿™æ˜¯ä½¿ç”¨Paul Stovellçš„<a href="http://paulstovell.com/blog/weakevents" target="_blank" rel="noopener">WeakEventHandler</a>çš„ç¤ºä¾‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">public class MyClass</span><br><span class="line">&#123;</span><br><span class="line">    public MyClass(WiFiManager wiFiManager)</span><br><span class="line">    &#123;</span><br><span class="line">        wiFiManager.WiFiSignalChanged += new WeakEventHandler&lt;WifiEventArgs&gt;(OnWiFiChanged).Handler;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    private void OnWiFiChanged(object sender, WifiEventArgs e)</span><br><span class="line">    &#123;</span><br><span class="line">        // do something</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">public class WiFiManager</span><br><span class="line">&#123;</span><br><span class="line">    public event EventHandler&lt;WifiEventArgs&gt; WiFiSignalChanged;</span><br><span class="line">    // ...</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">public void SomeOperation(WiFiManager wiFiManager)</span><br><span class="line">&#123;</span><br><span class="line">    var myClass = new MyClass(wiFiManager);</span><br><span class="line">    myClass.DoSomething();</span><br><span class="line">    </span><br><span class="line">    //... myClass is not used again</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æˆ‘çœŸçš„å¾ˆå–œæ¬¢è¿™ç§æ–¹æ³•ï¼Œå› ä¸ºåœ¨æˆ‘ä»¬çš„æ¡ˆä¾‹ä¸­ï¼Œå‘å¸ƒè€…<strong>WiFiManager</strong>ä¿ç•™äº†æ ‡å‡†çš„Cï¼ƒäº‹ä»¶ã€‚è¿™åªæ˜¯è¿™ç§æ¨¡å¼çš„ä¸€ç§å®ç°ï¼Œä½†æ˜¯å®é™…ä¸Šæœ‰å¾ˆå¤šæ–¹æ³•å¯ä»¥è§£å†³ã€‚<strong>Daniel Grunwald</strong>å†™äº†<a href="https://www.codeproject.com/Articles/29922/Weak-Events-in-C" target="_blank" rel="noopener">ä¸€ç¯‡</a>æœ‰å…³ä¸åŒå®ç°åŠå…¶å·®å¼‚çš„æ–‡ç« ã€‚</p>
<p><strong>ä¼˜ç‚¹ï¼š</strong>åˆ©ç”¨æ ‡å‡†äº‹ä»¶ã€‚ç®€å•ã€‚æ²¡æœ‰å†…å­˜æ³„æ¼ã€‚å…³æ³¨ç‚¹åˆ†ç¦»ï¼ˆä¸äº‹ä»¶èšåˆå™¨ä¸åŒï¼‰ã€‚</p>
<p><strong>ç¼ºç‚¹ï¼š</strong>æ­¤æ¨¡å¼çš„ä¸åŒå®ç°æœ‰ä¸€äº›ç»†å¾®ä¹‹å¤„å’Œä¸åŒé—®é¢˜ã€‚è¯¥ç¤ºä¾‹ä¸­çš„å®ç°å®é™…ä¸Šåˆ›å»ºäº†ä¸€ä¸ª æ³¨å†Œçš„<strong>åŒ…è£…</strong>å¯¹è±¡ï¼Œè¯¥ <strong>åŒ…è£…</strong>å¯¹è±¡ä»æœªè¢«GCæ”¶é›†ã€‚å…¶ä»–å®ç°å¯ä»¥è§£å†³æ­¤é—®é¢˜ï¼Œä½†è¿˜æœ‰å…¶ä»–é—®é¢˜ï¼Œä¾‹å¦‚å…¶ä»–æ ·æ¿ä»£ç ã€‚åœ¨Danielçš„<a href="https://www.codeproject.com/Articles/29922/Weak-Events-in-C" target="_blank" rel="noopener">æ–‡ç« ä¸­</a>äº†è§£æœ‰å…³æ­¤å†…å®¹çš„æ›´å¤šä¿¡æ¯ ã€‚</p>
<h2 id="WeakReferenceè§£å†³æ–¹æ¡ˆå­˜åœ¨çš„é—®é¢˜"><a href="#WeakReferenceè§£å†³æ–¹æ¡ˆå­˜åœ¨çš„é—®é¢˜" class="headerlink" title="WeakReferenceè§£å†³æ–¹æ¡ˆå­˜åœ¨çš„é—®é¢˜"></a>WeakReferenceè§£å†³æ–¹æ¡ˆå­˜åœ¨çš„é—®é¢˜</h2><p>ä½¿ç”¨<strong>WeakReference</strong>æ„å‘³ç€<strong>GC</strong>å°†èƒ½å¤Ÿåœ¨å¯èƒ½çš„æƒ…å†µä¸‹æ”¶é›†è®¢é˜…ç±»ã€‚ä½†æ˜¯ï¼ŒGCä¸ä¼šç«‹å³æ”¶é›†æœªå¼•ç”¨çš„å¯¹è±¡ã€‚å°±å¼€å‘å•†è€Œè¨€ï¼Œå®ƒæ˜¯éšæœºçš„ã€‚å› æ­¤ï¼Œå¯¹äºå¼±äº‹ä»¶ï¼Œæ‚¨å¯èƒ½ä¼šåœ¨å½“æ—¶ä¸åº”è¯¥å­˜åœ¨çš„å¯¹è±¡ä¸­è°ƒç”¨äº‹ä»¶å¤„ç†ç¨‹åºã€‚</p>
<p>äº‹ä»¶å¤„ç†ç¨‹åºå¯èƒ½ä¼šæ‰§è¡Œæ— å®³çš„æ“ä½œï¼Œä¾‹å¦‚æ›´æ–°å†…éƒ¨çŠ¶æ€ã€‚æˆ–è€…ï¼Œå®ƒå¯èƒ½ä¼šæ›´æ”¹ç¨‹åºçŠ¶æ€ï¼Œç›´åˆ°GCå†³å®šéšæœºæ”¶é›†æŸä¸ªæ—¶é—´ä¸ºæ­¢ã€‚è¿™ç§è¡Œä¸ºç¡®å®å¾ˆå±é™©ã€‚åœ¨<a href="https://ladimolnar.com/2015/09/14/the-weak-event-pattern-is-dangerous/" target="_blank" rel="noopener">â€œå¼±äº‹ä»¶æ¨¡å¼æ˜¯å±é™©çš„â€ä¸­</a>å¯¹æ­¤è¿›è¡Œé™„åŠ é˜…è¯» ã€‚</p>
<h2 id="5-åœ¨æ²¡æœ‰å†…å­˜æ¢æŸ¥å™¨çš„æƒ…å†µä¸‹æ£€æµ‹å†…å­˜æ³„æ¼"><a href="#5-åœ¨æ²¡æœ‰å†…å­˜æ¢æŸ¥å™¨çš„æƒ…å†µä¸‹æ£€æµ‹å†…å­˜æ³„æ¼" class="headerlink" title="5.åœ¨æ²¡æœ‰å†…å­˜æ¢æŸ¥å™¨çš„æƒ…å†µä¸‹æ£€æµ‹å†…å­˜æ³„æ¼"></a>5.åœ¨æ²¡æœ‰å†…å­˜æ¢æŸ¥å™¨çš„æƒ…å†µä¸‹æ£€æµ‹å†…å­˜æ³„æ¼</h2><p>æ­¤æŠ€æœ¯æ˜¯ä¸ºäº†æµ‹è¯•ç°æœ‰çš„å†…å­˜æ³„æ¼ï¼Œè€Œä¸æ˜¯ç¼–ç æ¨¡å¼ä»¥é¦–å…ˆé¿å…å®ƒä»¬ã€‚</p>
<p>å‡è®¾æ‚¨æ€€ç–‘æŸä¸ªç±»å­˜åœ¨å†…å­˜æ³„æ¼ã€‚å¦‚æœæ‚¨æœ‰åˆ›å»ºä¸€ä¸ªå®ä¾‹ç„¶åå¸Œæœ›<strong>GC</strong>æ”¶é›†å®ƒçš„æƒ…å†µï¼Œåˆ™å¯ä»¥è½»æ¾åœ°ç¡®å®šæ˜¯å¦å°†æ”¶é›†æ‚¨çš„å®ä¾‹æˆ–æ˜¯å¦å­˜åœ¨å†…å­˜æ³„æ¼ã€‚æŒ‰ç€è¿™äº›æ¬¡åºï¼š</p>
<p>1.å°†<strong>ç»ˆç»“å™¨æ·»åŠ </strong>åˆ°æ‚¨çš„å¯ç–‘ç±»ä¸­ï¼Œå¹¶åœ¨å…¶ä¸­æ”¾ç½®ä¸€ä¸ªæ–­ç‚¹ï¼š</p>
<p><img src="https://i2.wp.com/michaelscodingspot.com/wp-content/uploads/2018/12/breakpoint-in-finalizer.jpg?w=1080&ssl=1" alt="img"></p>
<ol start="2">
<li>åœ¨åœºæ™¯<strong>å¼€å§‹</strong>æ—¶æ·»åŠ ä»¥ä¸‹è¦è°ƒç”¨çš„é­”æœ¯3è¡Œï¼š</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">GC.Collect();</span><br><span class="line">GC.WaitForPendingFinalizers();</span><br><span class="line">GC.Collect();</span><br></pre></td></tr></table></figure>

<p>è¿™å°†è¿«ä½¿GCåˆ°ç›®å‰ä¸ºæ­¢æ”¶é›†æ‰€æœ‰æœªå¼•ç”¨çš„å®ä¾‹ï¼ˆä¸åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨ï¼‰ï¼Œå› æ­¤å®ƒä»¬ä¸ä¼šå¹²æ‰°æˆ‘ä»¬çš„è°ƒè¯•ã€‚</p>
<p>3.æ·»åŠ ç›¸åŒçš„3æ¡é­”æœ¯ä»£ç è¡Œï¼Œä»¥ <strong>åœ¨</strong>æ–¹æ¡ˆ<strong>ä¹‹å</strong>è¿è¡Œã€‚è¯·è®°ä½ï¼Œè¯¥æ–¹æ¡ˆæ˜¯åˆ›å»ºå¹¶æ”¶é›†å¯ç–‘å¯¹è±¡çš„æ–¹æ¡ˆã€‚</p>
<p>4.è¿è¡Œæœ‰é—®é¢˜çš„æ–¹æ¡ˆã€‚</p>
<p>åœ¨ç¬¬1æ­¥ä¸­ï¼Œæˆ‘å‘Šè¯‰æ‚¨åœ¨ç±»çš„ç»ˆç»“å™¨ä¸­æ”¾ç½®ä¸€ä¸ªæ–­ç‚¹ã€‚<strong>åœ¨</strong>ç¬¬ä¸€ä¸ªåƒåœ¾å›æ”¶å®Œæˆ<strong>ä¹‹å</strong>ï¼Œæ‚¨å®é™…ä¸Šåº”è¯¥æ³¨æ„è¯¥æ–­ç‚¹ã€‚å¦åˆ™ï¼Œæ‚¨å¯èƒ½ä¼šè¢«åºŸå¼ƒæ—§å®ä¾‹æ„Ÿåˆ°å›°æƒ‘ã€‚éœ€è¦æ³¨æ„çš„é‡è¦æ—¶åˆ»æ˜¯ æ‚¨çš„æ–¹æ¡ˆ<strong>ä¹‹å</strong>è°ƒè¯•å™¨æ˜¯å¦åœ¨Finalizerä¸­åœæ­¢ ã€‚ </p>
<p>å®ƒè¿˜æœ‰åŠ©äºåœ¨ç±»çš„æ„é€ å‡½æ•°ä¸­æ”¾ç½®ä¸€ä¸ªæ–­ç‚¹ã€‚è¿™æ ·ï¼Œæ‚¨å¯ä»¥è®¡ç®—åˆ›å»ºæ¬¡æ•°å’Œå®Œæˆæ¬¡æ•°ã€‚å¦‚æœè§¦å‘äº†ç»ˆç»“å™¨ä¸­çš„æ–­ç‚¹ï¼Œåˆ™GCä¼šæ”¶é›†æ‚¨çš„å®ä¾‹ï¼Œä¸€åˆ‡æ­£å¸¸ã€‚å¦‚æœæ²¡æœ‰ï¼Œåˆ™å¯èƒ½å‘ç”Ÿå†…å­˜æ³„æ¼ã€‚</p>
<p>è¿™æ˜¯æˆ‘è°ƒè¯•çš„ä¸€ç§æ–¹æ¡ˆï¼Œè¯¥æ–¹æ¡ˆä½¿ç”¨äº†ä¸Šä¸€ç§æŠ€æœ¯ä¸­çš„WeakEventHandlerï¼Œå¹¶ä¸”æ²¡æœ‰å†…å­˜æ³„æ¼ï¼š</p>
<p><video controls src="https://michaelscodingspot.com/wp-content/uploads/2018/12/my-class-is-finalized-with-weakEventHandler.mp4" style="box-sizing: border-box; max-width: 100%; margin: 0px; padding: 0px; border: 0px; font: inherit; vertical-align: baseline;"></video></p>
<p>è¿™æ˜¯æˆ‘ä½¿ç”¨å¸¸è§„äº‹ä»¶æ³¨å†Œçš„å¦ä¸€ç§æƒ…å†µï¼Œå®ƒç¡®å®å­˜åœ¨å†…å­˜æ³„æ¼ï¼š</p>
<p><video controls src="https://michaelscodingspot.com/wp-content/uploads/2018/12/my-class-is-not-finalized-with-regular-event.mp4" style="box-sizing: border-box; max-width: 100%; margin: 0px; padding: 0px; border: 0px; font: inherit; vertical-align: baseline;"></video></p>
<h2 id="æ‘˜è¦"><a href="#æ‘˜è¦" class="headerlink" title="æ‘˜è¦"></a>æ‘˜è¦</h2><p>æ€»æ˜¯è®©æˆ‘æ„Ÿåˆ°æƒŠè®¶çš„æ˜¯ï¼ŒCï¼ƒçœ‹èµ·æ¥åƒæ˜¯ä¸€ç§æ˜“äºå­¦ä¹ çš„è¯­è¨€ï¼Œå¹¶ä¸”æä¾›äº†ä¸€ä¸ªæä¾›è®­ç»ƒå¹³å°çš„ç¯å¢ƒã€‚ä½†å®é™…ä¸Šï¼Œè¿˜è¿œè¿œæ²¡æœ‰åšåˆ°ã€‚è¯¸å¦‚ä½¿ç”¨äº‹ä»¶ä¹‹ç±»çš„ç®€å•äº‹æƒ…ï¼Œå¯ä»¥ç”±æœªç»åŸ¹è®­çš„æ‰‹è½»æ¾åœ°å°†æ‚¨çš„åº”ç”¨ç¨‹åºå˜æˆä¸€å †å†…å­˜æ³„æ¼ã€‚</p>
<p>è‡³äºåœ¨ä»£ç ä¸­ä½¿ç”¨çš„æ­£ç¡®æ¨¡å¼ï¼Œæˆ‘è®¤ä¸ºæœ¬æ–‡çš„ç»“è®ºåº”è¯¥æ˜¯ï¼Œåœ¨æ‰€æœ‰æƒ…å†µä¸‹éƒ½æ²¡æœ‰æ­£ç¡®ç­”æ¡ˆã€‚æä¾›çš„æ‰€æœ‰æŠ€æœ¯ï¼Œä»¥åŠä»–ä»¬ï¼Œ è§†æƒ…å†µè€Œå®šæ˜¯å¯è¡Œçš„è§£å†³æ–¹æ¡ˆã€‚ </p>
<p>åŸæ¥è¿™æ˜¯ä¸€ä¸ªç›¸å¯¹è¾ƒå¤§çš„èŒä½ï¼Œä½†åœ¨æ­¤é—®é¢˜ä¸Šï¼Œæˆ‘ä»ç„¶å¤„äºè¾ƒé«˜æ°´å¹³ã€‚è¿™æ°æ°è¯æ˜äº†åœ¨è¿™äº›é—®é¢˜ä¸Šå­˜åœ¨å¤šå°‘æ·±åº¦ï¼Œä»¥åŠè½¯ä»¶å¼€å‘å¦‚ä½•æ°¸æ— æ­¢å¢ƒã€‚</p>
<p>æœ‰å…³å†…å­˜æ³„æ¼çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·æŸ¥çœ‹æˆ‘çš„æ–‡ç« <a href="https://michaelscodingspot.com/2019/01/03/find-fix-and-avoid-memory-leaks-in-c-net-8-best-practices/" target="_blank" rel="noopener">æŸ¥æ‰¾ï¼Œä¿®å¤å’Œé¿å…Cï¼ƒ.NETï¼š8æœ€ä½³å®è·µä¸­çš„å†…å­˜æ³„æ¼</a>ã€‚ä»æˆ‘è‡ªå·±çš„ç»éªŒå’Œå…¶ä»–é«˜çº§.NETå¼€å‘äººå‘˜é‚£é‡Œè·å¾—çš„å¤§é‡ä¿¡æ¯éƒ½ä¸ºæˆ‘æä¾›äº†å»ºè®®ã€‚å®ƒåŒ…æ‹¬æœ‰å…³å†…å­˜åˆ†æå™¨ï¼Œéæ‰˜ç®¡ä»£ç çš„å†…å­˜æ³„æ¼ï¼Œç›‘æ§å†…å­˜ç­‰ä¿¡æ¯ã€‚</p>
<p>æˆ‘å¸Œæœ›æ‚¨åœ¨è¯„è®ºéƒ¨åˆ†ä¸­ç•™ä¸‹ä¸€äº›åé¦ˆã€‚å¹¶ç¡®ä¿<a href="https://michaelscodingspot.com/subscribe/" target="_blank" rel="noopener">è®¢é˜…</a>åšå®¢å¹¶æ”¶åˆ°æ–°å¸–å­é€šçŸ¥ã€‚</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://techq.xyz/2020/04/22/æŠ€æœ¯/åˆ†æEFCoreä¸­çš„å†…å­˜æ³„æ¼/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="æºªæº">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="xiyuanæŠ€æœ¯åœˆ">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2020/04/22/æŠ€æœ¯/åˆ†æEFCoreä¸­çš„å†…å­˜æ³„æ¼/" class="post-title-link" itemprop="url">åˆ†æEFCoreä¸­çš„å†…å­˜æ³„æ¼</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2020-04-22 22:28:00" itemprop="dateCreated datePublished" datetime="2020-04-22T22:28:00+00:00">2020-04-22</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2021-04-25 11:04:00" itemprop="dateModified" datetime="2021-04-25T11:04:00+00:00">2021-04-25</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/æŠ€æœ¯/" itemprop="url" rel="index"><span itemprop="name">æŠ€æœ¯</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="åˆ†æEFCoreä¸­çš„å†…å­˜æ³„æ¼"><a href="#åˆ†æEFCoreä¸­çš„å†…å­˜æ³„æ¼" class="headerlink" title="åˆ†æEFCoreä¸­çš„å†…å­˜æ³„æ¼"></a>åˆ†æEFCoreä¸­çš„å†…å­˜æ³„æ¼</h1><p> <img src="https://dzone.com/storage/temp/12517247-pic-fire-house-leaking-water-into-puddle.jpg" alt="æ¶ˆé˜²æ¼æ°´å…¥æ°´å‘"> </p>
<p>æœ¯è¯­â€œå†…å­˜æ³„æ¼â€å’Œâ€œ .NETåº”ç”¨ç¨‹åºâ€ä¸æ˜¯ç»å¸¸ä¸€èµ·ä½¿ç”¨ã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬æœ€è¿‘åœ¨ä¸€ä¸ª.NET Core Webåº”ç”¨ç¨‹åºä¸­å‡ºç°äº†ä¸€ç³»åˆ—å†…å­˜ä¸è¶³å¼‚å¸¸ã€‚äº‹å®è¯æ˜ï¼Œæ­¤é—®é¢˜æ˜¯ç”±Entity Framework Coreä¸­çš„è¡Œä¸ºæ›´æ”¹å¼•èµ·çš„ï¼Œå°½ç®¡æœ€ç»ˆçš„è§£å†³æ–¹æ¡ˆéå¸¸ç®€å•ï¼Œä½†å®ç°è¯¥ç›®æ ‡çš„è¿‡ç¨‹æ—¢å……æ»¡æŒ‘æˆ˜åˆæœ‰è¶£ã€‚</p>
<p>è¯¥ç³»ç»Ÿæœ¬èº«æ‰˜ç®¡åœ¨Azureä¸­ï¼Œç”±Angular SPAå‰ç«¯å’Œåç«¯çš„.NET Core APIç»„æˆï¼Œä½¿ç”¨Entity Framework Coreä¸Azure SQLæ•°æ®åº“è¿›è¡Œé€šä¿¡ã€‚ä½œä¸ºä¸“é—¨ä»äº‹.NETå¼€å‘çš„è½¯ä»¶å’¨è¯¢å…¬å¸ï¼Œæˆ‘ä»¬ä¹‹å‰å·²ç»ç¼–å†™äº†è®¸å¤šç±»ä¼¼çš„åº”ç”¨ç¨‹åºã€‚å› æ­¤<a href="https://dzone.com/articles/what-causes-outofmemoryerror" target="_blank" rel="noopener">ï¼Œå†…å­˜ä¸è¶³å´©æºƒ</a>æ˜¯æ— æ³•é¢„æ–™çš„ï¼Œå› æ­¤æˆ‘ä»¬ç«‹å³çŸ¥é“è¿™æ˜¯éœ€è¦è®¤çœŸå¯¹å¾…çš„äº‹æƒ…ã€‚ä½¿ç”¨Azureé—¨æˆ·ä¸­çš„æŒ‡æ ‡ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°å†…å­˜ä½¿ç”¨ç‡ç¨³æ­¥ä¸Šå‡ï¼Œç„¶åçªç„¶ä¸‹é™ï¼šæ­¤ä¸‹é™æ˜¯åº”ç”¨ç¨‹åºå´©æºƒã€‚</p>
<p><img src="https://dzone.com/storage/temp/12481545-before.png" alt="ä¿®å¤ä¹‹å‰"></p>
<p><em>ä¿®å¤ä¹‹å‰</em></p>
<p>å› æ­¤ï¼Œæˆ‘ä»¬èŠ±äº†ä¸€äº›æ—¶é—´è¿›è¡Œè°ƒæŸ¥å¹¶é€æ­¥è¿›è¡Œæ›´æ”¹ï¼Œä»¥è§£å†³çœ‹ä¼¼ç»å…¸çš„å†…å­˜æ³„æ¼é—®é¢˜ã€‚.NETæ³„æ¼çš„å¸¸è§åŸå› æ˜¯æœªæ­£ç¡®å¤„ç†æŸäº›é—®é¢˜ï¼Œåœ¨æˆ‘ä»¬çš„æ¡ˆä¾‹ä¸­å¾ˆå¯èƒ½æ˜¯EF Coreæ•°æ®åº“ä¸Šä¸‹æ–‡ã€‚å› æ­¤ï¼Œæˆ‘ä»¬éå†äº†æºä»£ç ï¼Œä»¥å¯»æ‰¾å¯èƒ½æ— æ³•å¤„ç†ä¸Šä¸‹æ–‡çš„æ½œåœ¨åŸå› ã€‚è¿™å˜æˆäº†ç©ºç™½ã€‚</p>
<p>æˆ‘ä»¬å°†Entity Framework Coreå‡çº§åˆ°äº†æœ€æ–°ç‰ˆæœ¬ï¼Œå› ä¸ºæœ€è¿‘çš„æ›´æ–°åŒ…æ‹¬å„ç§å†…å­˜æ³„æ¼çš„ä¿®å¤ç¨‹åºå’Œæ€»ä½“æ•ˆç‡çš„æé«˜ã€‚</p>
<p>æˆ‘ä»¬è¿˜åœ¨ä½¿ç”¨çš„Application Insightsç‰ˆæœ¬ä¸­å‘ç°äº†å¯èƒ½çš„å†…å­˜æ³„æ¼ï¼ˆè¯·å‚é˜…<a href="https://github.com/microsoft/ApplicationInsights-dotnet/issues/594ï¼‰ï¼Œå› æ­¤æˆ‘ä»¬ä¹Ÿå¯¹è¯¥è½¯ä»¶åŒ…è¿›è¡Œäº†å‡çº§ã€‚" target="_blank" rel="noopener">https://github.com/microsoft/ApplicationInsights-dotnet/issues/594ï¼‰ï¼Œå› æ­¤æˆ‘ä»¬ä¹Ÿå¯¹è¯¥è½¯ä»¶åŒ…è¿›è¡Œäº†å‡çº§ã€‚</a></p>
<p>è¿™äº›éƒ½ä¸èƒ½è§£å†³é—®é¢˜ï¼Œå› æ­¤æˆ‘ä»¬è§£å‰–äº†ä»Azureåº”ç”¨æœåŠ¡ä¸­è·å–çš„å†…å­˜è½¬å‚¨ï¼ˆè¯·å‚é˜…<a href="https://blogs.msdn.microsoft.com/jpsanders/2017/02/02/how-to-get-a-full-memory-dump-in-azure-app-services/ï¼‰ã€‚" target="_blank" rel="noopener">https://blogs.msdn.microsoft.com/jpsanders/2017/02/02/how-to-get-a-full-memory-dump-in-azure-app-services/ï¼‰ã€‚</a></p>
<p>æˆ‘ä»¬æ³¨æ„åˆ°ï¼Œç»å¤§å¤šæ•°æ‰˜ç®¡å†…å­˜æœ€ç»ˆéƒ½ç”±MemoryCacheç±»ä½¿ç”¨ã€‚è¿›ä¸€æ­¥æ·±å…¥ç ”ç©¶è¡¨æ˜ï¼Œå¤§å¤šæ•°ç¼“å­˜æ•°æ®éƒ½æ˜¯åŸå§‹SQLæŸ¥è¯¢çš„å½¢å¼ã€‚æˆ‘ä»¬çœ‹åˆ°å¤§é‡çš„æ ¹æœ¬ä¸Šæ˜¯åŒä¸€æŸ¥è¯¢çš„äº‹ä»¶è¢«å¤šæ¬¡ç¼“å­˜ï¼Œå¹¶ä¸”å‚æ•°æœ¬èº«è¢«ç¡¬ç¼–ç åœ¨æŸ¥è¯¢ä¸­è€Œä¸æ˜¯è¢«å‚æ•°åŒ–ã€‚</p>
<p>ä¾‹å¦‚ï¼Œä¸å…¶åƒè¿™æ ·ç¼“å­˜æŸ¥è¯¢ï¼š</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> TOP (<span class="number">1</span>) UserId, FirstName, LastName, EmailAddress</span><br><span class="line"><span class="keyword">FROM</span> <span class="keyword">Users</span></span><br><span class="line"><span class="keyword">WHERE</span> UserId = @param_1</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬å‘ç°è¿™æ ·çš„å¤šä¸ªæŸ¥è¯¢ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT TOP (1) UserId, FirstName, LastName, EmailAddress</span><br><span class="line">FROM Users</span><br><span class="line">WHERE UserId = 5</span><br></pre></td></tr></table></figure>

<p>å› æ­¤ï¼Œæˆ‘ä»¬è¿›è¡Œäº†ä¸€äº›æœç´¢ï¼Œå¯»æ‰¾å¯èƒ½ä¸ä¹‹ç›¸å…³çš„EFæ ¸å¿ƒé—®é¢˜ï¼Œå¹¶é‡åˆ°äº†è¿™ä¸ªé—®é¢˜ï¼š<a href="https://github.com/aspnet/EntityFrameworkCore/issues/10535" target="_blank" rel="noopener">https</a> : <a href="https://github.com/aspnet/EntityFrameworkCore/issues/10535" target="_blank" rel="noopener">//github.com/aspnet/EntityFrameworkCore/issues/10535</a>ã€‚</p>
<p>å…³äºè¿™ä¸ªé—®é¢˜çš„ä¸»é¢˜æŒ‡å‡ºäº†è¿™ä¸ªé—®é¢˜ï¼šæˆ‘ä»¬æ­£åœ¨å»ºç«‹ä¸€ä¸ªåŠ¨æ€è¡¨è¾¾å¼æ ‘ï¼Œå¹¶ä½¿ç”¨å®ƒ  <code>Expressions.Expression.Constant</code> æ¥ä¸ºwhereå­å¥æä¾›å‚æ•°ã€‚ä½¿ç”¨å¸¸é‡è¡¨è¾¾å¼æ„å‘³ç€Entity Framework Coreä¸ä¼šå‚æ•°åŒ–SQLæŸ¥è¯¢ï¼Œå¹¶ä¸”æ˜¯Entity Framework 6çš„è¡Œä¸ºæ›´æ”¹ã€‚</p>
<p>æˆ‘ä»¬åˆ°å¤„éƒ½ä½¿ç”¨è¿™ä¸ªè¡¨è¾¾å¼æ ‘ï¼Œé€šè¿‡å®ƒçš„IDæ¥è·å–æŸäº›ä¸œè¥¿ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆå®ƒæ˜¯ä¸€ä¸ªå¾ˆå¤§çš„é—®é¢˜ã€‚</p>
<p>å› æ­¤ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬æ‰€åšçš„æ›´æ”¹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">// Before</span><br><span class="line">var param = Expressions.Expression.Parameter(typeof(T));</span><br><span class="line">Expression = Expressions.Expression.Lambda&lt;Func&lt;T, bool&gt;&gt;(</span><br><span class="line">  Expressions.Expression.Call(</span><br><span class="line">    Expressions.Expression.Constant(valuesToFilter),</span><br><span class="line">    &quot;Contains&quot;,</span><br><span class="line">    Type.EmptyTypes,</span><br><span class="line">    Expressions.Expression.Property(param, propertyName)),</span><br><span class="line">  param);</span><br><span class="line">// After</span><br><span class="line">var param = Expressions.Expression.Parameter(typeof(T));</span><br><span class="line">// This is what we added</span><br><span class="line">Expression&lt;Func&lt;List&lt;int&gt;&gt;&gt; valuesToFilterLambda = () =&gt; valuesToFilter;</span><br><span class="line">Expression = Expressions.Expression.Lambda&lt;Func&lt;T, bool&gt;&gt;(</span><br><span class="line">  Expressions.Expression.Call(</span><br><span class="line">    valuesToFilterLambda.Body,</span><br><span class="line">    &quot;Contains&quot;,</span><br><span class="line">    Type.EmptyTypes,</span><br><span class="line">    Expressions.Expression.Property(param, propertyName)),</span><br><span class="line">  param);</span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨lambdaè¡¨è¾¾å¼è·å–è¡¨è¾¾å¼ä¸»ä½“ä¼šä½¿<a href="https://dzone.com/articles/entity-framework-core-30-and-sql-server-2019-perfo" target="_blank" rel="noopener">Entity Framework Core</a>å¯¹SQLæŸ¥è¯¢è¿›è¡Œå‚æ•°åŒ–ï¼Œå› æ­¤ä»…ç¼“å­˜å®ƒçš„ä¸€ä¸ªå®ä¾‹ã€‚</p>
<p>è¿™æ˜¯åŒ…æ‹¬ä¿®è®¢ç‰ˆæœ¬åœ¨å†…çš„ä¸€æ®µæ—¶é—´å†…çš„å†…å­˜ä½¿ç”¨æƒ…å†µã€‚è¯¥ç‰ˆæœ¬ä»¥çº¢è‰²æ ‡è®°ï¼Œæ‚¨å¯ä»¥çœ‹åˆ°å·®å¼‚å¾ˆå¤§ã€‚ç¨³å®šçš„å†…å­˜ä½¿ç”¨é‡ä»æœªè¶…è¿‡200MBï¼Œè€Œä¸æ–­æ”€å‡è‡³è¶…è¿‡1GBï¼Œç„¶åå‘ç”Ÿå´©æºƒã€‚</p>
<p><img src="https://dzone.com/storage/temp/12481549-release.png" alt="ä¿®å¤å"></p>
<p><em>ä¿®å¤å</em></p>
<p>æœ€åˆè¿›è¡Œè°ƒæŸ¥æ—¶ï¼ŒçœŸæ­£çš„è§£å†³æ–¹æ¡ˆä¸æ˜¯æˆ‘ä»¬è¦æ³¨æ„çš„äº‹æƒ…ï¼Œè€Œæ˜¯é€šè¿‡æ£€æŸ¥å†…å­˜è½¬å‚¨å¹¶éµå¾ªè¯æ®æˆ‘ä»¬æœ€ç»ˆåˆ°è¾¾é‚£é‡Œã€‚</p>
<p>ä»æ­¤è°ƒæŸ¥ä¸­å¯ä»¥æ±²å–çš„æ•™è®­æ˜¯ï¼š</p>
<ul>
<li>å†…å­˜è½¬å‚¨ä¸ä¼šè¯´è°-å¦‚æœå†…å­˜æ³„æ¼ï¼Œè¯·å…ˆæŸ¥çœ‹è¯æ®ã€‚</li>
<li>å¾®è½¯å·²ç»å¼€æ”¾äº†EF Coreçš„æºä»£ç ï¼Œæ‰€æœ‰é—®é¢˜åœ¨é‚£é‡Œæ‰€æœ‰äººéƒ½å¯ä»¥çœ‹åˆ°ï¼Œå¯¹æœ‰éœ€æ±‚çš„å¼€å‘è€…æ¥è¯´éå¸¸æ–¹ä¾¿ã€‚</li>
<li>ç®€å•çš„ä»£ç æ›´æ”¹ï¼ˆåœ¨è¿™ç§æƒ…å†µä¸‹ä¸ºä¸€è¡Œï¼‰å¯èƒ½ä¼šäº§ç”Ÿå·¨å¤§çš„å½±å“ã€‚</li>
</ul>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://techq.xyz/2020/04/17/éšç¬”/é‚£ä½äº”åå¤šå²çš„åˆ›ä¸šè€…ç»™æˆ‘çš„å¯ç¤º/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="æºªæº">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="xiyuanæŠ€æœ¯åœˆ">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2020/04/17/éšç¬”/é‚£ä½äº”åå¤šå²çš„åˆ›ä¸šè€…ç»™æˆ‘çš„å¯ç¤º/" class="post-title-link" itemprop="url">é‚£ä¸ªå¹´è¿‡åŠç™¾çš„å¥‹æ–—è€…~</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2020-04-17 22:28:00" itemprop="dateCreated datePublished" datetime="2020-04-17T22:28:00+00:00">2020-04-17</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2021-04-25 11:04:00" itemprop="dateModified" datetime="2021-04-25T11:04:00+00:00">2021-04-25</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/éšç¬”/" itemprop="url" rel="index"><span itemprop="name">éšç¬”</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="ä¸€"><a href="#ä¸€" class="headerlink" title="ä¸€"></a>ä¸€</h1><p>æˆ‘æ›¾ç»æåˆ°è¿‡æœ€ç»ˆæ”¹è¡Œä»äº‹ç¾ç¼è¡Œä¸šçš„è€wï¼Œä»–é è‡ªå·±çš„â€œä¸å¤ŸåŠªåŠ›â€ï¼Œæœ€ç»ˆç¦»å¼€äº†è¡Œä¸šã€‚</p>
<p>ä½†æ˜¯ï¼Œè¿™ä¸ªä¸–ç•Œå…¶å®æœ‰ç‚¹è®½åˆºã€‚</p>
<p>åœ¨æ²‰è¿·äºå®‰é€¸å°æ—¥å­çš„è€wæ¯å¤©æœä¹æ™šäº”ï¼Œåªæƒ³æ‹¿é’±ï¼Œä¸æƒ³å¹²æ´»çš„é‚£æ®µæ—¥å­ï¼Œéš”å£çš„æ€»ç»ç†åŠå…¬å®¤å´ç»å¸¸é€šå®µè¾¾æ—¦ã€ç¯ç«é€šæ˜ï¼Œé‚£ä½äº”åäº”å²çš„è€æ¿Yæ€»ï¼Œæ­£åœ¨ä¸ºäº†è‡ªå·±çš„æ¢¦æƒ³åŠªåŠ›å¥‹æ–—ç€ã€‚</p>
<h1 id="äºŒ"><a href="#äºŒ" class="headerlink" title="äºŒ"></a>äºŒ</h1><p>åœ¨åŠ å…¥å…¬å¸ä¹‹å‰ï¼Œæˆ‘æ›¾ç»è§è¿‡ä¸€æ¬¡Yæ€»ï¼Œé‚£æ˜¯åœ¨ä¸€ä¸ªèŒ¶å®¤ï¼Œè·ŸYæ€»æœ‰è¿‡ä¸€ç•ªç®€å•çš„æ²Ÿé€šåï¼Œæˆ‘æ‰“ç®—å»å…¬å¸çœ‹çœ‹ï¼Œä»¥ä¾¿äº†è§£å…¬å¸å®é™…çš„äº§å“æƒ…å†µã€‚</p>
<p>äºæ˜¯å—åˆ°æŠ€æœ¯å›¢é˜Ÿè´Ÿè´£äººçš„é‚€è¯·ï¼Œæˆ‘é€‰æ‹©äº†ä¸€ä¸ªé˜³å…‰æ˜åªšçš„ä¸‹åˆï¼Œåä¸Šäº†è¢«å½“åœ°äººç§°ä¸ºâ€œæœ€é•¿å…¬äº¤çº¿è·¯â€çš„127è·¯å…¬äº¤è½¦ï¼Œåœ¨é‚£æ¡çš„å¼¯å¼¯æ›²æ›²çš„å…¬äº¤çº¿è·¯ä¸Šï¼ŒæŠ˜è…¾äº†å¤§æ¦‚ä¸€ä¸ªå¤šå°æ—¶ï¼Œç»ˆäºæ‰æ¥åˆ°äº†ç›®çš„åœ°ï¼Œä½äºå½“åœ°ä¸œåŒ—è§’çš„æŸå•†åŠ¡å†™å­—æ¥¼ã€‚å¹¶å†æ¬¡è§åˆ°äº†Yæ€»ã€‚</p>
<p>è™½ç„¶æ˜¯ç¬¬äºŒæ¬¡è§åˆ°Yæ€»ï¼Œä½†æ˜¯ç¬¬ä¸€æ¬¡å…¶å®åªæ˜¯ç®€å•çš„æ²Ÿé€šï¼Œå¹¶æ²¡æœ‰ä»”ç»†æ‰“é‡è¿™ä½é¢†å¯¼ã€‚è¿™ä¸€æ¬¡ï¼Œç®—æ˜¯å¯¹Yæ€»æœ‰äº†æ›´åŠ æ·±åˆ»çš„å°è±¡ã€‚</p>
<p>é‚£æ˜¯ä¸€ä½ä¸¤é¬“å¼€å§‹é€æ¸å¼€å§‹å†’å‡ºç™½å‘çš„ä¸­å¹´ç”·å­ï¼Œèº«ä½“ç²¾ç˜¦ã€ç²¾ç¥é¥±æ»¡ã€çœ‹èµ·æ¥å……æ»¡äº†åŠ›é‡ï¼Œä»–æ“ç€ä¸€å£ç›¸å¯¹äºå½“åœ°äººæ¥è¯´éå¸¸çº¯ç²¹çš„æ™®é€šè¯ï¼Œç»™æˆ‘ç•™ä¸‹äº†éå¸¸æ·±åˆ»çš„å°è±¡ã€‚å½“å¬ä»–æèµ·ä»–è‡ªå·±å·²ç»55å²æ—¶ï¼Œæˆ‘çš„å†…å¿ƒæ³›èµ·äº†æ³¢æ¾œã€‚</p>
<p>è¿™æ˜¯ä¸€ä½å’Œæˆ‘çš„çˆ¶äº²ä¸€èˆ¬å¹´é¾„çš„ä¸­å¹´äººå•Š~åœ¨è¿™ä¸ªå¹´é¾„ï¼Œä»–å±…ç„¶é€‰æ‹©äº†åˆ›ä¸šï¼Œç€å®è®©æˆ‘å¤§åƒä¸€æƒŠã€‚</p>
<p>å½“ç„¶ï¼Œä»–æ˜¾ç„¶éå¸¸çš„ä¸“ä¸šï¼Œåœ¨ç®€å•æ¦‚è¦çš„ä»‹ç»äº†å…¬å¸çš„åˆ›ä¸šæ–¹å‘ã€æ‹¥æœ‰çš„èƒŒæ™¯å’Œèµ„æºä¹‹åï¼Œè®©æˆ‘æ·±åˆ»çš„ä½“ä¼šåˆ°ï¼Œä»–ä¸€å®šæ˜¯æƒ³å¹²ä¸€ç•ªå¤§äº‹ä¸šã€‚</p>
<p>äºæ˜¯ï¼Œæˆ‘æ¯«ä¸çŠ¹è±«çš„åŠ å…¥äº†å…¬å¸ï¼Œå¹¶æœŸå¾…åœ¨è¿™é‡Œå¼€å¯èŒåœºçš„æ–°å¾ç¨‹ã€‚</p>
<h1 id="ä¸‰"><a href="#ä¸‰" class="headerlink" title="ä¸‰"></a>ä¸‰</h1><p>åˆ›ä¸šå…¬å¸çš„å‘å±•ï¼Œæ€»æ˜¯è·Œå®•èµ·ä¼ï¼Œçœ‹ä¼¼æ³¢æ¾œä¸æƒŠï¼Œå…¶å®æš—è—æ€æœºã€‚å°¤å…¶æ˜¯é€‰æ‹©åˆé€‚çš„äººæ‰ï¼Œæ›´æ˜¯éš¾ç‚¹ä¸­çš„éš¾ç‚¹ã€‚è°éƒ½æƒ³é€‰æ‹©æœ€ä¼˜ç§€çš„äººæ‰ï¼Œä½†æ˜¯åœ¨ä¼˜ç§€çš„ä¸“ä¸šäººæ‰å’Œä¼˜ç§€çš„è·¨èŒèƒ½å‹äººæ‰é—´ï¼Œå…¶å®éå¸¸éš¾ä»¥é€‰æ‹©ã€‚</p>
<p>è¿˜å¥½ï¼Œæœ¬äººç®—æ˜¯ä¸€ä¸ªå‹‰å¼ºç§°èŒçš„è·¨èŒèƒ½å‹å¼€å‘è€…ï¼Œåœ¨æˆ‘ä»¬éƒ¨é—¨çš„ç»ç†ç¦»èŒä¹‹åï¼Œæ¯…ç„¶æ‰›èµ·äº†éƒ¨é—¨çš„é‡æ‹…ï¼Œä¸ºå…¬å¸å‹‰å¼ºå®Œæˆäº†ä¸€ä¸ªéå¸¸ä¸é”™çš„é¡¹ç›®ï¼Œä½¿å¾—å…¬å¸èƒ½å¤Ÿè·å¾—çŸ­æš‚çš„å–˜æ¯ä¹‹æœºã€‚</p>
<p>ä½†æ˜¯è€wæ‰€åœ¨çš„é¡¹ç›®ï¼Œå´é¢ä¸´äº†å·¨å¤§çš„é—®é¢˜ã€‚</p>
<p>é¦–å…ˆæ˜¯ä¼˜ç§€äººæ‰çš„ç¼ºå¤±ï¼Œæ¯•ç«Ÿèƒ½å¤Ÿæ·±åˆ»é¢†æ‚Ÿå¦‚ä½•åŸºäºç‰©è”ç½‘æŠ€æœ¯æ„å»ºå¹³å°çš„åº”ç”¨å¼€å‘è€…ï¼Œåœ¨å½“æ—¶éå¸¸çš„ç¨€ç¼ºï¼Œæ›´ä½•å†µå…¬å¸æ‰€èƒ½ä»˜å‡ºçš„èµ„æºï¼ˆè¦é’±æ²¡é’±ï¼Œè¦è‚¡ä»½æ²¡è‚¡ä»½ï¼‰å…¶å®éå¸¸æœ‰é™ï¼Œä¹Ÿæ˜¾ç„¶å¾ˆéš¾æ‹›åˆ°åˆé€‚çš„äººæ‰ï¼Œè€Œè¿™ä»…ä»…åªæ˜¯æˆ‘æ‰€çœ‹åˆ°çš„webå¼€å‘æ–¹é¢ï¼Œè¿˜æœ‰æ›´ä¸¥é‡çš„æ–¹é¢æ˜¯ç‰©è”ç½‘åŸºç¡€æŠ€æœ¯æ–¹é¢ã€‚</p>
<p>è¯´æ¥ä¹Ÿæç¬‘ï¼Œæ²¡æœ‰ç‰©è”ç½‘åŸºç¡€æŠ€æœ¯ï¼Œåˆå¦‚ä½•åšç‰©è”ç½‘äº§å“å‘¢ï¼Ÿå…¶å®å€’ä¹Ÿä¸å®Œå…¨æ²¡æœ‰ç§¯ç´¯ï¼Œè¿™ä½è€æ¿å’Œç‰©è”ç½‘éƒ¨é—¨çš„è´Ÿè´£äººæ›¾ç»å‚ä¸åˆ›åŠäº†å¦å¤–ä¸€å®¶éå¸¸ä¼˜ç§€çš„ç‰©è”ç½‘å…¬å¸Hå…¬å¸ï¼Œä»–ä»¬èŠ±äº†åå¹´æ—¶é—´è®©è¿™å®¶å…¬å¸ä»æ— åˆ°æœ‰ï¼Œåˆ°åšåˆ°å›½é™…ä¸€æµã€‚åæ¥Hå…¬å¸ä¸šç»©åˆ°äº†ç“¶é¢ˆï¼Œä»–ä»¬æƒ³ä¸ºå…¬å¸å¼€è¾Ÿæ–°çš„ä¸šåŠ¡æ–¹å‘ï¼Œæ‰åˆ›å»ºäº†è¿™å®¶æ–°çš„ç‰©è”ç½‘å…¬å¸ã€‚ä½†æ˜¯è™½ç„¶åŒæ˜¯ç‰©è”ç½‘åˆ›ä¸šæ–¹å‘ï¼Œä½†é€‰æ‹©çš„æŠ€æœ¯è·¯çº¿å’Œå®ç°æ¨¡å¼å´ä¸å°½ç›¸åŒï¼Œè€Œåœ¨æ–°çš„æŠ€æœ¯è·¯çº¿ä¸Šå…¬å¸çš„ç§¯ç´¯éå¸¸æµ…ã€‚è€Œåœ¨æœ€å…³é”®çš„æ—¶å€™ï¼Œæ‹¥æœ‰æ ¸å¿ƒå¼€å‘èƒ½åŠ›çš„ä¸€ä½åµŒå…¥å¼ç³»ç»Ÿå¼€å‘è€…ï¼Œå±…ç„¶åªæ‰“äº†ä¸ªæ‹›å‘¼ï¼Œè¿äº¤æ¥å’ŒåŸ¹è®­æ–°äººéƒ½æ²¡æœ‰è®¤çœŸå¼€å±•å°±ç¦»å¼€äº†å…¬å¸ï¼Œä½¿å¾—å…¬å¸æŠ€æœ¯å±‚é¢é¢ä¸´å·¨å¤§çš„æ–­å±‚ã€‚</p>
<p>ä¸ºäº†å®Œæˆè¿™ä¸ªé¡¹ç›®ï¼ŒYæ€»åªå¥½è‡ªå·±è¿éš¾è€Œä¸Šã€‚é‚£æ®µæ—¶é—´ä»–ä¸å¾—ä¸æ¡èµ·æ›¾ç»è’åºŸå¤šå¹´çš„åµŒå…¥å¼ç³»ç»Ÿå¼€å‘æŠ€æœ¯ï¼Œå¤©å¤©åŠ ç­åˆ°æ·±å¤œã€‚æ¯å¤©æ—©ä¸Šåˆæœ€æ—©æ¥åˆ°å…¬å¸ï¼Œæ¨ä¸èƒ½å°½æ—©å®Œæˆç›®æ ‡ã€‚</p>
<p>ä»–å°±ä¸æ€•çŒæ­»ä¹ˆï¼Ÿæ˜¾ç„¶ï¼Œä»–æ˜¯æ€•çš„ã€‚ä½†ä¸ºäº†å…¬å¸çš„ç”Ÿå­˜ï¼Œå…¶å®ä»–åˆ«æ— é€‰æ‹©ã€‚</p>
<h1 id="å››"><a href="#å››" class="headerlink" title="å››"></a>å››</h1><p>æˆ‘æ›¾ç»å†’æ˜§çš„é—®è¿‡ä»–é€‰æ‹©åˆ›ä¸šçš„åŸå› ï¼Œä»–åªæ˜¯è½»è½»ä¸€ç¬‘ï¼Œè¿˜ä¸æ˜¯ä¸ºäº†å®ç°è‡ªå·±åˆ›ä¸šçš„æ¢¦æƒ³ï¼Ÿ</p>
<p>æ˜¾ç„¶ä»–ä¸æ„¿æ„è¿‡å¤šçš„æè¿°ã€‚ä½†æ˜¯è”æƒ³åˆ°Yæ€»çš„èŒä¸šç”Ÿæ¶¯ï¼Œæˆ‘å¤§æ¦‚èƒ½çŒœåˆ°ä¸€éƒ¨åˆ†åŸå› ã€‚</p>
<p>Yæ€»è™½ç„¶æ˜¯åŒ—æ–¹äººï¼Œä½†æ˜¯åœ¨è¿™ç‰‡çƒ­åœŸå·²ç»å‘†äº†ä¸‰åå‡ å¹´ã€‚å…«åå¹´ä»£åœ¨ç¬¬ä¸€å¤§å­¦å°±è¯»çš„Yæ€»ï¼Œå¹´è½»æ—¶å­¦ä¹ æˆç»©ç‰¹åˆ«å¥½ï¼Œä¸ä»…ä¿é€æœ¬æ ¡ç ”ç©¶ç”Ÿï¼Œè¿˜ç›´åšï¼Œæ–¹å‘æ˜¯æŸä¸ªçƒ­é—¨çš„é¢†åŸŸã€‚å½“åšå£«æ¯•ä¸šåï¼Œä¹Ÿè®¸ä»–ä¹Ÿæ›¾æƒ³å»æ²¿æµ·åœ°åŒºå‘å±•ï¼Œä½†æ˜¯ä»–æœ€ç»ˆç•™ä¸‹æ¥ä¸»å¯¼è¯¥æ ¡çš„æŸé¢†åŸŸçš„å­¦æœ¯ç ”ç©¶ã€‚</p>
<p>åˆè¿‡äº†å‡ å¹´ï¼Œå¸‚åœºç»æµæ”¾å¼€çš„ä¹åå¹´ä»£ï¼Œä»–ä¹Ÿæœ‰è®¸å¤šé€‰æ‹©çš„æœºä¼šã€‚åœ¨è¯¥é¢†åŸŸæµ¸æ·«åå‡ å¹´çš„ä»–ï¼Œä¸€å®šæ”¶åˆ°äº†è®¸å¤šæ²¿æµ·ä¼ä¸šæˆ–å¤–èµ„ä¼ä¸šçš„è˜ä¹¦ï¼Œä½†æ˜¯ä»–å¹¶æ²¡æœ‰åšå‡ºè¿™æ ·çš„é€‰æ‹©ã€‚</p>
<p>åˆè¿‡äº†åå¹´ï¼Œå››åå²ï¼Œä»–å·²ç»å†³å®šæ”¾å¼€æ‰‹è„šå‡ºå»å¹²ä¸€åœºæ—¶ï¼Œåˆæ˜¯å®¶åº­å‹åŠ›æœ€å¤§çš„æ—¶å€™ã€‚ä¹Ÿè®¸å»æ²¿æµ·åŸå¸‚ä¼šè®©ä»–å®¶åº­å’Œäº‹ä¸šéš¾ä»¥å…¼é¡¾ï¼Œä»–æœ€ç»ˆè¿˜æ˜¯æ²¡æœ‰è¿ˆå‡ºå“ªä¸€æ­¥ã€‚</p>
<p>ä¸€æ™ƒäº”åå²ï¼Œä»–ä»å­¦æ ¡é€€ä¼‘ã€‚å­å¥³ä¹Ÿå‡ºè¿‡ç•™å­¦ï¼Œå¾—åˆ°äº†é¡¶çº§äº’è”ç½‘å…¬å¸çš„offerï¼ŒåŸºæœ¬ä¸Šç®—æ˜¯æ²¡ä»€ä¹ˆå‹åŠ›äº†ã€‚</p>
<p>ä¹Ÿè®¸ï¼Œä»äºŒåå‡ å²åˆ°äº”åå‡ å²ï¼Œä»–é”™è¿‡äº†å¤ªå¤šçš„æœºä¼šã€‚</p>
<p>ä»–ä¹Ÿæ›¾ç»å¶å°”æåˆ°é‚£äº›è·Ÿä»–ä¸€èµ·è¯»ä¹¦çš„åŒå­¦ï¼Œæˆ–è€…ç ”ç©¶æ‰€çš„åŒäº‹ï¼Œåœ¨ç¦»å¼€è±¡ç‰™å¡”åï¼Œæœ‰çš„åŠ å…¥äº†äº’è”ç½‘å…¬å¸èŠ±äº†åå¹´æ—¶é—´è·å¾—äº†è´¢å¯Œè‡ªç”±ï¼Œæœ‰çš„ç”šè‡³åˆ›åŠäº†æŒºä¸é”™çš„å…¬å¸ã€‚</p>
<p>Yæ€»è™½ç„¶ä¹Ÿæ›¾å‚ä¸äº†ä¸€å®¶å…¬å¸çš„åˆ›åŠè¿‡ç¨‹ï¼Œå´å¹¶æ²¡æœ‰ä»é›¶å¼€å§‹åˆ›åŠä¸€å®¶å±äºè‡ªå·±çš„å…¬å¸ï¼Œè€Œä¸”ä»–è‡ªè®¤ä¸ºè¿™å®¶å…¬å¸è™½ç„¶ä¸šåŠ¡è¿˜ç®—ç¨³å®šï¼Œä½†åœ¨æŠ€æœ¯ä¸Šï¼Œä¸èƒ½ç®—å“è¶Šï¼Œåªèƒ½ç®—ä¼˜ç§€ã€‚ç”±äºæ²¡æœ‰èµ¶ä¸Šé£å£ï¼Œæ‰€ä»¥åšå¾—éå¸¸è´¹åŠ›ï¼›è€Œä¸”è¡Œä¸šé¢†åŸŸéå¸¸ç‹­å°ï¼Œå¾ˆéš¾è·å¾—æ›´å¤§çš„å‘å±•ã€‚</p>
<p>ä»–æ˜¾ç„¶æƒ³æŒ‘æˆ˜è‡ªå·±ã€‚</p>
<h1 id="äº”"><a href="#äº”" class="headerlink" title="äº”"></a>äº”</h1><p>ç„¶è€Œï¼Œåˆ›ä¸šéš¾ï¼Œéš¾äºä¸Šé’å¤©ã€‚</p>
<p>æˆ‘ä¹Ÿæœ€ç»ˆé€‰æ‹©äº†ç¦»å¼€è¿™å®¶å…¬å¸ã€‚ä¾ç¨€è®°å¾—Yæ€»è¯´è¿‡çš„è¯ï¼šâ€œäººç”ŸçŸ­çŸ­80å¹´ï¼Œå…¶ä¸­ä»äºŒåå‡ å²æ¯•ä¸šåˆ°å…­åå¤šå²é€€ä¼‘ï¼ŒæœŸé—´æœ‰å››åå¹´æ—¶é—´ã€‚å¦‚æœæŠ±ç€æŠŠè¡Œä¸šå½“åšä¸€è¾ˆå­çš„å¿ƒæ€ï¼Œå°±è¯¥å‰äºŒåå¹´å­¦ç»éªŒï¼ŒåäºŒåå¹´æ‰èƒ½æœ‰ç»éªŒå¯ä»¥ç”¨ã€‚â€</p>
<p>å½“ç„¶ï¼Œæ²¡æœ‰ä»»ä½•ä¸€ä¸ªäººæ•¢è¯´è‡ªå·±çš„æŠ€èƒ½èƒ½å¤Ÿé€šåƒä¸€è¾ˆå­ï¼Œä¹Ÿä¸å¯èƒ½æ¯ä¸ªäººéƒ½ä¼šåœ¨ä¸€ä¸ªå…¬å¸ã€ä¸€ä»½å·¥ä½œä¸Šå¹²ä¸€è¾ˆå­ï¼Œå˜åŒ–æ‰æ˜¯äººç”Ÿçš„å¸¸æ€ã€‚é€‚åº”å˜åŒ–å’Œä¸»åŠ¨å­¦ä¹ ï¼Œæ­£æ˜¯äººçš„åŸºæœ¬èƒ½åŠ›ã€‚å°¤å…¶æ˜¯ç¨‹åºå‘˜ï¼Œæœ‰è®¸å¤šç¨‹åºå‘˜èƒ½å¤ŸèŠ±åå¹´èµšåˆ°äºŒåå¹´æ‰èƒ½èµšåˆ°çš„é’±ï¼Œä½†æ˜¯ä¹‹åå‘¢ï¼Ÿå¹´çºªè½»è½»ä¸‰åå²å°±å…»è€å—ï¼Ÿ</p>
<p>å­¦ä¹ è¿™æ¡è·¯ï¼Œå…¶å®æ ¹æœ¬æ²¡æœ‰ç»ˆç‚¹ã€‚</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://techq.xyz/2020/04/17/éšç¬”/é‚£ä¸ªç¨‹åºå‘˜ï¼Œä¸ºä»€ä¹ˆé€‰æ‹©æ”¹è¡Œ_/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="æºªæº">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="xiyuanæŠ€æœ¯åœˆ">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2020/04/17/éšç¬”/é‚£ä¸ªç¨‹åºå‘˜ï¼Œä¸ºä»€ä¹ˆé€‰æ‹©æ”¹è¡Œ_/" class="post-title-link" itemprop="url">é‚£ä¸ªç¨‹åºå‘˜ï¼Œä¸ºä»€ä¹ˆé€‰æ‹©æ”¹è¡Œ_</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2020-04-17 22:28:00" itemprop="dateCreated datePublished" datetime="2020-04-17T22:28:00+00:00">2020-04-17</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2021-04-25 11:04:00" itemprop="dateModified" datetime="2021-04-25T11:04:00+00:00">2021-04-25</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/éšç¬”/" itemprop="url" rel="index"><span itemprop="name">éšç¬”</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="ä¸€"><a href="#ä¸€" class="headerlink" title="ä¸€"></a>ä¸€</h1><p>æœ‰ä¸€å¤©ï¼Œä¸€ä½åŒäº‹è·Ÿæˆ‘è¯´ï¼šè€wå·²ç»æ”¹è¡Œåšç¾ç¼å»äº†ï¼Œä½ æ€ä¹ˆçœ‹ï¼Ÿ</p>
<p>æˆ‘æƒ³äº†æƒ³ï¼Œè¯´ï¼šä»–å¤§æ¦‚ç»ˆäºåšå‡ºäº†çœ¼ä¸‹æœ€ç¬¦åˆä»–çš„é€‰æ‹©ã€‚</p>
<h1 id="äºŒ"><a href="#äºŒ" class="headerlink" title="äºŒ"></a>äºŒ</h1><p>è€wæ˜¯æˆ‘æ›¾ç»ä¸€ä½åŒäº‹ã€‚</p>
<p>è¿˜è®°å¾—2014å¹´é¢è¯•çš„æ—¶å€™ç¬¬ä¸€æ¬¡é‡åˆ°ä»–ï¼Œå½“æ—¶çš„ä»–ç²¾åŠ›æ—ºç››ï¼Œå……æ»¡å¹²åŠ²ã€‚å¤§æ¦‚æ˜¯å› ä¸ºä»–ä¸Šä¸€æ®µèŒåœºä¸­è·å¾—äº†ä»–è®¤ä¸ºéå¸¸å……è¶³çš„æ”¶è·ï¼Œæ‰€ä»¥æ‰¾å·¥ä½œçš„æ—¶å€™ï¼Œå¿ƒæ€ä¹Ÿéå¸¸ç§¯æä¹è§‚ï¼Œè¿™ä¹Ÿè®©é¢è¯•çš„è¿‡ç¨‹å¾ˆè½»æ¾æ„‰æ‚¦ï¼ŒæŠ€æœ¯é—®é¢˜ä¸€é—®ä¸€ä¸ªå‡†ã€‚</p>
<p>è¿™åº”è¯¥æ˜¯ä¸€ä¸ªèƒ½å¤Ÿä¸ºå…¬å¸åˆ›é€ ä»·å€¼çš„ä¼˜ç§€å¼€å‘è€…å§ï¼å½“æ—¶ï¼Œæˆ‘è¿™æ ·æƒ³ï¼Œäºæ˜¯æ¯«ä¸çŠ¹è±«çš„å‘ŠçŸ¥é¢†å¯¼ï¼Œè®©é¢†å¯¼æŠŠè€wç•™ä¸‹æ¥ã€‚</p>
<p>è¢«å…¬å¸æ‹›è¿›æ¥ä¹‹åï¼Œä»–ä¹Ÿè¡¨ç°å‡ºä»–çš„è¶³å¤Ÿä¸“ä¸šï¼Œä½¿å¾—ä»–èƒ½å¤Ÿåœ¨è¿™æ®µå·¥ä½œä¸­å¹³æ»‘å‘å±•ï¼Œè·å¾—è®©å¤§å®¶æ»¡æ„çš„è¯„ä»·ã€‚</p>
<p>å¦‚æœæ²¡æœ‰å…¶ä»–æ„å¤–ï¼Œå¤§æ¦‚ä»–å°†ä»è¿™é‡Œèµ·æ­¥ï¼Œåœ¨æ˜ŸåŸé•¿æ²™å¥½å¥½å‘å±•ï¼Œç›´åˆ°æœ‰ä¸€å¤©ä¸å†é€‚åˆITä¸ºæ­¢ã€‚ï¼ˆè€Œé‚£ä¸€å¤©ï¼Œä¹Ÿè®¸å¾—42å²ä¹‹åå§ï¼‰ã€‚</p>
<p>åæ¥ï¼Œæˆ‘ä»è¿™å®¶å…¬å¸ç¦»å¼€è‹¥å¹²å¹´åï¼Œä¸ä»–åœ¨ä¸€å®¶åˆåˆ›å…¬å¸ç›¸èšã€‚</p>
<h1 id="ä¸‰"><a href="#ä¸‰" class="headerlink" title="ä¸‰"></a>ä¸‰</h1><p>è€wæ¥åˆ°è¿™é‡Œæœ‰ä¸å°‘åŸå› ã€‚é¦–å…ˆåŸå…¬å¸é¡¹ç›®å›æ¬¾é™·å…¥åƒµæŒçŠ¶æ€ï¼Œç®¡ç†å±‚å’Œè‘£äº‹ä¼šå‡ºç°äº†é‡å¤§åˆ†æ­§ï¼Œè‘£äº‹ä¼šå·²ç»æ— æ„äºç»´æŒå…¬å¸çš„è¿›ä¸€æ­¥å‘å±•ï¼Œè¿›è€Œå¯¼è‡´äº†ä¸¥é‡çš„ç»æµé—®é¢˜ï¼Œé‚£å‡ ä¸ªæœˆå‘˜å·¥çš„å·¥èµ„å’Œå…¬ç§¯é‡‘å·²ç»æ— æ³•æŒ‰æ—¶é—´ç¼´çº³ã€‚è€Œè€wæœ¬èº«ä¹Ÿè‡ªæˆ‘æ„Ÿè§‰æŠ€æœ¯åˆ°äº†ç“¶é¢ˆï¼Œæ‰“ç®—æ¢ä¸€ä¸ªå²—ä½æ¥æå‡è‡ªå·±ï¼Œä½†æ˜¯åŸå…¬å¸çš„å‘å±•å›°å¢ƒæ˜¾ç„¶æ— æ³•ç»™ä»–åˆ›é€ é€‚å½“çš„æœºä¼šã€‚</p>
<p>äºæ˜¯å½“æœ‰äººæŒ–ä»–æ—¶ï¼Œä»–é¡ºåŠ¿å°±æŠŠå·¥ä½œè¾äº†ï¼Œæ¥åˆ°äº†è¿™å®¶æ–°æˆç«‹çš„å…¬å¸ã€‚</p>
<p>è€æ¿å¾ˆæ…·æ…¨ï¼Œçœ‹åˆ°ä»–æ˜¯ä¸€ä½ç»éªŒä¸°å¯Œçš„å¼€å‘è€…ï¼Œå¹¶æ²¡æœ‰ç»™ä»–å®‰æ’è¯•ç”¨æœŸï¼Œè€Œæ˜¯å…¥èŒå°±ç›´æ¥æˆä¸ºæ­£å¼å‘˜å·¥ã€‚åŠ å…¥å…¬å¸çš„å‰å‡ ä¸ªæœˆæœ‰ç‚¹åƒèœœæœˆæœŸï¼Œä»–å’Œéƒ¨é—¨ç»ç†ä¹‹é—´ç»å¸¸å¯¹æŠ€æœ¯è¿›è¡Œæ¢è®¨ã€‚ç”±äºéƒ¨é—¨ç»ç†ä¸»è¦ä»äº‹åµŒå…¥å¼ç³»ç»Ÿå¼€å‘ï¼Œå¯¹äº’è”ç½‘æŠ€æœ¯å‡ ä¹ä¸æ‡‚ï¼Œè€wåˆ™ä¹Ÿç®—æ˜¯ä»ä¸šè€å…µï¼Œè™½ç„¶åŸºç¡€ä¸æ‰å®ï¼Œä½†è¿˜èƒ½å‹‰å¼ºåº”ä»˜éƒ¨é—¨ç»ç†çš„é—®é¢˜ï¼Œæ‰€ä»¥åŒæ–¹çš„æ²Ÿé€šæ¯”è¾ƒèæ´½ã€‚</p>
<p>ä»–ä»¬éƒ¨é—¨çš„äº§å“ä¹Ÿä¸»è¦æ˜¯åç‰©è”ç½‘çš„æ™ºæ…§ç›‘æµ‹ç®¡ç†å¹³å°ï¼Œéœ€è¦è¿ç”¨åµŒå…¥å¼æŠ€æœ¯å¼€å‘è®¾å¤‡ä¸Šçš„ç»„ä»¶ï¼Œå¹¶é€šè¿‡Webå¹³å°æ¥å±•ç¤ºæ•°æ®çš„çŠ¶æ€ä¿¡æ¯ã€‚è€Œè€Wä¹‹å‰å¹¶ä¸äº†è§£ç‰©è”ç½‘ç›¸å…³é¢†åŸŸï¼Œä½†åœ¨Webå¼€å‘é¢†åŸŸè¿˜æ˜¯æœ‰ä¸€ç‚¹ç‚¹ç§¯ç´¯ï¼Œèƒ½å¤Ÿå‹‰å¼ºæŠŠè‡ªå·±æ‰‹å¤´ä¸Šçš„ä»»åŠ¡å®Œæˆå¦¥å½“ã€‚</p>
<p>ç„¶è€Œï¼Œåœ¨åˆåˆ›å…¬å¸åšäº§å“å¹¶éåªæ˜¯å¹²å¥½é‚£ä¸€äº©ä¸‰åˆ†åœ°å°±å¤Ÿäº†ã€‚ä»–å’Œå¤§éƒ¨åˆ†æ‹¥æœ‰ä¸€å®šç»éªŒçš„æ‰€è°“é«˜çº§å¼€å‘è€…ä¸€æ ·ï¼Œæ€»æ˜¯è§‰å¾—å¹²å¥½æŠ€æœ¯å°±æ˜¯è‡ªå·±çš„æœ¬ä»½ï¼Œå¯¹ä¸šåŠ¡çŸ¥è¯†ä¸å¤ªåœ¨ä¹ã€‚è€Œç‰©è”ç½‘è¡Œä¸šéœ€è¦å¤ªå¤šçš„è¡Œä¸šåŸºç¡€ï¼Œå¦‚æœä¸èƒ½æ·±å…¥è¡Œä¸šï¼Œå‡ ä¹å¾ˆéš¾åšå‡ºæˆç†Ÿçš„äº§å“ã€‚</p>
<p>éšç€é¡¹ç›®çš„é€æ¸æ·±å…¥ï¼Œä¹Ÿå®Œç¾æš´éœ²å‡ºè€wçš„æŠ€æœ¯çŸ­æ¿ã€‚ä»–å·²ç»å·¥ä½œäº†å…­ä¸ƒå¹´ï¼Œä½†æ˜¯å¹³æ—¶ä¸»è¦è´Ÿè´£å¢åˆ æ”¹æŸ¥ï¼Œå¯¹å‰ç«¯é¡µé¢å’Œæ¡†æ¶åº•å±‚å‡ ä¹å¾ˆå°‘æ¶‰åŠï¼Œä»–æœ¬èº«ç¼ºä¹ä¸»åŠ¨å­¦ä¹ çš„ç§¯ææ€§å’Œåˆ›é€ æ€§ï¼Œå¯¹æ–°æŠ€æœ¯å’Œå‰ç«¯æŠ€æœ¯ç¼ºä¹å…´è¶£å’Œæ•æ„Ÿåº¦ï¼Œç”šè‡³è¿æœç´¢æŸ¥æ‰¾é—®é¢˜çš„èƒ½åŠ›ä¹Ÿå¾ˆæ¬ ç¼ºï¼Œè¿™ä½¿å¾—ä»–å¾—èŠ±è®¸å¤šç²¾åŠ›æ¥å­¦ä¹ æ¡†æ¶çŸ¥è¯†ï¼Œå¹¶é—´æ¥å¯¼è‡´é¡¹ç›®é€Ÿåº¦è¿›å±•ç¼“æ…¢ã€‚</p>
<p>åŸæœ¬è®¡åˆ’ä¸‰ä¸ªæœˆåšä¸€ä¸ªå°äº§å“ï¼Œä½†ç”±äºç§ç§åŸå› ï¼Œä»¥åŠåæ¥çš„è¿­ä»£ï¼Œç¡¬ç”Ÿç”Ÿäº”å…­ä¸ªæœˆæ‰å®Œæˆã€‚åœ¨äº§å“ç»ˆäºåšå®Œå¼€å§‹æ­£å¼è¿è¡Œä¹‹åï¼Œç”±äºåå°ä»£ç å­˜åœ¨çš„ç¼ºé™·æ¯”è¾ƒå¤šï¼Œéƒ¨é—¨ç»ç†å¯¹ä»–å¤§ä¸ºå¤±æœ›ã€‚äºæ˜¯è¢«è°ƒåˆ°å…¶ä»–éƒ¨é—¨å½“ç ”å‘å·¥ç¨‹å¸ˆï¼Œä½†åœ¨æ–°çš„å·¥ä½œå²—ä½ä¸Šï¼Œä»–å¾ˆå¿«å°±æš´éœ²å‡ºè‡ªå·±æ— æ³•èƒœä»»ç›¸å…³å²—ä½çš„èƒ½åŠ›ï¼Œåˆå›åˆ°äº†åŸéƒ¨é—¨ã€‚</p>
<p>åŸéƒ¨é—¨å·²ç»æ²¡æœ‰ä»–çš„å·¥ä½œå®‰æ’äº†ï¼Œä»æ­¤ä»–é™·å…¥äº†é•¿è¾¾ä¸€ä¸ªå¤šæœˆçš„æ¸…é—²æœŸã€‚è¿™æ®µæ—¶é—´ï¼Œä»–ä¹Ÿæ²¡å»æ‰¾å·¥ä½œï¼Œæ¯å¤©æœä¹æ™šäº”ï¼Œä¸Šä¸Šç½‘ï¼Œçœ‹çœ‹ç”µå½±ï¼Œç”±äºä»–æœ¬èº«å°±å¯¹æŠ€æœ¯å…´è¶£ä¸è¶³ï¼Œè‡ªç„¶è€Œç„¶ä¹Ÿä¸ä¼šè¸è¸å®å®è¡¥è¶³çŸ­æ¿ï¼Œäºæ˜¯å®‰å®‰ç¨³ç¨³çš„åœ¨å…¬å¸æ··äº†å¥½å‡ ä¸ªæœˆã€‚</p>
<p>2018å¹´è¿‡å®Œå¹´ï¼Œå°±ä»å…¬å¸ç¦»å¼€ã€‚ä¹‹åå¬è¯´ä»–å‰å‰ååæ‰¾äº†å¥½å‡ è½®å·¥ä½œï¼Œä½†éƒ½æ²¡èƒ½å¥½å¥½çš„å¹²ä¸‹å»ã€‚å¬è¯´ä»–æ›¾ç»ä¸€åº¦æ‰“ç®—é€‰æ‹©æˆä¸ºç‹¬ç«‹å¼€å‘è€…ï¼Œå´æ¥ä¸åˆ°ä»€ä¹ˆå¥½é¡¹ç›®ï¼Œæœ‰çš„é¡¹ç›®å®Œå…¨æ˜¯è´¹åŠ›ä¸è®¨å¥½ï¼Œä»˜å‡ºäº†è®¸å¤šåŠªåŠ›ï¼Œå´äº¤è´§æ—¶è¢«å®¢æˆ·æ‰“å›ã€‚</p>
<p>æ‰€ä»¥æœ€ç»ˆé€‰æ‹©æ”¹è¡Œä¹Ÿæ˜¯ä¸‡èˆ¬æ— å¥ˆã€‚</p>
<h1 id="å››"><a href="#å››" class="headerlink" title="å››"></a>å››</h1><p>è€wçš„èŒä¸šå‘å±•å†ç¨‹æ€»æ˜¯ä»¤æˆ‘æ‰¼è…•å¹æ¯ã€‚è™½ç„¶ç¨‹åºå‘˜è½¬è¡Œå¾ˆæ­£å¸¸ï¼Œä½†ä»–å¹´è½»æ—¶ä¹Ÿç®—æ˜¯ç²¾åŠ›å……æ²›ï¼Œå¯¹æŠ€æœ¯å……æ»¡æ¿€æƒ…ï¼Œå´ä¸ºä½•åˆšè¿‡è€Œç«‹ä¹‹å¹´å°±ä¸å¾—ä¸ç¦»å¼€è¡Œä¸šï¼Ÿè¦æƒ³ç»´æŒèŒåœºé•¿ä¹…çš„ç”Ÿå‘½åŠ›ï¼Œç©¶ç«Ÿè¯¥åšå“ªäº›åŠªåŠ›ï¼Ÿè¿™ä¸ªé—®é¢˜æƒ³å¿…å·²ç»æ·±æ·±çš„å›°æ‰°ç€è®¸å¤šäººã€‚</p>
<p>åœ¨æˆ‘ä»¬çš„èº«è¾¹ï¼Œæœ‰è®¸å¤šè¿™æ ·æˆ–é‚£æ ·çš„äººé€‰æ‹©ITè¡Œä¸šï¼Œé€‰æ‹©æˆä¸ºç¨‹åºå‘˜ã€‚ä¹Ÿè®¸å¤§å®¶é€‰æ‹©æˆä¸ºç¨‹åºå‘˜çš„ç†ç”±ä¸å°½ç›¸åŒï¼Œä½†æ˜¯å¤§å®¶çš„å­¦ä¹ æ›²çº¿æˆ–è®¸å´å¤§ä½“ç±»ä¼¼ã€‚è¿™ç§å­¦ä¹ æ›²çº¿ï¼Œå¤§æ¦‚æœ‰ç‚¹åƒâ€œè¾¾å…‹æ•ˆåº”â€æ›²çº¿ä¸€èˆ¬é­”å¹»çœŸå®ã€‚</p>
<p><img src="https://uploader.shimo.im/f/WXL0JugXKFISHNSP.png!thumbnail" alt="å›¾ç‰‡"></p>
<p>ï¼ˆè¾¾å…‹æ•ˆåº”ï¼‰</p>
<p>ç”¨æ¥æè¿°ä¸€ç§è®¤çŸ¥åå·®ã€‚å®ƒè¡¨æ˜ï¼Œèƒ½åŠ›å·®çš„äººæ€»æ˜¯æœ‰ä¸€ç§è™šå¹»çš„è‡ªæˆ‘ä¼˜è¶Šæ„Ÿï¼Œä»–ä»¬æ€»æ˜¯é”™è¯¯çš„ä»¥ä¸ºè‡ªå·±æ¯”çœŸå®çš„è‡ªå·±æ›´ä¼˜è¶Šã€‚</p>
<p>åœ¨è¿™ä¸ªæ•ˆåº”ä¸­ï¼Œå°†ä¸€ä¸ªäººæ±‚çŸ¥çš„é˜¶æ®µåˆ’åˆ†ä¸ºå››ä¸ªé˜¶æ®µï¼š</p>
<p>1ã€ä¸çŸ¥é“è‡ªå·±ä¸çŸ¥é“ã€‚</p>
<p>è¿™ä¸€é˜¶æ®µæ˜¯æˆ‘ä»¬åˆšåˆšåŠ å…¥èŒåœºçš„æ—¶å€™ï¼Œç”±äºçœ¼ç•Œå’Œè§è¯†çš„é™åˆ¶ï¼Œæˆ‘ä»¬å°†åœ¨è¾ƒçŸ­çš„æ—¶é—´å†…è·å¾—å®ŒæˆçŸ­æœŸå·¥ä½œæ‰€éœ€çš„éƒ¨åˆ†çŸ¥è¯†ã€‚è¿™äº›çŸ¥è¯†ä½¿å¾—æˆ‘ä»¬åœ¨çŸ­æœŸå†…è‡ªæˆ‘è†¨èƒ€ï¼Œç„¶åå¿ƒæ€å‘ç”Ÿæ”¹å˜ï¼Œæ¸æ¸çš„æˆä¸ºâ€œæ„šæ˜§å±±å³°â€ä¸Šçš„ä¸€å—é¡½å›ºä¹‹çŸ³ã€‚è¿‡æ—©çš„ç™»ä¸Šæ„šæ˜§ä¹‹å±±ï¼Œå¯¹æ¯ä¸ªå¼€å‘è€…æ¥è¯´éƒ½ä¸æ˜¯ä¸€ä»¶å¥½äº‹æƒ…ï¼Œè¿™æ„å‘³ç€ä½ æˆ–è€…ä½ ä»¬å…¬å¸æ‰€åœ¨è¡Œä¸šçš„å¤©èŠ±æ¿å¤ªä½ã€æˆ–è€…ä½ çš„è§è¯†å¤ªä½ï¼Œä½¿å¾—ä½ è¿‡äºè½»æ˜“çš„å°±æŒæ¡äº†é©¾é©­å½“å‰åº”ç”¨åœºæ™¯çš„çŸ¥è¯†ï¼Œå¦‚æœä¸åšå‡ºæ”¹å˜ï¼Œå°†ä¸ºæœªæ¥åŸ‹ä¸‹ç¥¸æ ¹ã€‚</p>
<p>2ã€çŸ¥é“è‡ªå·±ä¸çŸ¥é“ã€‚</p>
<p>æ–°æŠ€æœ¯çš„å‘å±•æ˜¯å¦‚æ­¤çš„çªé£çŒ›è¿›ï¼Œå½“ä½ è¿˜åœ¨ç¡å®‰ç¨³è§‰æ—¶ï¼Œæˆ–è®¸ä¸€ä¸å°å¿ƒå°±è¢«æ·˜æ±°äº†ã€‚è®¸å¤šâ€œé¡½å›ºä¹‹çŸ³â€å¯¹äºæ–°æŠ€æœ¯çš„å‡ºç°ï¼Œæ€»æ˜¯æŠ±æœ‰æˆè§ï¼Œç”šè‡³ä¼šä¹ æƒ¯äºç”¨è‡ªå·±çš„å›ºæœ‰æ€æƒ³æ¥æ€è€ƒé—®é¢˜ã€‚äºæ˜¯åœ¨å¸‚åœºé¢å‰ï¼Œä¸€æ—¦é‡åˆ°ä¸€æ³¢æœ‰ä¸€æ³¢çš„æŒ«æŠ˜ï¼Œå¹¶é™·å…¥ç»æœ›ä¹‹è°·ã€‚</p>
<p>3ã€çŸ¥é“è‡ªå·±çŸ¥é“</p>
<p>ç»æœ›ä¹‹è°·ï¼Œæˆ–ä½¿äººé€ƒç¦»ï¼Œæˆ–ä½¿äººæˆé•¿ã€‚</p>
<p>å‰é¢æ•…äº‹æåˆ°çš„è€wï¼Œå°±æ˜¯é€ƒç¦»çš„å…¸å‹ã€‚ç”±äºå…¶å›ºæœ‰ä¹ æƒ¯å’Œè§è¯†ï¼Œè®©ä»–é‡åˆ°æ–°æŠ€æœ¯ã€æ–°åº”ç”¨åœºæ™¯å¸¦æ¥çš„æŒ‘æˆ˜æ—¶ï¼Œæ€»æ˜¯é€‰æ‹©åƒæµ·é¾Ÿä¸€æ ·ï¼ŒæŠŠè‡ªå·±æ·±è—åœ¨ä¸€ä¸ªâ€œå£³â€ä¸­ï¼Œå¹¶ä¸”ç”šè‡³é€ƒé¿é—®é¢˜ï¼Œæœ€ç»ˆåªèƒ½åœ¨ä¸€æ³¢æœ‰ä¸€æ³¢çš„æŒ«æŠ˜é¢å‰ï¼Œé€‰æ‹©ç¦»å¼€è¡Œä¸šã€‚</p>
<p>è¿˜æœ‰ä¸€äº›äººï¼Œä»–ä»¬ä¼šä»¥è¿‡å»çš„æŒ«æŠ˜ä¸ºè·³æ¿ï¼Œç„¶åä¸æ–­çš„å­¦ä¹ ï¼Œè¿›å…¥â€œå¼€æ‚Ÿä¹‹è°·â€ã€‚è¿™ä¸ªé˜¶æ®µæ‰æ˜¯æ™ºæ…§å½¢æˆçš„é˜¶æ®µï¼Œè¿™æ„å‘³ç€ä½ è¿‡å»çš„ä»ä¸šç»éªŒå’ŒçŸ¥è¯†å°†æˆä¸ºä½ æˆé•¿çš„å®è´µè´¢å¯Œã€‚</p>
<p>4ã€ä¸çŸ¥é“è‡ªå·±çŸ¥é“ã€‚</p>
<p>å¦‚æœå§‹ç»ˆä¿æŒç§¯æä¹è§‚å’Œç©ºæ¯çš„å¿ƒæ€ï¼Œä½ æŒæ¡çš„çŸ¥è¯†ä¹Ÿå°†è¶Šæ¥è¶Šå¤šï¼Œä½ æ‰€æ•£å‘å‡ºçš„çŸ¥è¯†çš„é¦¥éƒï¼Œä¹Ÿå°†ä¿ƒä½¿ä½ èƒ½å¤Ÿæˆä¸ºèº«è¾¹äººå­¦ä¹ çš„æ¦œæ ·ï¼Œå¹¶å°†ä¿ƒä½¿ä½ æˆä¸ºçœŸæ­£çš„â€œå¤§å¸ˆâ€ã€‚</p>
<h1 id="äº”"><a href="#äº”" class="headerlink" title="äº”"></a>äº”</h1><p>åœ¨æˆ‘ä»¬çš„èº«è¾¹ï¼Œè¢«ç±»ä¼¼â€œè¾¾å…‹æ•ˆåº”â€å›°æ‰°çš„ç°è±¡å…¶å®æ— å¤„ä¸åœ¨ã€‚æ‹¿ç¬”è€…ä¸ºä¾‹ï¼Œæ›¾ç»æœ‰ä¸€æ®µæ—¶é—´ï¼Œæˆ‘ç»å¸¸å†™åšå®¢ï¼Œè¿˜ä»¥ä¸ºè‡ªå·±çš„åšå®¢å†™å¾—æŒºæœ‰æ–‡é‡‡çš„ã€‚åæ¥è¯»äº†è®¸å¤šä¹¦ï¼Œå‘ç°è‡ªå·±ç®€ç›´å°±æ˜¯å¯ä»¥ç§°ä¸ºâ€œæ— çŸ¥â€ï¼Œäºæ˜¯èŠ±äº†æ›´å¤šçš„æ—¶é—´æ¥æé«˜è‡ªå·±ã€‚</p>
<p>ä½œä¸ºå¼€å‘è€…ä¹Ÿè®¸éƒ½å°†å¦‚æ­¤ï¼Œä½ æ‰€çŸ¥é“çš„è¶Šå¤šï¼Œå…¶å®æ„å‘³ç€ä¸çŸ¥é“çš„è¶Šå¤šã€‚æ¯ä¸€æ¬¡ä½ ä»¥ä¸ºå¤§å½»å¤§æ‚Ÿï¼Œä»¥ä¸ºé“ç†ä¸è¿‡å¦‚æ­¤ï¼Œä½†æ˜¯å¾€å¾€éšç€ä½ å­¦ä¹ çš„è¿›ä¸€æ­¥æ·±å…¥ï¼Œåªä¼šä½¿ä½ æ›´åŠ æ¸…æ¥šè‡ªå·±çš„æ„šæ˜§ã€‚</p>
<p>ä¸€æ¬¡åˆä¸€æ¬¡æ¢ç´¢ä¸­ï¼Œä¸æ–­çš„å‘ç°è‡ªå·±çš„æ— çŸ¥ï¼Œçœ‹ä¼¼åœ¨æµªè´¹æ—¶é—´ï¼Œå…¶å®æ˜¯åœ¨ä¸æ–­çš„æ‰æ ¹ã€‚äººç”Ÿçš„æ¯ä¸€æ¬¡æˆé•¿ï¼Œä»ä¸æ˜¯ä¸€è¹´è€Œå°±ï¼Œè€Œæ˜¯åƒæ”€ç™»é«˜å³°ä¸€èˆ¬ï¼Œä¸€æ­¥ä¸€æ­¥è„šå°ï¼Œæ¯ä¸€æ­¥éƒ½å¾—è¸è¸å®å®ã€‚</p>
<p>ä½ ä»Šå¤©çš„ç§¯ç´¯ï¼Œæ—¢æ˜¯ä½ è¿‡å»çš„æ²‰æ·€ï¼Œæ›´æ˜¯é€‚åº”æœªæ¥å˜åŒ–çš„è¸è„šçŸ³ã€‚</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://techq.xyz/2020/04/10/éšç¬”/how-to-find-millon-in-changsha-programmer/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="æºªæº">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="xiyuanæŠ€æœ¯åœˆ">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2020/04/10/éšç¬”/how-to-find-millon-in-changsha-programmer/" class="post-title-link" itemprop="url">é•¿æ²™ITæŠ€æœ¯åœˆçš„ç™¾ä¸‡å¤§ä½¬ï¼Œä½•å¤„å¯»è§…ï¼Ÿ</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2020-04-10 09:10:00" itemprop="dateCreated datePublished" datetime="2020-04-10T09:10:00+00:00">2020-04-10</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2021-04-25 11:04:00" itemprop="dateModified" datetime="2021-04-25T11:04:00+00:00">2021-04-25</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/éšç¬”/" itemprop="url" rel="index"><span itemprop="name">éšç¬”</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="å¼•å­"><a href="#å¼•å­" class="headerlink" title="å¼•å­"></a>å¼•å­</h1><p>ä¸çŸ¥ä¸è§‰ï¼ŒITæŠ€æœ¯åœˆå¼€å§‹æµä¼ èµ·â€œç™¾ä¸‡å¹´è–ªâ€çš„æ•…äº‹ï¼Œæœ‰äººé—®æˆ‘ï¼Œé•¿æ²™æœ‰ç™¾ä¸‡å¤§ä½¬ä¹ˆï¼Ÿå…¶å®æˆ‘ä¹Ÿä¸çŸ¥é“ã€‚</p>
<h1 id="ä¸€-èƒŒæ™¯"><a href="#ä¸€-èƒŒæ™¯" class="headerlink" title="ä¸€  èƒŒæ™¯"></a>ä¸€  èƒŒæ™¯</h1><p>é•¿æ²™è‡ªå¤ä»¥æ¥å°±æ˜¯æ–‡é£é¼ç››ä¹‹åœ°ï¼Œåœ¨ä»Šå¤©ä¹ŸåŒæ ·å¦‚æ­¤ã€‚</p>
<p>ç›®å‰é•¿æ²™æœ‰211ã€985ã€ä¸€æœ¬ã€äºŒæœ¬ç­‰æœ¬ç§‘é™¢æ ¡æ•°åæ‰€ï¼Œå¤§ä¸“ä»¥ä¸Šçš„é™¢æ ¡ä¸Šç™¾æ‰€.æ¯å¹´ä»é•¿æ²™æ¯•ä¸šï¼Œæ€€æ£æ¢¦æƒ³é€‰æ‹©å»åŒ—ä¸Šå¹¿æ·±æ­å¥‹æ–—çš„äº’è”ç½‘ä»ä¸šäººå‘˜ä¸ä¸‹æ•°ä¸‡äººï¼Œå…¶ä¸­ä»äº‹æŠ€æœ¯å²—ä½çš„ï¼ˆä¾‹å¦‚å¼€å‘ã€æµ‹è¯•ã€è¿ç»´ç­‰ï¼‰æˆ–è®¸æ˜¯å æ¯”æœ€å¤§çš„éƒ¨åˆ†ã€‚</p>
<p>ä»æŸç§æ„ä¹‰ä¸Šæ¥è¯´ï¼Œæ¹–å—æŠ€æœ¯äººå¯èƒ½çœŸçš„æ’‘èµ·äº†å…¨å›½äº’è”ç½‘çš„åŠè¾¹å¤©ã€‚ï¼ˆå½“ç„¶ï¼Œè¿™æ ·çš„è¯´æ³•æ²¡æœ‰ç»Ÿè®¡æ•°æ®ä¸ºå‡†ï¼Œç¬”è€…è¯´äº†ä¸ç®—ï¼‰ã€‚</p>
<p>ä¸è¿‡ï¼Œä¸€ç›´ä»¥æ¥ï¼Œç”±äºæ²¿æµ·åœ°åŒºè½æˆ·æ”¿ç­–çš„ä¸¥æ ¼ã€è´­æˆ¿å’Œå±…å®¶ç”Ÿæ´»çš„æˆæœ¬é«˜ï¼Œä½¿å¾—è®¸å¤šç¦»å¼€æ¹–å—çš„å¼€å‘è€…è¶Šæ¥è¶Šå€¾å‘äºé€‰æ‹©å›åˆ°é•¿æ²™å¯»æ‰¾é€‚åˆè‡ªå·±çš„å·¥ä½œã€‚</p>
<p>ä»–ä»¬éƒ½èƒ½åœ¨é•¿æ²™æ‰¾åˆ°åˆé€‚çš„å·¥ä½œä¹ˆï¼Ÿä»–ä»¬èƒ½æˆä¸ºâ€œç™¾ä¸‡å¤§ä½¬â€ä¹ˆï¼Ÿ</p>
<h1 id="äºŒ-å‡ ä¸ªæ•…äº‹"><a href="#äºŒ-å‡ ä¸ªæ•…äº‹" class="headerlink" title="äºŒ å‡ ä¸ªæ•…äº‹"></a>äºŒ å‡ ä¸ªæ•…äº‹</h1><h2 id="1"><a href="#1" class="headerlink" title="1"></a>1</h2><p>è€Qæ˜¯æˆ‘çš„åŒå­¦ï¼Œå¤§å­¦æ¯•ä¸šåï¼Œæˆ‘å›äº†å®¶ä¹¡é•¿æ²™ï¼Œä»–åˆ™é€‰æ‹©å»æ·±åœ³å‘å±•ã€‚åœ¨æ¯•ä¸šå‰çš„ä¸€æ¬¡åƒé¥­è¿‡ç¨‹ä¸­ï¼Œä»–è¯´æ‰“ç®—å…ˆå»æ·±åœ³çœ‹çœ‹ï¼Œè¿‡å‡ å¹´åœ¨æ·±åœ³æ··ä¸ä¸‹å»äº†ï¼Œå†å›é•¿æ²™ã€‚</p>
<p>2015å¹´ä¸ŠåŠå¹´ï¼Œä»–çš„åŒå­¦é‚€è¯·ä»–åˆ›ä¸šï¼Œä»–æœæ–­çš„æŠŠåœ¨é…·æ´¾çš„å·¥ä½œè¾äº†ï¼Œå›åˆ°äº†é•¿æ²™ã€‚ä½†ç»è¿‡åŠå¹´çš„æŠ˜è…¾ï¼Œä»–çš„åˆ›ä¸šæ¢¦æƒ³æœ€ç»ˆè¿˜æ˜¯â€œé»„â€äº†ï¼Œåˆä¸´è¿‘å¹´å…‰ï¼Œä»–å†³å®šç•™åœ¨é•¿æ²™æ‰¾å·¥ä½œã€‚</p>
<p>ç”±äºä»–åœ¨é…·æ´¾å½“æ—¶ä¸»è¦ä»äº‹æ‰‹æœºåŸºç«™æµ‹è¯•çš„ç›¸å…³é¢†åŸŸå·¥ä½œï¼Œè€Œåœ¨é•¿æ²™å®é™…ä¸Šå‡ ä¹æ²¡æœ‰å¯¹åº”çš„å·¥ä½œï¼Œé™¤äº†è½¯ä»¶æµ‹è¯•ï¼Œå°±æ˜¯çº¯ç²¹çš„ç¡¬ä»¶æµ‹è¯•ã€‚è€Œç”±äºä»–å±äºè½¬è¡Œçš„æ€§è´¨ï¼Œæœ€ç»ˆå·¥èµ„..æ›´æ˜¯ç›¸å½“å¾®è–„ã€‚æœ€ç»ˆä»–è¿˜æ˜¯ç¦»å¼€äº†é•¿æ²™ï¼Œå›åˆ°äº†æ·±åœ³ã€‚</p>
<p>ä¸€æ™ƒåˆæ˜¯äº”å¹´ï¼Œå½“æˆ‘åœ¨è·Ÿä»–äº¤æµæ˜¯å¦æœ‰å…´è¶£å›é•¿æ²™æ—¶ï¼Œä»–ä¸€è„¸è‹¦æ¶©çš„è¯´ï¼Œå°±ç®—æƒ³å›ï¼Œä¼°è®¡ä¹Ÿä¸ä¼šåœ¨ä»äº‹ITç›¸å…³çš„è¡Œä¸šäº†ã€‚</p>
<p>â€œå½“æ—¶ä»¥ä¸ºæ··ä¸ä¸‹å»å°±å›é•¿æ²™ï¼Œå…¶å®é•¿æ²™åè€Œæ¯”åŒ—ä¸Šå¹¿æ·±æ›´éš¾æ··ä¸‹å»ã€‚â€</p>
<h2 id="2"><a href="#2" class="headerlink" title="2"></a>2</h2><p>è€Læ˜¯2014å¹´å‰åå›çš„é•¿æ²™ã€‚</p>
<p>è€Lä¹‹å‰åœ¨å¹¿å·ï¼Œé‚£æ˜¯ä¸€å®¶è¿˜ä¸é”™çš„ä¸Šå¸‚å…¬å¸ï¼Œä»–åœ¨è¿™å®¶å…¬å¸ä¹Ÿç®—æ˜¯ä¸­å±‚ç®¡ç†è€…ï¼Œä½†è€ƒè™‘åˆ°åœ¨å¹¿å·ä¹°æˆ¿ä¸å¤ªç°å®ï¼Œè€Œä¸”é•¿æœŸç¦»ä¹¡èƒŒäº•çš„å·¥ä½œï¼Œä¹Ÿè®©ä»–å¯¹å®¶ä¹¡äº§ç”Ÿäº†æ·±æ·±çš„çœ·æ‹ä¹‹æƒ…ï¼Œå†åŠ ä¸Šä»–çš„å¯¹è±¡ä¹Ÿå¸Œæœ›ä»–å›é•¿æ²™å‘å±•ï¼Œæœ€ç»ˆä»–æŠ›å¼ƒäº†é‚£ä»½æœˆæ”¶å…¥ç ´2wçš„å·¥ä½œï¼Œå›åˆ°äº†é•¿æ²™ã€‚</p>
<p>å›åˆ°é•¿æ²™æ‰¾å·¥ä½œä¹‹å‰ï¼Œä»–æ‰¾åŒå­¦æ‰“å¬äº†é•¿æ²™å½“æ—¶çš„å¼€å‘è€…å·¥èµ„æ°´å¹³ï¼Œä»–çš„åŒå­¦å‘Šè¯‰ä»–ï¼Œåƒè¿™æ ·ä¸ƒå…«å¹´ç»éªŒçš„.NETå¼€å‘è€…ï¼Œå¤§æ¦‚é¡¶å°–æ°´å¹³åº”è¯¥æ˜¯ä¸‡æŠŠå—é’±ã€‚</p>
<p>è€Læ˜¯ä¸€ä½åŠ¡å®çš„å¼€å‘è€…ï¼Œä»–æƒ³åˆ°è‡ªå·±åœ¨å¹¿å·é‚£å®¶å…¬å¸ï¼Œå®é™…ä¸Šæ¯å¤©æŠ•å…¥åˆ°è½¯ä»¶å¼€å‘å·¥ä½œä¸­çš„æ—¶é—´ï¼Œå…¶å®åªæœ‰ä¸åˆ°3ä¸ªå°æ—¶ï¼Œè¦ä¸ä¸“ä¸šä»äº‹æŠ€æœ¯å¼€å‘ã€å¤©å¤©æµ¸æ·«å…¶é“çš„é«˜æ‰‹ç›¸æ¯”ï¼Œè¿˜å­˜åœ¨å·¨å¤§çš„å·®è·ã€‚</p>
<p>æ—¢ç„¶é¡¶å°–æ°´å¹³æ‰ä¸€ä¸‡ï¼Œé‚£è‡ªå·±æ˜¾ç„¶åªèƒ½é¡¶åˆ«äººçš„å…­æˆï¼Œå¼€å…­åƒè‚¯å®šæ²¡é—®é¢˜ã€‚</p>
<p>ç»“æœé¢è¯•æ—¶ï¼Œå…¬å¸ç»™ä»–å¼€äº†8kï¼Œé¡¿æ—¶ä»–å°±å¾ˆæ¬£å–œã€‚</p>
<p>è™½ç„¶ä»–åæ¥åˆç¦»å¼€äº†è¿™å®¶å…¬å¸ï¼Œä½†ä»–è¿˜æ˜¯ç»™äºˆäº†è¿™å®¶å…¬å¸å¾ˆé«˜çš„è¯„ä»·ï¼šè¿™å……åˆ†è¯æ˜ï¼Œå…¶å®é•¿æ²™çš„å…¬å¸éå¸¸è¯†è´§ã€‚</p>
<h2 id="3"><a href="#3" class="headerlink" title="3"></a>3</h2><p>è€Cä¹Ÿæ˜¯å·®ä¸å¤šåŒæœŸå›çš„é•¿æ²™ï¼Œå½“æ—¶ä»–å·²ç»æ˜¯ä¸€å®¶å¤§å‹äº’è”ç½‘å…¬å¸çš„ä¸­å±‚ç®¡ç†è€…ã€‚</p>
<p>ï¼ˆè¿™å®¶å…¬å¸åœ¨ä»–ç¦»å¼€ä¹‹åï¼Œè¿æ¥äº†ä¸€æ³¢é£é€Ÿå‘å±•ï¼Œå¼•å…¥äº†å¥½å‡ åä¸ªåä¸ºæ¯•ä¸šçš„å‘˜å·¥åï¼Œä½¿å¾—å…¬å¸çš„æ•´ä½“æŠ€æœ¯æ°´å¹³å’Œèƒ½åŠ›éƒ½æœ‰äº†å·¨å¤§çš„é£è·ƒï¼Œåœ¨2017å¹´å‰åæˆåŠŸä¸Šå¸‚ï¼Œä¹‹å‰è·Ÿä»–åŒæœŸåŠ å…¥å…¬å¸çš„åŒäº‹ã€ä»¥åŠä»–åœ¨å…¬å¸æ—¶æ‹›è˜çš„äººæ‰ï¼Œå‡ ä¹éƒ½æˆä¸ºå…¬å¸çš„æ ¸å¿ƒéª¨å¹²æˆ–ç”šè‡³æ˜¯äº‹ä¸šéƒ¨ã€åˆ†å…¬å¸æ€»ç»ç†ã€‚ï¼‰</p>
<p>è€Cå›åˆ°é•¿æ²™çš„åŸå› ï¼Œæ˜¯å› ä¸ºä»–å­˜å¤Ÿäº†èƒ½å¤Ÿåœ¨æ·±åœ³ä»˜é¦–ä»˜æ¬¾çš„é’±ï¼Œä»–çš„å®¶äººå´ç¡¬æ˜¯è¯´æœä»–æ‹¿è¿™ä¸ªé’±åœ¨é•¿æ²™ä¹°æˆ¿ã€‚</p>
<p>å½“ç„¶ï¼ŒåŒæ ·çš„é’±ï¼Œåœ¨æ·±åœ³åªèƒ½ä¹°ååƒ»åŸä¹¡ç»“åˆéƒ¨çš„å°ä¸¤å±…ï¼Œè€Œå›é•¿æ²™åˆ™å¯ä»¥ä¹°ä¸­å¿ƒåœ°å¸¦ï¼Œåœ°é“å£ï¼Œå…¬å›­å£çš„120å¹³ä¸‰å®¤ä¸€å…ã€‚</p>
<p>ä»–æ‹¿ç€è¿™ä¸ªé’±ä¹‹åï¼Œå›æ¥çœ‹äº†ä¸€åœˆæˆ¿å­ï¼Œå‘ç°å±…ç„¶å¯ä»¥é€‰æ‹©çš„ä½™åœ°è¿™ä¹ˆå¤šï¼Œè€Œä¸”è¿˜è¿™ä¹ˆèˆ’æœçš„ï¼Œå½“æ—¶å°±å†³å®šå›é•¿æ²™å®šå±…ï¼Œä»–å¾ˆå¿«å°±æŠŠæ·±åœ³çš„å·¥ä½œè¾äº†ï¼Œç„¶åå›åˆ°äº†é•¿æ²™æ‰¾å·¥ä½œã€‚</p>
<p>å½“ä»–å›åˆ°é•¿æ²™æ‰¾å·¥ä½œä¹‹åï¼Œå¾—ç›Šäºä¸€ä¸ªæœºä¼šï¼Œæœ‰å¹¸æ‰¾åˆ°äº†ä¸€ä¸ªéå¸¸æœ‰é’±çš„è€æ¿ï¼Œè¿™ä½è€æ¿æ‹‰äº†ä¸€ä¸ªè§„æ¨¡è¿˜ç®—å¤§çš„å›¢é˜Ÿï¼Œä¹Ÿéå¸¸é‡è§†åƒä»–è¿™æ ·ä¼˜ç§€çš„ç®¡ç†è€…ï¼Œä»¥å¤§æ¦‚15kæˆ–æ›´é«˜çš„è–ªé…¬è˜ç”¨äº†ä»–ã€‚è¿™åœ¨å½“æ—¶çš„é•¿æ²™å·²ç»ç®—éå¸¸ä¸é”™çš„è–ªèµ„ï¼Œä½¿å¾—ä»–èƒ½å¤Ÿç»´æŒç›¸å¯¹é«˜çš„ç”Ÿæ´»æ¡ä»¶ã€‚</p>
<p>ä½†å…¬å¸çš„èµ„é‡‘å¾ˆå¿«å°±çƒ§å®Œäº†ï¼Œå…¬å¸è§£æ•£åï¼Œä»–è¢«è¿«å›åˆ°èŒåœºæ±‚èŒã€‚</p>
<p>ä»–çš„å¿ƒç†é¢„ç®—æ˜¯15kï¼Œä½†åœ¨é•¿æ²™èƒ½å¤Ÿå¼€å¾—èµ·15kçš„å…¬å¸å®åœ¨å¤ªå°‘ï¼Œè€Œä¸”è¿™äº›å…¬å¸å¯¹æŠ€æœ¯è¦æ±‚éå¸¸é«˜ï¼Œç”±äºä»–å¹³æ—¶å·¥ä½œä¸­å¯¹æŠ€æœ¯çš„æ·±åº¦é’»ç ”æœ‰é™ï¼Œæœ€ç»ˆéƒ½è¢«æ‹’ä¹‹é—¨å¤–ã€‚</p>
<p>è¿˜å¥½å¾—ç›Šäºä»–åœ¨HISé¢†åŸŸæ‰å®çš„è¡Œä¸šç»éªŒ+åŸå…¬å¸ä¸é”™çš„èƒŒæ™¯ï¼Œä½¿å¾—ä»–èƒ½å¤Ÿåœ¨ä¸€å®¶å…¬ç«‹åŒ»é™¢æ‰¾åˆ°è¿˜ç®—å¯ä»¥çš„å·¥ä½œã€‚</p>
<h2 id="4"><a href="#4" class="headerlink" title="4"></a>4</h2><p>å½“ç„¶ï¼Œå¹¶éæ‰€æœ‰çš„å¼€å‘è€…å›åˆ°é•¿æ²™éƒ½ä¼šé¢ä¸´å·¥èµ„ç ä¸€æˆªã€ç”šè‡³å‡åŠçš„æƒ…å†µï¼Œæˆ‘çš„èº«è¾¹ä¹Ÿä¸ä¹ä¸€äº›å¼€å‘è€…ï¼Œä»åŒ—ä¸Šå¹¿æ·±æ­å›åˆ°é•¿æ²™ä¹‹åï¼Œè¿˜èƒ½æ‰¾åˆ°ä¸åŸæ¥å…¬å¸å·¥èµ„å·®ä¸å¤šçš„å·¥ä½œã€ç”šè‡³è¿˜æœ‰çš„èƒ½æ‰¾åˆ°è¶…è¿‡åœ¨æ·±åœ³å·¥èµ„çš„å·¥ä½œã€‚</p>
<p>é‚£ç©¶ç«Ÿæ˜¯ä»€ä¹ˆåŸå› å†³å®šäº†é•¿æ²™å¼€å‘è€…çš„è–ªèµ„æ°´å¹³ï¼Œéš¾é“çœŸçš„æ˜¯é•¿æ²™çš„äº’è”ç½‘æ°´å¹³å‘å±•å¤ªä½äº†ä¹ˆï¼Ÿ</p>
<h1 id="ä¸‰-é•¿æ²™çš„å¼€å‘è€…å·¥èµ„æœ‰å¤šé«˜ï¼Ÿ"><a href="#ä¸‰-é•¿æ²™çš„å¼€å‘è€…å·¥èµ„æœ‰å¤šé«˜ï¼Ÿ" class="headerlink" title="ä¸‰ é•¿æ²™çš„å¼€å‘è€…å·¥èµ„æœ‰å¤šé«˜ï¼Ÿ"></a>ä¸‰ é•¿æ²™çš„å¼€å‘è€…å·¥èµ„æœ‰å¤šé«˜ï¼Ÿ</h1><h2 id="1-1"><a href="#1-1" class="headerlink" title="1"></a>1</h2><p>åœ¨é•¿æ²™æœ‰å“ªäº›å…¬å¸çš„å·¥èµ„æœ€é«˜ï¼Ÿ</p>
<p>é¦–å…ˆè¿˜æ˜¯å¾—æ’é™¤BATå…¬å¸å’Œå¤§å‹äº’è”ç½‘å…¬å¸ä¹Ÿå¼€å§‹åœ¨é•¿æ²™æˆç«‹ç›¸åº”çš„åˆ†æ”¯æœºæ„æˆ–åˆ†å…¬å¸ã€å­å…¬å¸ã€‚è¿™äº›å…¬å¸åœ¨é•¿æ²™ä¹Ÿå¥½ã€æ·±åœ³ä¹Ÿå¥½ï¼Œå…¶å®å·¥èµ„æ˜¯æŒ‰ç…§èŒçº§æ¥ï¼Œä¸åŸå¸‚å…³ç³»ä¸å¤§ã€‚æˆ‘çš„ä¸€ä½å ‚å”åœ¨æ’å¤§é›†å›¢ï¼ˆè™½ç„¶è¿œç¦»ITåœˆå­ï¼‰ï¼Œä½†ä»–çš„å·¥èµ„è¿˜ä¸é”™ï¼Œæ®è¯´åœ¨é•¿æ²™ä¸€å¹´çš„æ”¶å…¥å¯ä»¥ä¹°ä¸€å¥—æˆ¿ã€‚ã€‚æ‰€ä»¥ã€‚ã€‚ä½ æ‡‚çš„ï¼Œå¦‚æœä½ æƒ³å›é•¿æ²™ï¼Œæœ€å¥½çš„åŠæ³•å°±æ˜¯é€‰æ‹©åŠ å…¥BATï¼Œç„¶åå…¬æ´¾å›è€å®¶å‘å±•ï¼Œå¤§æ¦‚è¿™æ‰æ˜¯çœŸæ­£çš„â€œè¡£é”¦è¿˜ä¹¡â€ã€‚</p>
<p>å…¶æ¬¡é¦–å±ˆä¸€æŒ‡çš„å¤§æ¦‚æ˜¯èŠ’æœTVã€‚æ®æ‚‰..èŠ’æœTVçš„å‰å°ï¼Œæ¯ä¸ªæœˆè™½ç„¶å·¥èµ„ä¸é«˜ï¼Œæ‰8kï¼Œä½†æ¯å¹´èƒ½æ‹¿åˆ°æ‰‹çš„å¹´ç»ˆå¥–ä¹Ÿè¶…è¿‡äº†16ä¸‡ã€‚ã€‚è€Œæ™®é€šå¼€å‘è€…ï¼Œä¸€èˆ¬æ¯å¹´èƒ½å¤Ÿæ‹¿åˆ°æ‰‹çš„æ”¶å…¥æ˜¯20wä»¥ä¸Šã€‚</p>
<p>ç¨å¾®ç‰›é€¼ä¸€ç‚¹çš„å¼€å‘è€…ï¼Œå…¶å®å·¥èµ„å¹¶ä¸äºšäºåŒ—ä¸Šå¹¿æ·±çš„åŒç±»å‹å…¬å¸ã€‚</p>
<p>å…³é”®æ˜¯èŠ’æœTVæœä¹æ™šäº”ï¼Œä¸ç”¨åŠ ç­ï¼Œå·¥èµ„è¿˜æŒºè½»æ¾ï¼Œè€Œä¸”å…¬å¸è¿˜æŒºä¸é”™ï¼Œè¯´å‡ºå»æŒºæœ‰è‡ªè±ªæ„Ÿã€‚</p>
<p>æˆ‘ä¸€ä½å¤§å­¦åŒå­¦è¡¨ç¤ºï¼Œä»–è€å…¬æ›¾ç»åœ¨çˆ±å¥‡è‰ºæ‹…ä»»è¿ç»´å·¥ç¨‹å¸ˆï¼Œå›é•¿æ²™ä¹‹åå»äº†èŠ’æœTVï¼Œå·¥èµ„å’Œçˆ±å¥‡è‰ºé½å¹³ï¼Œå·¥ä½œå‹åŠ›å°‘äº†ä¸€åŠã€‚</p>
<p><img src="https://uploader.shimo.im/f/sjbRZaGv7hw4svjV.png!thumbnail" alt="å›¾ç‰‡"></p>
<h2 id="2-1"><a href="#2-1" class="headerlink" title="2"></a>2</h2><p>å…¶æ¬¡ï¼Œå¤§æ¦‚è¿™å¼ å›¾ä¸Šçš„å…¬å¸ï¼Œå·¥èµ„éƒ½è¿˜å¯ä»¥ã€‚ã€‚ã€‚ä½†ï¼Œç¦»åŒ—ä¸Šå¹¿æ·±çš„åŒç­‰æ’åçš„å…¬å¸ç›¸æ¯”ï¼Œåº”è¯¥è¿˜æ˜¯å·®è·æ¯”è¾ƒå¤§ã€‚</p>
<p>æ­¤å¤„è¿˜éœ€ç‚¹å‡ºå‡ å®¶å…¬å¸ï¼Œå»ºè®®å¤§å®¶å¤šæŠ•ç®€å†ï¼Œä¾‹å¦‚æˆ‘æ‰€äº†è§£çš„å¾¡æ³¥åŠã€é—®å·æ˜Ÿã€å…´ç››ä¼˜é€‰ã€èœœç¾ä¿¡æ¯ç­‰å…¬å¸ï¼Œä»–ä»¬å¯¹äººæ‰è¿˜æ˜¯æŒºé‡è§†çš„ï¼Œå·¥èµ„ä¹Ÿè¿˜æŒºé«˜çš„ï¼Œå€¼å¾—å¤§å®¶å…³æ³¨å…³æ³¨ã€‚ã€‚</p>
<p>å½“ç„¶ï¼Œä¸åŒ—ä¸Šå¹¿æ·±çš„å¤§å…¬å¸æ¯”èµ·æ¥ï¼Œå—¯ï¼Œè¿˜æ˜¯åˆ«æ¯”äº†ã€‚</p>
<p>å¦å¤–ï¼Œå†…æ¨å¯èƒ½æ¯”ç¤¾æ‹›å·¥èµ„é«˜ï¼Œå¦‚æœä½ æ˜¯å¤§ä½¬ï¼Œæƒ³èµ°ç¤¾æ‹›åŠ å…¥è¿™å‡ å®¶å…¬å¸ï¼Œä¼°è®¡ä¼šè¢«å‹ä¸€äº›ä»·ã€‚ã€‚ã€‚</p>
<h2 id="3-1"><a href="#3-1" class="headerlink" title="3"></a>3</h2><p>é‚£é•¿æ²™çš„å¼€å‘è€…æ™®éå·¥èµ„å¤§æ¦‚æ˜¯ä»€ä¹ˆæ°´å¹³ï¼Ÿæˆ–è®¸ä¸åŒçš„è¯­è¨€ä½“ç³»æœ‰ä¸€å®šçš„ä¸åŒï¼Œä¾‹å¦‚åç«¯ï¼Œä¸€ä½é¡¶å°–çš„åç«¯å·¥ç¨‹å¸ˆï¼Œå¤§æ¦‚æ˜¯30-50kã€‚</p>
<p>å½“ç„¶ï¼Œç›®å‰æˆ‘è¿˜æ²¡æ¥è§¦åˆ°çªç ´50kçš„å¼€å‘è€…ã€‚æˆ‘æ¥è§¦åˆ°çªç ´30kçš„å¼€å‘è€…ã€‚ã€‚å¯¹ä¸èµ·ï¼Œä»–ä»¬å·²ç»ä¸æ˜¯å¼€å‘è€…äº†ï¼ŒåŸºæœ¬ä¸Šéƒ½æ˜¯å…¬å¸ç®¡ç†å±‚ã€ç”šè‡³åœ¨ä¸å°‘å…¬å¸ï¼Œç”šè‡³æ˜¯é«˜ç®¡çº§åˆ«ã€‚</p>
<p>è€Œèµ„æ·±å¼€å‘è€…ï¼ŒåŸºæœ¬ä¸Šæ˜¯åœ¨20-40kå·¦å³ï¼›é«˜çº§å¼€å‘è€…ï¼Œåº”è¯¥æ˜¯12-25kå·¦å³ï¼Œä¸­çº§å¼€å‘è€…ï¼Œå¤§æ¦‚æ˜¯8-15kå·¦å³ï¼Œåˆçº§å¼€å‘è€…ï¼Œå¤§æ¦‚æ˜¯4-8kå·¦å³ã€‚åœ¨è¿™ä¸€ç‚¹ä¸Šï¼ŒJavaå’Œ.NETæˆ–å…¶ä»–è¯­è¨€ï¼Œå…¶å®åŒºåˆ«ä¸å¤§ã€‚</p>
<h2 id="4-1"><a href="#4-1" class="headerlink" title="4"></a>4</h2><p>å½“ç„¶ï¼Œæˆ‘çš„åœˆå±‚æŸç¼šäº†æˆ‘çš„æƒ³è±¡åŠ›ï¼Œæ˜¾ç„¶è¿˜æœ‰æ›´é«˜æ”¶å…¥çš„ç¾¤ä½“ã€‚ã€‚åœ¨æˆ‘äº†è§£çš„åœˆå±‚ã€‚</p>
<p>ä¾‹å¦‚èŠ’æœTVã€‚ã€‚ä¸€ä¸ªé«˜çº§è¿ç»´å°±èƒ½çªç ´30kï¼Œè€Œå…¶ä»–å…¬å¸ï¼Œä¸ç®¡ä½ k8s\openstackç©å¾—å¤š</p>
<p>æºœï¼Œ20kå·²ç»æ˜¯å¤©èŠ±æ¿äº†ã€‚</p>
<p>åœˆå±‚ä¹‹å¤–ã€‚ã€‚å¤§æ¦‚å¹´è–ª50ä¸‡åˆ°80ä¸‡ï¼Œå…¶å®ä¹Ÿæ˜¯é•¿æ²™ä¸€äº›å¤§å‹äº’è”ç½‘å…¬å¸æŠ€æœ¯é«˜ç®¡çš„å¤©èŠ±æ¿ã€‚å…¶å®æœ‰çš„å¤§å…¬å¸é«˜ç®¡ï¼Œä¹Ÿæ²¡èƒ½çªç ´40kï¼Œä¸è¿‡æ—¢ç„¶å·²ç»æˆä¸ºé«˜ç®¡äº†ï¼Œä¼°è®¡ä»–ä»¬å·²ç»ä¸é å·¥èµ„ï¼Œæ›´å¤šçš„æ˜¯é å…¬å¸çš„ä¸šç»©ææˆæˆ–è‚¡ä»½åˆ†çº¢å§ã€‚</p>
<p><em>5</em></p>
<p>å¯¹ä¸èµ·ï¼Œæ‰€æœ‰åˆçº§ã€ä¸­çº§ã€é«˜çº§ã€èµ„æ·±å¼€å‘è€…ï¼Œå¹¶ä¸æ˜¯æŒ‰å¹´èµ„æ¥è¡¡é‡çš„ï¼Œè€Œæ˜¯çœ‹çœŸå®å®åŠ›æ¥è¡¡é‡ã€‚ä½ ä¸èƒ½è¯´ä½ å·¥ä½œåå¹´ï¼Œå°±ä¸€å®šæ˜¯é«˜çº§å¼€å‘è€…ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ åšåç«¯å¼€å‘ï¼Œè¿gcã€é¢†åŸŸé©±åŠ¨è®¾è®¡ã€åˆ†å¸ƒå¼ç¼“å­˜ã€NoSQLéƒ½æ²¡å¬è¿‡ï¼Œå¯èƒ½ä½ ç¡®å®ä¸å¤ªé€‚åˆå¯»æ‰¾è·¨è¡Œä¸šçš„èŒä½ã€‚ã€‚</p>
<p>ç„¶è€Œï¼Œäº‹å®ä¸Šå¤§å¤šæ•°å¼€å‘è€…éƒ½æ˜¯è¿™ä¹ˆè‡ªä»¥ä¸ºçš„ã€‚æˆ‘ä¹Ÿé¢è¿‡ä¸€äº›å·¥ä½œåå¹´çš„å¼€å‘è€…ï¼Œä»–ä»¬åœ¨ç‰¹å®šçš„ä¸šåŠ¡é¢†åŸŸï¼Œæˆ–è®¸æ˜¯ä¸šåŠ¡å¤§ä½¬ï¼Œä½†ä¸€æ—¦ç¦»å¼€å¯¹åº”çš„é¢†åŸŸæ±‚èŒï¼Œå‡ ä¹æ‰¾ä¸åˆ°åˆé€‚çš„å·¥ä½œã€‚ä¾‹å¦‚ï¼Œæˆ‘æ›¾ç»é¢è¿‡ä¸€äº›åšå»ºç­‘ä¿¡æ¯åŒ–çš„å¼€å‘è€…ï¼Œå·¥ä½œä¹Ÿæœ‰åå¹´å¤šï¼Œä½†ä¸€æ—¦é—®åˆ°æ¶‰åŠå¹¶å‘ã€ç¼“å­˜ã€gcç­‰é—®é¢˜ï¼Œä»–ä»¬åŸºæœ¬ä¸Šéƒ½æ²¡å¬è¿‡ã€‚ä¸è¿™ç±»ä¼¼çš„è¿˜æœ‰ä»äº‹åˆ¶é€ ä¸šä¿¡æ¯åŒ–çš„å¼€å‘è€…ï¼Œå¯èƒ½è¿.NETæŠ€æœ¯ä¸­çš„ä¸€äº›æ–°ç‰¹æ€§ï¼Œä¾‹å¦‚async/awaitéƒ½å¯èƒ½æ²¡å¬è¿‡ã€‚å°±åƒæjavaçš„ï¼Œè¿ç¨å¾®æ–°ä¸€ç‚¹çš„è¯­æ³•éƒ½æ²¡ç”¨è¿‡ï¼Œåˆè¯¥å¦‚ä½•è¢«ç§°ä¸ºâ€œé«˜çº§Javaå·¥ç¨‹å¸ˆâ€ã€‚</p>
<p>ä½œä¸ºå¼€å‘è€…ï¼Œæ‡‚åŸºç¡€æ¦‚å¿µå’Œæœ¯è¯­è¿˜æ˜¯å¾ˆé‡è¦çš„ï¼Œä¸è¿‡ï¼Œé•¿æ²™çš„æŠ€æœ¯åœˆå­ï¼Œä¼¼ä¹è¿˜æ²¡å½¢æˆè¿™æ ·çš„æ°›å›´ã€‚é¢è¯•æ—¶ï¼Œæœ‰æ—¶ä¸èƒ½é—®æŠ€æœ¯é—®é¢˜ã€‚</p>
<p>å½“ç„¶ï¼Œé€€ä¸€ä¸‡ä¸è®²ï¼Œå…¬å¸ä¸æ€ä¹ˆåœ°ï¼Œå±…ç„¶è¿˜å¥½æ„æ€é—®æŠ€æœ¯é—®é¢˜ï¼Œä¸å°±æ˜¯â€œæ‹¥æœ‰é€ æ ¸å¼¹çš„å¿ƒï¼Œå´åªæœ‰æ‹§èºä¸é’‰çš„å‘½ä¹ˆï¼Ÿâ€ã€‚ã€‚ã€‚</p>
<h1 id="å››-æˆ‘æŠ€æœ¯ç‰›é€¼ï¼Œä¸ºä½•å°±ä¸èƒ½æ‹¿é«˜å·¥èµ„ï¼Ÿ"><a href="#å››-æˆ‘æŠ€æœ¯ç‰›é€¼ï¼Œä¸ºä½•å°±ä¸èƒ½æ‹¿é«˜å·¥èµ„ï¼Ÿ" class="headerlink" title="å››  æˆ‘æŠ€æœ¯ç‰›é€¼ï¼Œä¸ºä½•å°±ä¸èƒ½æ‹¿é«˜å·¥èµ„ï¼Ÿ"></a>å››  æˆ‘æŠ€æœ¯ç‰›é€¼ï¼Œä¸ºä½•å°±ä¸èƒ½æ‹¿é«˜å·¥èµ„ï¼Ÿ</h1><h2 id="1-2"><a href="#1-2" class="headerlink" title="1"></a>1</h2><p>æˆ‘å·²ç»è§è¿‡ä¸ä¸‹åä½ä¼˜ç§€å¼€å‘è€…ï¼Œä»–ä»¬çš„å²—ä½åŸºæœ¬ä¸Šéƒ½æ˜¯æŠ€æœ¯ç»ç†ã€æŠ€æœ¯æ€»ç›‘ã€æ¶æ„å¸ˆï¼Œè€Œå¾…é‡è¦æ±‚åŸºæœ¬ä¸Šéƒ½æ˜¯18kä»¥ä¸Šã€‚ç»“æœä»–ä»¬çš„æ±‚èŒæœŸæ— ä¸€ä¾‹å¤–ï¼Œéƒ½è¾¾åˆ°äº†ä¸€ä¸ªæœˆä»¥ä¸Šï¼Œæœ€ç»ˆä¸å¾—ä¸ä¸€ç‚¹ç‚¹æŠŠè‡ªå·±çš„å¿ƒç†é¢„æœŸè¿›ä¸€æ­¥é™ä½ï¼Œè¿›ä¸€æ­¥é™ä½ï¼Œç„¶ååœ¨15kå·¦å³å¾˜å¾Šã€‚å½“ç„¶ï¼Œè¿™äº›éƒ½æ˜¯.NETå¼€å‘è€…ï¼Œå¦‚æœæ˜¯Javaå¼€å‘è€…ï¼Œå¯èƒ½å¤šé‚£ä¹ˆå‡ åƒå—é’±ã€‚ã€‚ï¼ˆä¸è¿‡Javaçš„ç«äº‰æ›´æ¿€çƒˆï¼‰</p>
<p>è¿™æ˜¯ç”±äºä»–ä»¬èƒ½åŠ›ä¸è¡Œé€ æˆçš„ä¹ˆï¼Ÿç»éå¦‚æ­¤ï¼Œæˆ‘ç›¸ä¿¡ï¼Œä»–ä»¬åœ¨æ²¡å›é•¿æ²™ä¹‹å‰ï¼Œå…¬å¸ä¹Ÿæ˜¯å¥½å¹³å°ã€ä»–ä»¬èƒ½å¤Ÿæˆä¸ºå…¬å¸çš„æ ¸å¿ƒéª¨å¹²ï¼Œä¹Ÿè¯æ˜ä»–ä»¬éå¸¸ä¼˜ç§€ã€‚</p>
<h2 id="2-2"><a href="#2-2" class="headerlink" title="2"></a>2</h2><p>ä½†æ˜¯ã€‚ã€‚é•¿æ²™ç¡®å®æ˜¯äº’è”ç½‘çš„è’æ¼ ï¼Œèƒ½å¤Ÿç»™å¼€å‘è€…å¸¦æ¥æ›´åŠ ä¸°åšæ”¶å…¥ã€è‡ªè±ªæ„Ÿçš„å…¬å¸ï¼Œå®åœ¨æ˜¯å¤ªå°‘å¤ªå°‘ã€‚å‰é¢æåˆ°çš„é‚£äº›æŠ€æœ¯ç®¡ç†å±‚éƒ½æ˜¯éå¸¸ä¼˜ç§€çš„è·¨èŒèƒ½äººæ‰ï¼Œè¿™è®©ä»–ä»¬èƒ½å¤Ÿåœ¨æŠ€æœ¯å²—ä½å¿«é€Ÿè¿›æ­¥çš„åŒæ—¶ï¼Œè¿˜èƒ½å¾ˆå¿«çš„æˆä¸ºå…¬å¸çš„ç®¡ç†è€…ï¼Œç»™å…¬å¸çš„å‘å±•å¸¦æ¥å¾ˆå¤§çš„å¸®åŠ©ã€‚åªæ˜¯ä»ä»–ä»¬ç¦»å¼€å…¬å¸å¼€å§‹ï¼Œå°±æ— æ³•ä»¥å¯¹åº”çš„titleå¯»æ‰¾å·¥ä½œï¼Œåªèƒ½å¯»æ‰¾æŠ€æœ¯é¢†åŸŸçš„é«˜çº§å¼€å‘è€…ã€‚</p>
<p>è€Œå¸‚åœºä¸Šç®¡ç†å²—ä½æ˜¾ç„¶å°‘äºæŠ€æœ¯å²—ä½ï¼Œä¸”ä¸è¯´ç«äº‰æ˜¯å¦æ¿€çƒˆï¼Œæ›´ä½•å†µç°åœ¨çš„æŠ€æœ¯å²—ä½å¯¹äºæŠ€èƒ½çš„è¦æ±‚æœ¬èº«å°±å·²ç»é€æ¸æé«˜äº†ã€‚å½“ä½ è¸ä¸Šç®¡ç†è€…çš„å²—ä½å¼€å§‹ï¼Œä¸€å¤©åˆèƒ½ç»´æŒå‡ ä¸ªå°æ—¶çš„ç¼–ç æ—¶é—´å‘¢ï¼Ÿä½ çœŸçš„ä¼šæŒç»­åˆ·æ–°è‡ªå·±çš„æŠ€æœ¯ï¼Œä¿æŒæŠ€æœ¯çš„æŒä¹…æˆ˜æ–—åŠ›ä¹ˆï¼Ÿ</p>
<p>æˆ–è®¸ã€‚å…¶å®ä½ å†…å¿ƒï¼Œå…¶å®å·²ç»ä¸å†é‡è§†â€œç¼–ç â€è¿™ä¸ªç¡¬æŠ€èƒ½äº†å§ã€‚</p>
<p>å¦å¤–ï¼Œä¾æ®â€œå½¼å¾—åŸç†â€ï¼Œå¤§éƒ¨åˆ†å…¬å¸å…¶å®æ‰¾çš„æ˜¯å½“å‰å²—ä½çš„èƒœä»»è€…ï¼Œè€Œä¸æ˜¯è¶…å‡ºå¯¹åº”å²—ä½çš„â€œè¿›é˜¶è€…â€ã€‚å¦‚æœä½ çš„å…¬å¸å¤©èŠ±æ¿éå¸¸ä½ï¼Œé‚£ä½ åˆå¦‚ä½•èƒ½åœ¨é‚£äº›æœ‰é«˜å¤©èŠ±æ¿çš„å…¬å¸æ‰¾åˆ°é«˜èŒçº§çš„å·¥ä½œã€‚å³ä¾¿æœ‰ï¼Œæˆ–è®¸ä¹Ÿå¾ˆéš¾èƒœä»»å§ã€‚</p>
<h2 id="4-2"><a href="#4-2" class="headerlink" title="4"></a>4</h2><p>é•¿æ²™çš„è½¯ä»¶å…¬å¸æˆ–å¼€å‘è€…æŠ€æœ¯ä¸è¡Œä¹ˆï¼Ÿè¿™ä¹Ÿæ˜¯ä¸ªæ‚–è®ºã€‚æ–‡æ— ç¬¬ä¸€ï¼Œæ­¦æ— ç¬¬äºŒã€‚å·¥èµ„ä¸è¡Œä¸ä»£è¡¨æŠ€æœ¯ä¸è¡Œã€‚ è®¸å¤šé•¿æ²™çš„å…¬å¸è™½ç„¶å…¬å¸æ•ˆç›Šè¿œè¿œæ¯”ä¸ä¸ŠBATå¤§å…¬å¸ï¼Œä¸€å¹´å‡€æ”¶å…¥çªç ´å‡ åƒä¸‡å°±ç®—æ˜¯ä¸ªä¸é”™çš„å…¬å¸äº†ï¼Œä½†è¿™ä¸èƒ½è¯´æ˜å…¬å¸æŠ€æœ¯ä¸è¡Œã€‚æ°å¥½ç›¸åï¼Œä¸€æ³¢ä¸€æ³¢å›é•¿æ²™çš„å¼€å‘è€…ï¼Œæ€»ä¼šæœ‰äººä¸€ç‚¹ç‚¹æŠŠé•¿æ²™çš„æŠ€æœ¯æ°´å¹³é€æ¸æé«˜ã€‚</p>
<p>æŠ€æœ¯æ°´å¹³çš„é«˜ä½æ²¡æœ‰è¯„åˆ¤æ ‡å‡†ï¼Œè®¸å¤šå¤§ä½¬æŠ€æœ¯ç‰›é€¼ï¼Œä½†è„±ç¦»äº†å…¬å¸çš„å¹³å°æ•ˆåº”å’Œå›¢é˜Ÿæˆ˜æ–—åŠ›ï¼Œå•å…µä½œæˆ˜èƒ½åŠ›å¯èƒ½å¹¶ä¸å¼ºã€‚</p>
<p>ç›¸æ¯”ä¹‹ä¸‹ï¼Œè®¸å¤šé•¿æ²™çš„å¼€å‘è€…å¹³æ—¶ä¸‹ç­ä¹‹åå°±æ˜¯å­¦ä¹ æŠ€æœ¯ï¼Œäº¤æµæŠ€æœ¯ï¼Œä¸€å¤©å…«å°æ—¶æ’¸ç ï¼Œè¿˜æœ‰å››å°æ—¶å­¦ä¹ ï¼Œè¿™æ ·çš„å¼€å‘è€…æŠ€æœ¯è¿˜èƒ½å·®åˆ°å“ªé‡Œå»ã€‚</p>
<p>ä¾‹å¦‚å‰é¢æåˆ°çš„èœœç¾ä¿¡æ¯ï¼Œå°±å½¢æˆäº†è¿™æ ·ä¸€ç¾¤äººã€‚è€Œä¸”å…¬å¸å¾…é‡ä¸é”™ï¼ŒæŠ€æœ¯æ°›å›´ä¹Ÿå¾ˆä¸é”™ï¼Œå…¬å¸ç®¡ç†å±‚ä¹Ÿé‡è§†æŠ€æœ¯å’Œä¼ä¸šæ–‡åŒ–æ°›å›´ï¼Œæ—©å°±æŠŠâ€œä¸åŠ ç­ï¼Œä¸å†™è¿‡æ—¶çš„æ–‡æ¡£ï¼Œæ¯ä¸¤å‘¨å‘å¸ƒä¸€ä¸ªç‰ˆæœ¬çš„æ•æ·å‘å¸ƒâ€ç©çš„æŒºé¡ºåˆ©çš„ï¼Œéå¸¸é€‚åˆå¤§å®¶å…³æ³¨ã€‚</p>
<h2 id="5"><a href="#5" class="headerlink" title="5"></a>5</h2><p>å½“ç„¶ï¼Œé™äºä½“é‡åŸå› ï¼Œè®¸å¤šæŠ€æœ¯å«é‡è¾ƒé«˜çš„åœºæ™¯ï¼Œé•¿æ²™è¿˜çœŸæ²¡æœ‰ã€‚æˆ‘ä¸€ä½æœ‹å‹åæ§½ï¼Œé•¿æ²™çš„è¿ç»´äººå‘˜ï¼Œè¿˜åœç•™åœ¨æœ€å¤šç™¾å°æœåŠ¡å™¨è¿ç»´çš„èƒ½åŠ›ï¼Œå‡ ä¹ç›¸å½“äºä»–2015å¹´çš„æ°´å¹³ã€‚ç°åœ¨åœ¨é•¿æ²™ï¼Œèƒ½å¤Ÿç©å¾—èµ·è‡ªåŠ¨åŒ–æµ‹è¯•çš„å…¬å¸ï¼Œéƒ½è¿˜ç®—ä¸é”™çš„å…¬å¸ï¼Œæ‰€ä»¥å¦‚æœä½ æ˜¯æ‹¥æœ‰è‡ªåŠ¨åŒ–æµ‹è¯•ç»éªŒçš„æµ‹è¯•å·¥ç¨‹å¸ˆï¼Œå…¶å®ä¹Ÿè¿˜æ˜¯æœ‰å¾ˆå¤šæœºä¼šã€‚</p>
<p>ä½†é‚£äº›å¤§å…¬å¸æ‰æœ‰çš„ç»†åˆ†å²—ä½ï¼Œä¾‹å¦‚ä¹‹å‰è¯´çš„åŸºç«™æµ‹è¯•ï¼Œè¿˜æœ‰å’¨è¯¢å¸ˆï¼ŒæŠ€æœ¯å†™ä½œä¸“å®¶ï¼Œé…ç½®ç®¡ç†å·¥ç¨‹å¸ˆï¼Œç”šè‡³æ˜¯pythonå¤§æ•°æ®åˆ†æå¸ˆï¼Œé•¿æ²™å¤§æ¦‚è¿˜å‡ ä¹æ²¡æœ‰ã€‚é•¿æ²™å¸‚åœºä¸Špythonç›¸å…³çš„èŒä½è¿˜éå¸¸å°‘ï¼Œgoè¯­è¨€çš„ä¹Ÿå¹¶ä¸å¤šã€‚ã€‚ã€‚</p>
<h2 id="6"><a href="#6" class="headerlink" title="6"></a>6</h2><p>é•¿æ²™çš„å…¬å¸ä¸ºä»€ä¹ˆä¸æ„¿æ„èŠ±é«˜å·¥èµ„è˜è¯·å¤§ç‰›å‘¢ï¼Ÿå…¶å®è¿™ä¹Ÿæ˜¯ä¸€äº›å›é•¿æ²™çš„æ±‚èŒè€…å‘æˆ‘åæ§½çš„ã€‚ä¹Ÿè®¸ä»–ä»¬çš„è¨€ä¸‹ä¹‹æ„æ˜¯ï¼šä¸ºå•¥ä¸è˜è¯·â€œåƒè‡ªå·±è¿™æ ·çš„å¤§ç‰›â€å‘¢ï¼Ÿ</p>
<p>å¥½å§ï¼Œå…¶å®é•¿æ²™çš„ITåœˆä¹Ÿèˆå¾—èŠ±åŠ›æ°”è˜è¯·å¤§ç‰›ï¼Œåƒå·²ç»æˆä¸ºç¤¾åŒºç”µå•†è¡Œä¸šçš„é¢†è·‘è€…çš„å…´ç››ä¼˜é€‰ï¼Œå…¬å¸æœ¬èº«å·²ç»æœ‰ä¸å°‘å¤§ç‰›ï¼Œè€Œä¸”ä¹Ÿæ„¿æ„ç”¨æœˆè–ª35åˆ°60ä»¥ä¸Šçš„æ ‡å‡†è˜è¯·é˜¿é‡Œå·´å·´p7ä»¥ä¸Šçš„å¼€å‘è€…ï¼Œè€ƒè™‘åˆ°é•¿æ²™çš„ç‰©ä»·æ°´å¹³ï¼Œå…¶å®å·²ç»æŒºä¸é”™äº†ã€‚</p>
<p><em>å¦‚æœä½ æ˜¯çœŸå¤§ç‰›ã€‚ã€‚æˆ‘å¯ä»¥å¸®ä½ æ¨èä¸€ç•ªã€‚</em></p>
<p>æ€»ä¹‹ï¼Œé•¿æ²™çš„ITå…¬å¸å¹¶éä¸èˆå¾—èŠ±é«˜å·¥èµ„è˜è¯·å¤§ä½¬ï¼Œè€Œæ˜¯å› ä¸ºã€‚ã€‚ã€‚è¿˜æ²¡é‡åˆ°çœŸæ­£ç‰›é€¼çš„å¤§ä½¬ã€‚</p>
<h1 id="äº”-é«˜å·¥èµ„æ˜¯æ€ä¹ˆæ¥çš„ï¼Ÿ"><a href="#äº”-é«˜å·¥èµ„æ˜¯æ€ä¹ˆæ¥çš„ï¼Ÿ" class="headerlink" title="äº” é«˜å·¥èµ„æ˜¯æ€ä¹ˆæ¥çš„ï¼Ÿ"></a>äº” é«˜å·¥èµ„æ˜¯æ€ä¹ˆæ¥çš„ï¼Ÿ</h1><h2 id="1-3"><a href="#1-3" class="headerlink" title="1"></a>1</h2><p>è°ˆèµ·é«˜å·¥èµ„ï¼Œæˆ‘ä»¬å¾—æƒ³æƒ³åŒ—ä¸Šå¹¿æ·±é‚£ä¹ˆå¤šç™¾ä¸‡å¹´è–ªçš„ç¨‹åºå‘˜ï¼Œä»–ä»¬çš„é«˜å·¥èµ„æ˜¯æ€ä¹ˆæ¥çš„ï¼Ÿ</p>
<p>åœ¨äº’è”ç½‘é£é€Ÿå‘å±•çš„ä»Šå¤©ï¼Œé è¿‘èµ„æœ¬çš„åŒ—ä¸Šå¹¿æ·±æ­å·²ç»æˆä¸ºé£å£æµªå°–ï¼Œè®¸å¤šä¸äº’è”ç½‘æ¦‚å¿µç›¸å…³çš„ä¼ä¸šéƒ½è·Ÿç€ä¸šç»©è…¾é£ï¼Œå‘˜å·¥çš„è–ªèµ„ä¹Ÿè·Ÿç€æ°´æ¶¨èˆ¹é«˜ï¼Œæ­¤å¤„å°±ä¸éœ€è¦ä¸¾ä¾‹å­äº†ï¼Œæ¯•ç«ŸBATé‚£ä¹ˆå¤šå®¶å…¬å¸çš„ä¼˜ç§€å¼€å‘è€…ä»¬ï¼Œç”¨ä»–ä»¬çš„èº«ä»·è¯æ˜ï¼Œè‡ªå·±çš„ä¸€ä»½åŠªåŠ›ï¼Œå®Œå…¨å¯ä»¥ä»£è¡¨ä¸­å›½äº’è”ç½‘å¼€å‘è€…çš„é¡¶å°–æ”¶å…¥æ°´å¹³ã€‚</p>
<p>ä½†ã€‚ã€‚åœ¨è¿™äº›è¡Œä¸šå·¨å¤´ä¹‹å¤–ï¼Œè¿˜æœ‰è®¸å¤šå¼€å‘è€…ï¼Œå…¶å®ä¾ç„¶å¤„äºæ¸©é¥±çº¿çš„è¾¹ç¼˜ï¼Œæˆ–ç¨å¾®æ¯”æ¸©é¥±çº¿å¥½é‚£ä¹ˆä¸€ç‚¹ï¼Œè´¢åŠ¡è‡ªç”±ï¼Ÿ35å²é€€ä¼‘ï¼Ÿå¹´å…¥ç™¾ä¸‡ï¼Ÿå¤§éƒ¨åˆ†äººåˆ«æƒ³äº†ã€‚æ˜¯ç”±äºé€‰æ‹©å¤§äºåŠªåŠ›é€ æˆçš„ï¼Ÿè¿˜æ˜¯ç”±äºå¹³æ—¶æ¸©æ°´ç…®é’è›™ï¼Œä¸å¤ŸåŠªåŠ›é€ æˆçš„ï¼Ÿå…¶å®åŸºæœ¬ä¸Šéƒ½ä¸æ˜¯çš„ã€‚äº‹å®ä¸Šï¼Œè®¸å¤šå¼€å‘è€…ï¼Œä¾‹å¦‚ä¸€äº›å¤–åŒ…æˆ–åˆ¶é€ ä¸šå¤–åŒ…çš„å¼€å‘è€…ï¼Œä»–ä»¬çš„æ¡ä»¶è¿œæ¯”BATå…¬å¸æ›´è‰°è‹¦ï¼Œæ¯å‘¨çš„å·¥ä½œæ—¶é•¿æ›´é«˜ï¼Œä½†æ‹¿çš„æ”¶å…¥æ°´å¹³ï¼Œå´ä»…ä»…åªæ˜¯BATå¼€å‘è€…çš„é›¶å¤´ï¼Œç”šè‡³ä¸å¦‚ã€‚</p>
<p>è¿™å¤§æ¦‚æœ‰ç‚¹åƒæ‹¿éæ´²äººæ°‘å’Œç¾å›½èµ„æœ¬å®¶å¯¹æ¯”ã€‚ç”¨ç»æµå­¦æœ¯è¯­æ¥è¯´ã€‚ã€‚å°±æ˜¯â€œå‰ªåˆ€å·®â€ï¼ˆæˆ‘æ‰“ç®—ç§°ä¸ºå·¥èµ„å‰ªåˆ€å·®ï¼‰ã€‚</p>
<p><img src="https://uploader.shimo.im/f/3jlkvgUiFD89FM37.png!thumbnail" alt="å›¾ç‰‡"></p>
<p>äº’è”ç½‘ä¼ä¸šå‘˜å·¥çš„é«˜æ”¶å…¥ï¼Œå…¶å®æ¥æºäºäº’è”ç½‘ä¼ä¸šæœ¬èº«å¯¹äºèµ„æœ¬çš„å‡èšåŠ›å’ŒæŠ•èµ„è€…å¯¹äºæœªæ¥çš„æœŸæœ›æ‰€å¸¦æ¥çš„æº¢ä»·ã€‚è€Œæœ‰è®¸å¤šäº’è”ç½‘å…¬å¸å…¶å®æœ¬èº«å·²ç»ä¸éœ€è¦é åˆ©æ¶¦æ¥å‘å·¥èµ„ï¼Œä»…ä»…ä¾é â€œå¸‚æ¢¦ç‡â€ï¼Œå°±èƒ½ç»´æŒå…¬å¸çš„é£é€Ÿå‘å±•ï¼Œè®©å‘˜å·¥è·å¾—è¶³å¤Ÿçš„ç¦åˆ©ã€‚</p>
<h2 id="2-3"><a href="#2-3" class="headerlink" title="2"></a>2</h2><p>è€Œé•¿æ²™çš„äº’è”ç½‘å…¬å¸å¹¶ä¸å¤šï¼Œå¤§éƒ¨åˆ†éƒ½æ˜¯æ‰€è°“â€œè¡Œä¸šäº’è”ç½‘â€ï¼Œè™½ç„¶æ²¾ä¸Šäº†â€œäº’è”ç½‘â€çš„åï¼Œå´æ²¡æœ‰äº’è”ç½‘çš„å‘½ã€‚</p>
<p>â€œè¡Œä¸šäº’è”ç½‘â€ä¼ä¸šç”±äºå‘å±•è¾ƒä¸ºç¼“æ…¢ã€æˆ–è€…å·²ç»è¾ƒä¸ºç¨³å®šï¼Œäº‹å®ä¸Šå·²ç»ä¸å¤ªå¯èƒ½ä»æŠ•èµ„è€…å¸‚åœºè·å¾—æ›´é«˜ï¼Œç”±äºåªèƒ½é åˆ©æ¶¦æ¥ç»™å‘˜å·¥å‘å·¥èµ„ã€‚</p>
<p>æ‰€ä»¥ï¼Œå‘˜å·¥çš„å·¥èµ„åŒ…å«äº†å…¬å¸è·å¾—çš„æŠ•èµ„ï¼Œå…¬å¸çš„åˆ©æ¶¦ï¼Œå…¬å¸çš„å“ç‰Œæº¢ä»·ã€ä¸ªäººçš„å“ç‰Œæº¢ä»·å’Œä¸ªäººçš„æ ¸å¿ƒç«äº‰åŠ›ï¼Œä¸ªäººçš„æœºé‡ã€‚å¦‚æœä½ æ ¸å¿ƒç«äº‰åŠ›å¼ºï¼Œè®©é‚£äº›ä¼˜ç§€çš„å…¬å¸èƒ½å¤Ÿæ›´æ—©çš„è®¤è¯†ä½ ï¼Œè‡ªç„¶è€Œç„¶ä¹Ÿå¾ˆå®¹æ˜“æˆä¸ºèŒåœºä¸Šçš„é¦™é¥½é¥½ã€‚</p>
<h2 id="3-2"><a href="#3-2" class="headerlink" title="3"></a>3</h2><p>å¦‚æœå“ç‰Œç«äº‰åŠ›ä¸€èˆ¬ï¼Œè¯¥å¦‚ä½•å¯»æ‰¾åˆé€‚è‡ªå·±çš„å·¥ä½œå‘¢ï¼Ÿ</p>
<p><img src="https://uploader.shimo.im/f/CNVf9Df1pBrsO07B.png!thumbnail" alt="å›¾ç‰‡"></p>
<p>è®¤æ¸…å½¢åŠ¿ï¼Œæ”¾å¼ƒå¹»æƒ³ã€‚å›å½’ç°å®ï¼Œåˆ«å¦„å›¾æ‹¿é‚£ä¹ˆé«˜çš„å·¥èµ„ã€‚æ‰¾ä¸€ä¸ªè‡ªå·±æ„Ÿå…´è¶£çš„è¡Œä¸šã€å…¬å¸ï¼Œè¸è¸å®å®å¹²ä¸‹å»ï¼Œé€šè¿‡è‡ªå·±çš„åŠªåŠ›ï¼Œä¸ºå…¬å¸åˆ›é€ æ›´å¤§çš„ä»·å€¼ï¼Œè‡ªç„¶è€Œç„¶ï¼Œä½ å°±è·å¾—äº†æ›´å¥½çš„å‘å±•ã€‚</p>
<p>å½“ä½ å›åˆ°é•¿æ²™ï¼Œå°±åˆ«åœ¨å¹»æƒ³é€šè¿‡ä¸Šç­æ¥è·å¾—â€œæš´å¯Œâ€äº†ã€‚é•¿æ²™è¿™æ ·çš„åœŸå£¤ï¼Œå…¶å®æ›´åƒæ™®é€šäººå‡­å€Ÿè‡ªå·±åŒæ‰‹æ”¹å˜å®¶åº­å‘½è¿çš„è·³æ¿ã€‚</p>
<p>ä¾‹å¦‚ï¼Œæ ¡ç®¡å®¶ï¼Œå°±æ˜¯è¿™æ ·çš„å…¬å¸ï¼Œè€æ¿ä»¬å‹¤å‹¤æ³æ³ã€è¸è¸å®å®ï¼Œé è‡ªå·±çš„åŠªåŠ›ï¼Œåˆ›é€ äº†ä¸€å®¶ä¼˜ç§€çš„å…¬å¸ï¼Œå¹¶æˆåŠŸçš„è·å¾—äº†æŠ•èµ„è€…ä»¬çš„ä¸æ–­å…³æ³¨ã€‚åœ¨é•¿æ²™ï¼Œè¿™æ ·çš„å…¬å¸ä¸ä¸‹æ•°åå®¶ã€‚</p>
<h1 id="ç»“è¯­"><a href="#ç»“è¯­" class="headerlink" title="ç»“è¯­"></a>ç»“è¯­</h1><p>ä¸å…¶ä»–åŸå¸‚ç›¸æ¯”ï¼Œé•¿æ²™çš„ITä¸šæ€æˆ–è®¸æ›´è¶‹äºâ€œåŠ¡å®â€â€œå‹¤å‹‰â€â€œå®å¹²â€â€œåšæŒâ€ã€‚</p>
<p>é•¿æ²™ä¸æ˜¯äº’è”ç½‘äººæ·˜é‡‘çš„çƒ­åœŸï¼Œä¹Ÿä¸æ˜¯ä¸€å¤œæš´å¯Œè€…çš„æ‘‡ç¯®ã€‚</p>
<p>åœ¨æ²¿æµ·åœ°åŒºäº’è”ç½‘çš„çƒ­é—¹å–§åš£ä¹‹å¤–ï¼Œé•¿æ²™å…¶å®å°±æ˜¯ä¸€ä¸ªè¿™æ ·é™é™å‘å±•ã€ä¸€å£°ä¸å“å°±åˆ›é€ å‡ºä¸é”™ä½³ç»©çš„â€œå°è€Œç¾â€çš„ç°ä»£åŒ–åŸå¸‚ã€‚</p>
<p>åœ¨é•¿æ²™ï¼Œä¹Ÿè®¸ä½ è§ä¸åˆ°å¤ªå¤šâ€œè‹±é›„â€ï¼Œå´å……æ»¡äº†å„ç§å„æ ·ã€åŠªåŠ›ä»˜å‡ºã€ç»†å¿ƒè€•è€˜ã€ç”¨ä¸‰å¹´ã€äº”å¹´æˆ–æ›´é•¿çš„æ—¶é—´æ¥ç”¨å¿ƒåŠ©åŠ›å…¬å¸æˆé•¿çš„â€œæ™®é€šäººâ€ã€‚</p>
<p>æ˜¾ç„¶ï¼Œè¿™ä¸ªä¸–ç•Œï¼Œæ—¢è¦â€œå†’é™©å®¶â€â€œé‡å¿ƒå®¶â€â€œæˆåŠŸå­¦â€ï¼ŒåŒæ ·ä¹Ÿéœ€è¦â€œæ™®é€šäººâ€ã€‚</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://techq.xyz/2020/04/09/æŠ€æœ¯/try-to-find-high-cpu-usage-in-netcore/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="æºªæº">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="xiyuanæŠ€æœ¯åœˆ">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2020/04/09/æŠ€æœ¯/try-to-find-high-cpu-usage-in-netcore/" class="post-title-link" itemprop="url">åœ¨.NETåº”ç”¨ç¨‹åºä¸­åˆ†æCPUä½¿ç”¨ç‡è¿‡é«˜çš„é—®é¢˜</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2020-04-09 21:24:00" itemprop="dateCreated datePublished" datetime="2020-04-09T21:24:00+00:00">2020-04-09</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2021-04-25 11:04:00" itemprop="dateModified" datetime="2021-04-25T11:04:00+00:00">2021-04-25</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/æŠ€æœ¯/" itemprop="url" rel="index"><span itemprop="name">æŠ€æœ¯</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>ä½œè€…:èƒ¡å®‰Â·å¸•å‹ƒç½—Â·å¸Œè¾¾ï¼ŒJUAN PABLO SCIDAæ˜¯ä¸€ä½è½¯ä»¶æ¶æ„å¸ˆï¼Œåœ¨è½¯ä»¶å¼€å‘æ–¹é¢æ‹¥æœ‰10å¤šå¹´çš„ç»éªŒã€‚ä»–æ˜¯ç»è¿‡è®¤è¯çš„.NETå’ŒJavaå¼€å‘äººå‘˜ã€‚åœ¨è¿‡å»çš„å‡ å¹´ä¸­ï¼Œä»–è¿˜çƒ­è¡·äºä½¿ç”¨Node.jsï¼ŒMongoDBå’ŒErlangã€‚</p>
<p>åŸæ–‡æ¥è‡ªï¼š<a href="https://www.toptal.com/dot-net/hunting-high-cpu-usage-in-dot-net" target="_blank" rel="noopener">https://www.toptal.com/dot-net/hunting-high-cpu-usage-in-dot-net</a></p>
<p>è½¯ä»¶å¼€å‘å¯èƒ½æ˜¯ä¸€ä¸ªéå¸¸å¤æ‚çš„è¿‡ç¨‹ã€‚ä½œä¸ºå¼€å‘äººå‘˜ï¼Œæˆ‘ä»¬éœ€è¦è€ƒè™‘å¾ˆå¤šä¸åŒçš„å˜é‡ã€‚æœ‰äº›ä¸åœ¨æˆ‘ä»¬çš„æ§åˆ¶ä¹‹ä¸‹ï¼Œæœ‰äº›åœ¨å®é™…ä»£ç æ‰§è¡Œæ—¶å¯¹æˆ‘ä»¬æ¥è¯´æ˜¯æœªçŸ¥çš„ï¼Œæœ‰äº›åˆ™ç”±æˆ‘ä»¬ç›´æ¥æ§åˆ¶ã€‚ <a href="https://www.toptal.com/dot-net" target="_blank" rel="noopener">.NETå¼€å‘äººå‘˜</a>ä¹Ÿæ¯«ä¸ä¾‹å¤–ã€‚</p>
<p>è€ƒè™‘åˆ°è¿™æ ·çš„ç°å®æƒ…å†µï¼Œå½“æˆ‘ä»¬åœ¨å—æ§ç¯å¢ƒä¸­å·¥ä½œæ—¶ï¼Œäº‹æƒ…é€šå¸¸ä¼šæŒ‰è®¡åˆ’è¿›è¡Œã€‚å‡è®¾å°±æ˜¯æˆ‘ä»¬çš„å¼€å‘æœºå™¨æˆ–æˆ‘ä»¬å¯ä»¥å®Œå…¨è®¿é—®çš„é›†æˆç¯å¢ƒã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å·¥å…·æ¥åˆ†æå½±å“æˆ‘ä»¬çš„ä»£ç å’Œè½¯ä»¶çš„ä¸åŒå˜é‡ã€‚æˆ‘ä»¬ä¹Ÿä¸å¿…å¤„ç†æœåŠ¡å™¨çš„ç¹é‡è´Ÿè½½ï¼Œä¹Ÿä¸å¿…å¤„ç†å¹¶å‘ç”¨æˆ·å°è¯•åŒæ—¶æ‰§è¡Œç›¸åŒæ“ä½œçš„æƒ…å†µã€‚</p>
<p>åœ¨å¯æè¿°å’Œå®‰å…¨çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬çš„ä»£ç é€šå¸¸å¯ä»¥æ­£å¸¸å·¥ä½œï¼Œä½†æ˜¯åœ¨ç”Ÿäº§ç¯å¢ƒä¸‹ï¼Œå¦‚æœå¤„äºè¿‡åº¦è´Ÿè½½æˆ–å…¶ä»–ä¸€äº›å¤–éƒ¨å› ç´ çš„å½±å“ï¼Œå¯èƒ½ä¼šå‘ç”Ÿæ„å¤–é—®é¢˜ã€‚ç”Ÿäº§ç¯å¢ƒçš„è½¯ä»¶æ€§èƒ½å¾ˆéš¾åˆ†æã€‚åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¿…é¡»åœ¨ç†è®ºä¸Šå¤„ç†æ½œåœ¨çš„é—®é¢˜ï¼šæˆ‘ä»¬çŸ¥é“å¯èƒ½ä¼šå‘ç”Ÿé—®é¢˜ï¼Œä½†æ— æ³•æµ‹è¯•ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦ä»¥æˆ‘ä»¬æ‰€ç”¨è¯­è¨€çš„æœ€ä½³å®è·µå’Œæ–‡æ¡£ä¸ºåŸºç¡€è¿›è¡Œå¼€å‘ï¼Œå¹¶é¿å…<a href="https://www.toptal.com/c-sharp/top-10-mistakes-that-c-sharp-programmers-make" target="_blank" rel="noopener">å¸¸è§é”™è¯¯</a>ã€‚</p>
<p>å¦‚å‰æ‰€è¿°ï¼Œå½“è½¯ä»¶ä¸Šçº¿æ—¶ï¼Œå¯èƒ½ä¼šå‡ºé”™ï¼Œå¹¶ä¸”ä»£ç å¯èƒ½ä¼šä»¥æˆ‘ä»¬æœªè®¡åˆ’çš„æ–¹å¼å¼€å§‹æ‰§è¡Œã€‚å½“æˆ‘ä»¬ä¸å¾—ä¸å¤„ç†é—®é¢˜è€Œåˆæ— æ³•è°ƒè¯•æˆ–ç¡®å®šå‘ç”Ÿäº†ä»€ä¹ˆæƒ…å†µæ—¶ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šé‡åˆ°è¿™ç§æƒ…å†µã€‚åœ¨è¿™ç§æƒ…å†µä¸‹æˆ‘ä»¬è¯¥æ€ä¹ˆåŠï¼Ÿ</p>
<p><img src="https://uploader.shimo.im/f/nLECb8q0ecw5UN4q.png!thumbnail" alt="å›¾ç‰‡"></p>
<p>å¦‚æœæŸä¸ªè¿›ç¨‹é•¿æ—¶é—´ä½¿ç”¨è¶…è¿‡90ï¼…çš„CPUï¼Œåˆ™æˆ‘ä»¬ä¼šé‡åˆ°éº»çƒ¦</p>
<p>åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†åˆ†æåŸºäºWindowsçš„æœåŠ¡å™¨ä¸Š. net webåº”ç”¨ç¨‹åºçš„é«˜CPUä½¿ç”¨ç‡çš„å®é™…æ¡ˆä¾‹åœºæ™¯ã€æ¶‰åŠåˆ°çš„è¯†åˆ«é—®é¢˜çš„è¿‡ç¨‹ï¼Œä»¥åŠæ›´é‡è¦çš„é—®é¢˜ï¼Œä¸ºä»€ä¹ˆä¼šå‡ºç°è¿™ä¸ªé—®é¢˜ä»¥åŠæˆ‘ä»¬å¦‚ä½•è§£å†³å®ƒã€‚</p>
<p>CPUä½¿ç”¨ç‡å’Œå†…å­˜æ¶ˆè€—æ˜¯å¹¿æ³›è®¨è®ºçš„ä¸»é¢˜ã€‚é€šå¸¸ï¼Œå¾ˆéš¾ç¡®å®šæŸä¸ªç‰¹å®šè¿›ç¨‹åº”ä½¿ç”¨çš„èµ„æºï¼ˆCPUï¼ŒRAMï¼ŒI / Oï¼‰çš„æ­£ç¡®æ•°é‡ä»¥åŠæŒç»­çš„æ—¶é—´æ®µã€‚å°½ç®¡å¯ä»¥è‚¯å®šçš„æ˜¯-å¦‚æœæŸä¸ªè¿›ç¨‹é•¿æ—¶é—´ä½¿ç”¨äº†è¶…è¿‡90ï¼…çš„CPUï¼Œé‚£ä¹ˆæˆ‘ä»¬å°†ç‰¹åˆ«éº»çƒ¦ï¼Œå› ä¸ºåœ¨è¿™ç§æƒ…å†µä¸‹æœåŠ¡å™¨å°†æ— æ³•å¤„ç†ä»»ä½•å…¶ä»–è¯·æ±‚ã€‚</p>
<p>è¿™æ˜¯å¦æ„å‘³ç€æµç¨‹æœ¬èº«å­˜åœ¨é—®é¢˜ï¼Ÿä¸å¿…è¦ã€‚è¯¥è¿‡ç¨‹å¯èƒ½éœ€è¦æ›´å¤šçš„å¤„ç†èƒ½åŠ›ï¼Œæˆ–è€…æ­£åœ¨å¤„ç†å¤§é‡æ•°æ®ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬å”¯ä¸€èƒ½åšçš„å°±æ˜¯å°è¯•ç¡®å®šå‘ç”Ÿè¿™ç§æƒ…å†µçš„åŸå› ã€‚</p>
<p>æ‰€æœ‰æ“ä½œç³»ç»Ÿéƒ½æœ‰å‡ ç§ä¸åŒçš„å·¥å…·æ¥ç›‘è§†æœåŠ¡å™¨ä¸­å‘ç”Ÿçš„äº‹æƒ…ã€‚WindowsæœåŠ¡å™¨ä¸“é—¨å…·æœ‰ä»»åŠ¡ç®¡ç†å™¨<a href="https://technet.microsoft.com/en-us/library/cc749115.aspx" target="_blank" rel="noopener">Performance Monitor</a>ï¼Œåœ¨æœ¬ä¾‹ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†<a href="http://newrelic.com/server-monitoring" target="_blank" rel="noopener">New Relic Servers</a>ï¼Œå®ƒæ˜¯ç›‘è§†æœåŠ¡å™¨çš„ç»ä½³å·¥å…·ã€‚</p>
<h2 id="æœ€åˆç—‡çŠ¶å’Œé—®é¢˜åˆ†æ"><a href="#æœ€åˆç—‡çŠ¶å’Œé—®é¢˜åˆ†æ" class="headerlink" title="æœ€åˆç—‡çŠ¶å’Œé—®é¢˜åˆ†æ"></a>æœ€åˆç—‡çŠ¶å’Œé—®é¢˜åˆ†æ</h2><p>éƒ¨ç½²åº”ç”¨ç¨‹åºåï¼Œåœ¨å¤´ä¸¤å‘¨çš„æ—¶é—´é‡Œï¼Œæˆ‘ä»¬å¼€å§‹çœ‹åˆ°æœåŠ¡å™¨çš„CPUä½¿ç”¨ç‡è¾¾åˆ°å³°å€¼ï¼Œè¿™ä½¿æœåŠ¡å™¨æ— å“åº”ã€‚ä¸ºäº†ä½¿å…¶å†æ¬¡å¯ç”¨ï¼Œæˆ‘ä»¬å¿…é¡»é‡æ–°å¯åŠ¨å®ƒï¼Œå¹¶ä¸”è¯¥äº‹ä»¶åœ¨è¯¥æ—¶é—´æ®µå†…å‘ç”Ÿäº†3æ¬¡ã€‚å¦‚å‰æ‰€è¿°ï¼Œæˆ‘ä»¬ä½¿ç”¨New Relic Serversä½œä¸ºæœåŠ¡å™¨ç›‘è§†å™¨ï¼Œå®ƒè¡¨æ˜w3wp.exeåœ¨æœåŠ¡å™¨å´©æºƒæ—¶ï¼Œè¯¥è¿›ç¨‹å ç”¨äº†94ï¼…çš„CPUã€‚</p>
<p>Internetä¿¡æ¯æœåŠ¡ï¼ˆIISï¼‰å·¥ä½œè¿›ç¨‹æ˜¯Windowsè¿›ç¨‹ï¼ˆw3wp.exeï¼‰ï¼Œå®ƒè¿è¡ŒWebåº”ç”¨ç¨‹åºï¼Œå¹¶è´Ÿè´£å¤„ç†å‘é€åˆ°ç‰¹å®šåº”ç”¨ç¨‹åºæ± çš„WebæœåŠ¡å™¨çš„è¯·æ±‚ã€‚IISæœåŠ¡å™¨å¯èƒ½æœ‰å¤šä¸ªåº”ç”¨ç¨‹åºæ± ï¼ˆå’Œå‡ ä¸ªä¸åŒçš„w3wp.exeè¿›ç¨‹ï¼‰ï¼Œè¿™äº›æ± å¯èƒ½ä¼šäº§ç”Ÿé—®é¢˜ã€‚æ ¹æ®è¯¥è¿›ç¨‹å…·æœ‰çš„ç”¨æˆ·ï¼ˆè¿™åœ¨New RelicæŠ¥å‘Šä¸­æ˜¾ç¤ºï¼‰ï¼Œæˆ‘ä»¬ç¡®å®šé—®é¢˜å‡ºåœ¨æˆ‘ä»¬çš„.NET Cï¼ƒWebè¡¨å•æ—§ç‰ˆåº”ç”¨ç¨‹åºã€‚</p>
<p>.NET Frameworkä¸Windowsè°ƒè¯•å·¥å…·ç´§å¯†é›†æˆåœ¨ä¸€èµ·ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬è¦åšçš„ç¬¬ä¸€ä»¶äº‹æ˜¯æŸ¥çœ‹äº‹ä»¶æŸ¥çœ‹å™¨å’Œåº”ç”¨ç¨‹åºæ—¥å¿—æ–‡ä»¶ï¼Œä»¥æŸ¥æ‰¾æœ‰å…³æ­£åœ¨å‘ç”Ÿçš„äº‹æƒ…çš„æœ‰ç”¨ä¿¡æ¯ã€‚æ— è®ºæˆ‘ä»¬æ˜¯å¦åœ¨äº‹ä»¶æŸ¥çœ‹å™¨ä¸­è®°å½•äº†ä¸€äº›å¼‚å¸¸ï¼Œå®ƒä»¬éƒ½æ²¡æœ‰æä¾›è¶³å¤Ÿçš„æ•°æ®æ¥è¿›è¡Œåˆ†æã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬å†³å®šæ›´è¿›ä¸€æ­¥å¹¶æ”¶é›†æ›´å¤šæ•°æ®çš„åŸå› ï¼Œå› æ­¤å½“äº‹ä»¶å†æ¬¡å‘ç”Ÿæ—¶ï¼Œæˆ‘ä»¬å°†åšå¥½å‡†å¤‡ã€‚</p>
<h2 id="æ•°æ®é‡‡é›†"><a href="#æ•°æ®é‡‡é›†" class="headerlink" title="æ•°æ®é‡‡é›†"></a>æ•°æ®é‡‡é›†</h2><p>æ”¶é›†ç”¨æˆ·æ¨¡å¼è¿›ç¨‹è½¬å‚¨çš„æœ€ç®€å•æ–¹æ³•æ˜¯ä½¿ç”¨<a href="https://www.microsoft.com/en-us/download/details.aspx?id=49924" target="_blank" rel="noopener">Debug Diagnostic Tools v2.0</a>æˆ–ä»…ä½¿ç”¨DebugDiagã€‚DebugDiagå…·æœ‰ä¸€ç»„ç”¨äºæ”¶é›†æ•°æ®ï¼ˆDebugDiagé›†åˆï¼‰å’Œåˆ†ææ•°æ®ï¼ˆDebugDiagåˆ†æï¼‰çš„å·¥å…·ã€‚</p>
<p>å› æ­¤ï¼Œè®©æˆ‘ä»¬å¼€å§‹å®šä¹‰ä½¿ç”¨è°ƒè¯•è¯Šæ–­å·¥å…·æ”¶é›†æ•°æ®çš„è§„åˆ™ï¼š</p>
<ol>
<li>æ‰“å¼€DebugDiagé›†åˆï¼Œç„¶åé€‰æ‹©Performanceã€‚<img src="https://uploader.shimo.im/f/pUEaTdjUQ34gG4NI.png!thumbnail" alt="å›¾ç‰‡"></li>
<li>é€‰æ‹©Performance Counterså¹¶å•å‡»Nextã€‚</li>
<li>ç‚¹å‡»Add Perf Triggersã€‚</li>
<li>å±•å¼€Processorï¼ˆä¸æ˜¯Processï¼‰å¯¹è±¡ï¼Œç„¶åé€‰æ‹©% Processor Timeã€‚è¯·æ³¨æ„ï¼Œå¦‚æœæ‚¨ä½¿ç”¨çš„æ˜¯Windows Server 2008 R2ï¼Œå¹¶ä¸”å…·æœ‰64ä¸ªä»¥ä¸Šçš„å¤„ç†å™¨ï¼Œè¯·é€‰æ‹©è¯¥Processor Informationå¯¹è±¡è€Œä¸æ˜¯è¯¥Processorå¯¹è±¡ã€‚</li>
<li>åœ¨å®ä¾‹åˆ—è¡¨ä¸­ï¼Œé€‰æ‹©_Totalã€‚</li>
<li>å•å‡»Addï¼Œç„¶åå•å‡»ç¡®å®šOKã€‚</li>
<li>é€‰æ‹©æ–°æ·»åŠ çš„è§¦å‘å™¨ï¼Œç„¶åå•å‡»ç¡®å®šEdit Thresholdsã€‚<img src="https://uploader.shimo.im/f/YLVYmJ9IXEsw2vyW.png!thumbnail" alt="å›¾ç‰‡"></li>
<li>Aboveåœ¨ä¸‹æ‹‰èœå•ä¸­é€‰æ‹©ã€‚</li>
<li>å°†é˜ˆå€¼æ›´æ”¹ä¸º80ã€‚</li>
<li>è¾“å…¥20ç§’æ•°ã€‚æ‚¨å¯ä»¥æ ¹æ®éœ€è¦è°ƒæ•´è¯¥å€¼ï¼Œä½†è¯·æ³¨æ„ä¸è¦æŒ‡å®šå°æ•°ç§’ï¼Œä»¥é˜²æ­¢é”™è¯¯è§¦å‘ã€‚<img src="https://uploader.shimo.im/f/o4CEqvo7SO4tN36e.png!thumbnail" alt="å›¾ç‰‡"></li>
<li>ç‚¹å‡»OKã€‚</li>
<li>ç‚¹å‡»Nextã€‚</li>
<li>ç‚¹å‡»Add Dump Targetã€‚</li>
<li>Web Application Poolä»ä¸‹æ‹‰èœå•ä¸­é€‰æ‹©ã€‚</li>
<li>ä»åº”ç”¨ç¨‹åºæ± åˆ—è¡¨ä¸­é€‰æ‹©æ‚¨çš„åº”ç”¨ç¨‹åºæ± ã€‚</li>
<li>ç‚¹å‡»OKã€‚</li>
<li>ç‚¹å‡»Nextã€‚</li>
<li>Nextå†ç‚¹å‡»ä¸€æ¬¡ã€‚</li>
<li>å¦‚æœéœ€è¦ï¼Œè¯·è¾“å…¥è§„åˆ™åç§°ï¼Œå¹¶è®°ä¸‹è½¬å‚¨çš„ä¿å­˜ä½ç½®ã€‚æ‚¨å¯ä»¥æ ¹æ®éœ€è¦æ›´æ”¹æ­¤ä½ç½®ã€‚</li>
<li>ç‚¹å‡»Nextã€‚</li>
<li>é€‰æ‹©Activate the Rule Nowå¹¶å•å‡»Finishã€‚</li>
</ol>
<p>æè¿°çš„è§„åˆ™å°†åˆ›å»ºä¸€ç»„å°å‹è½¬å‚¨æ–‡ä»¶ï¼Œè¿™äº›æ–‡ä»¶çš„å¤§å°å°†éå¸¸å°ã€‚æœ€ç»ˆè½¬å‚¨å°†æ˜¯å…·æœ‰å®Œæ•´å†…å­˜çš„è½¬å‚¨ï¼Œå¹¶ä¸”è¯¥è½¬å‚¨ä¼šæ›´å¤§ã€‚ç°åœ¨ï¼Œæˆ‘ä»¬åªéœ€è¦ç­‰å¾…é«˜CPUäº‹ä»¶å†æ¬¡å‘ç”Ÿå³å¯ã€‚</p>
<p>å°†è½¬å‚¨æ–‡ä»¶ä¿å­˜åœ¨æ‰€é€‰æ–‡ä»¶å¤¹ä¸­åï¼Œæˆ‘ä»¬å°†ä½¿ç”¨DebugDiag Analysiså·¥å…·æ¥åˆ†ææ”¶é›†çš„æ•°æ®ï¼š</p>
<ol>
<li>é€‰æ‹©æ€§èƒ½åˆ†æå™¨ã€‚<img src="https://uploader.shimo.im/f/TMJu2hTrqlgsk72i.png!thumbnail" alt="å›¾ç‰‡"></li>
<li>æ·»åŠ è½¬å‚¨æ–‡ä»¶ã€‚<img src="https://uploader.shimo.im/f/FiLI9Fm8THwFbtHC.png!thumbnail" alt="å›¾ç‰‡"></li>
<li>å¼€å§‹åˆ†æã€‚</li>
</ol>
<p>DebugDiagå°†èŠ±è´¹å‡ åˆ†é’Ÿï¼ˆæˆ–æ•°åˆ†é’Ÿï¼‰æ¥è§£æè½¬å‚¨å¹¶æä¾›åˆ†æã€‚å®Œæˆåˆ†æåï¼Œæ‚¨å°†çœ‹åˆ°ä¸€ä¸ªç½‘é¡µï¼Œå…¶ä¸­åŒ…å«æ‘˜è¦ä»¥åŠæœ‰å…³çº¿ç¨‹çš„å¤§é‡ä¿¡æ¯ï¼Œç±»ä¼¼äºä»¥ä¸‹å†…å®¹ï¼š</p>
<p><img src="https://uploader.shimo.im/f/g0Ju109AJTgK2mGc.png!thumbnail" alt="å›¾ç‰‡"></p>
<p>æ­£å¦‚æ‚¨åœ¨æ‘˜è¦ä¸­çœ‹åˆ°çš„é‚£æ ·ï¼Œæœ‰ä¸€æ¡è­¦å‘Šè¯´ï¼šâ€œåœ¨ä¸€ä¸ªæˆ–å¤šä¸ªçº¿ç¨‹ä¸Šæ£€æµ‹åˆ°è½¬å‚¨æ–‡ä»¶ä¹‹é—´çš„CPUä½¿ç”¨ç‡è¿‡é«˜ã€‚â€ å¦‚æœå•å‡»å»ºè®®ï¼Œæˆ‘ä»¬å°†å¼€å§‹äº†è§£åº”ç”¨ç¨‹åºå­˜åœ¨é—®é¢˜çš„åœ°æ–¹ã€‚æˆ‘ä»¬çš„ç¤ºä¾‹æŠ¥å‘Šå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p><img src="https://uploader.shimo.im/f/8yUwhsUG7wg9LalW.png!thumbnail" alt="å›¾ç‰‡"></p>
<p>æ­£å¦‚æˆ‘ä»¬åœ¨æŠ¥å‘Šä¸­çœ‹åˆ°çš„é‚£æ ·ï¼Œæœ‰ä¸€ä¸ªå…³äºCPUä½¿ç”¨ç‡çš„æ¨¡å¼ã€‚æ‰€æœ‰CPUä½¿ç”¨ç‡é«˜çš„çº¿ç¨‹éƒ½ä¸åŒä¸€ç±»ç›¸å…³ã€‚åœ¨è·³åˆ°ä»£ç ä¹‹å‰ï¼Œè®©æˆ‘ä»¬çœ‹ä¸€ä¸‹ç¬¬ä¸€ä¸ªã€‚</p>
<p><img src="https://uploader.shimo.im/f/UejsVGxAkYEiBRaH.png!thumbnail" alt="å›¾ç‰‡"></p>
<p>è¿™æ˜¯æˆ‘ä»¬é‡åˆ°çš„ç¬¬ä¸€ä¸ªçº¿ç¨‹çš„ç»†èŠ‚ã€‚å¯¹æˆ‘ä»¬æ¥è¯´æœ‰è¶£çš„éƒ¨åˆ†æ˜¯ï¼š</p>
<p><img src="https://uploader.shimo.im/f/oBHnRyDQWvU0RxZP.png!thumbnail" alt="å›¾ç‰‡"></p>
<p>åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªä»£ç è°ƒç”¨ï¼ŒGameHub.OnDisconnected()è¯¥ä»£ç è§¦å‘äº†æœ‰é—®é¢˜çš„æ“ä½œï¼Œä½†æ˜¯åœ¨æ­¤è°ƒç”¨ä¹‹å‰ï¼Œæˆ‘ä»¬æœ‰ä¸¤ä¸ªDictionaryè°ƒç”¨ï¼Œå®ƒä»¬å¯ä»¥ä½¿æ‚¨å¯¹å‘ç”Ÿçš„äº‹æƒ…æœ‰æ‰€äº†è§£ã€‚è®©æˆ‘ä»¬çœ‹ä¸€ä¸‹.NETä»£ç ï¼Œçœ‹çœ‹è¯¥æ–¹æ³•åœ¨åšä»€ä¹ˆï¼š</p>
<p>public override Task OnDisconnected() {</p>
<pre><code>try

{

    var userId = GetUserId();

    string connId;

    if (onlineSessions.TryGetValue(userId, out connId))

        onlineSessions.Remove(userId);

}

catch (Exception)

{

    // ignored

}

return base.OnDisconnected();

}</code></pre><p>æˆ‘ä»¬æ˜¾ç„¶åœ¨è¿™é‡Œæœ‰é—®é¢˜ã€‚æŠ¥å‘Šçš„è°ƒç”¨å †æ ˆè¯´é—®é¢˜å‡ºåœ¨å­—å…¸ä¸Šï¼Œåœ¨è¿™æ®µä»£ç ä¸­æˆ‘ä»¬æ­£åœ¨è®¿é—®å­—å…¸ï¼Œç‰¹åˆ«æ˜¯å¼•èµ·é—®é¢˜çš„é‚£ä¸€è¡Œæ˜¯ï¼š</p>
<p>if (onlineSessions.TryGetValue(userId, out connId))</p>
<p>è¿™æ˜¯å­—å…¸å£°æ˜ï¼š</p>
<p>static Dictionary&lt;int, string&gt; onlineSessions = new Dictionary&lt;int, string&gt;();</p>
<h2 id="NETä»£ç æœ‰ä»€ä¹ˆé—®é¢˜ï¼Ÿ"><a href="#NETä»£ç æœ‰ä»€ä¹ˆé—®é¢˜ï¼Ÿ" class="headerlink" title=".NETä»£ç æœ‰ä»€ä¹ˆé—®é¢˜ï¼Ÿ"></a>.NETä»£ç æœ‰ä»€ä¹ˆé—®é¢˜ï¼Ÿ</h2><p>å…·æœ‰é¢å‘å¯¹è±¡ç¼–ç¨‹ç»éªŒçš„æ¯ä¸ªäººéƒ½çŸ¥é“é™æ€å˜é‡å°†ç”±æ­¤ç±»çš„æ‰€æœ‰å®ä¾‹å…±äº«ã€‚è®©æˆ‘ä»¬æ›´æ·±å…¥åœ°äº†è§£.NETä¸–ç•Œä¸­é™æ€çš„å«ä¹‰ã€‚</p>
<p>æ ¹æ®.NET Cï¼ƒè§„èŒƒï¼š</p>
<blockquote>
<p>ä½¿ç”¨<a href="https://msdn.microsoft.com/en-us/library/98f28cdx.aspx" target="_blank" rel="noopener">static</a>ä¿®é¥°ç¬¦å£°æ˜ä¸€ä¸ªé™æ€æˆå‘˜ï¼Œè¯¥æˆå‘˜å±äºç±»å‹æœ¬èº«è€Œä¸æ˜¯ç‰¹å®šå¯¹è±¡ã€‚</p>
</blockquote>
<p>è¿™å°±æ˜¯.NET Cï¼ƒè¯­è¨€è§„èŒƒå…³äº<a href="https://msdn.microsoft.com/en-us/library/79b3xss3.aspx" target="_blank" rel="noopener">é™æ€ç±»å’Œæˆå‘˜çš„è¯´æ˜</a>ï¼š</p>
<blockquote>
<p>ä¸æ‰€æœ‰ç±»ç±»å‹ä¸€æ ·ï¼Œå½“åŠ è½½å¼•ç”¨è¯¥ç±»çš„ç¨‹åºæ—¶ï¼Œ.NET Frameworkå…¬å…±è¯­è¨€è¿è¡Œåº“ï¼ˆCLRï¼‰å°†åŠ è½½é™æ€ç±»çš„ç±»å‹ä¿¡æ¯ã€‚ç¨‹åºæ— æ³•ç¡®åˆ‡æŒ‡å®šä½•æ—¶åŠ è½½ç±»ã€‚ä½†æ˜¯ï¼Œå¯ä»¥ä¿è¯åœ¨ç¨‹åºä¸­é¦–æ¬¡å¼•ç”¨è¯¥ç±»ä¹‹å‰ï¼Œå°†å…¶åŠ è½½å¹¶åˆå§‹åŒ–å…¶å­—æ®µå¹¶è°ƒç”¨å…¶é™æ€æ„é€ å‡½æ•°ã€‚é™æ€æ„é€ å‡½æ•°ä»…è¢«è°ƒç”¨ä¸€æ¬¡ï¼Œå¹¶ä¸”é™æ€ç±»åœ¨ç¨‹åºæ‰€åœ¨çš„åº”ç”¨ç¨‹åºåŸŸçš„ç”Ÿå­˜æœŸå†…ä¿ç•™åœ¨å†…å­˜ä¸­ã€‚<br>éé™æ€ç±»å¯ä»¥åŒ…å«é™æ€æ–¹æ³•ï¼Œå­—æ®µï¼Œå±æ€§æˆ–äº‹ä»¶ã€‚å³ä½¿æ²¡æœ‰åˆ›å»ºè¯¥ç±»çš„å®ä¾‹ï¼Œè¯¥é™æ€æˆå‘˜ä¹Ÿå¯ä»¥åœ¨è¯¥ç±»ä¸Šè°ƒç”¨ã€‚å§‹ç»ˆé€šè¿‡ç±»åç§°è€Œä¸æ˜¯å®ä¾‹åç§°è®¿é—®é™æ€æˆå‘˜ã€‚æ— è®ºåˆ›å»ºå¤šå°‘ä¸ªç±»å®ä¾‹ï¼Œé™æ€æˆå‘˜åªæœ‰ä¸€ä¸ªå‰¯æœ¬ã€‚é™æ€æ–¹æ³•å’Œå±æ€§æ— æ³•è®¿é—®å…¶åŒ…å«ç±»å‹çš„éé™æ€å­—æ®µå’Œäº‹ä»¶ï¼Œå¹¶ä¸”é™¤éåœ¨æ–¹æ³•å‚æ•°ä¸­æ˜¾å¼ä¼ é€’äº†å®ä¾‹å˜é‡ï¼Œå¦åˆ™å®ƒä»¬æ— æ³•è®¿é—®ä»»ä½•å¯¹è±¡çš„å®ä¾‹å˜é‡ã€‚</p>
</blockquote>
<p>è¿™æ„å‘³ç€é™æ€æˆå‘˜å±äºç±»å‹æœ¬èº«ï¼Œè€Œä¸æ˜¯å¯¹è±¡ã€‚å®ƒä»¬ä¹Ÿç”±CLRåŠ è½½åˆ°åº”ç”¨ç¨‹åºåŸŸä¸­ï¼Œå› æ­¤é™æ€æˆå‘˜å±äºæ‰¿è½½åº”ç”¨ç¨‹åºçš„è¿›ç¨‹ï¼Œè€Œä¸æ˜¯ç‰¹å®šçº¿ç¨‹ã€‚</p>
<p>é‰´äºWebç¯å¢ƒæ˜¯å¤šçº¿ç¨‹ç¯å¢ƒï¼Œå› ä¸ºæ¯ä¸ªè¯·æ±‚éƒ½æ˜¯ç”±w3wp.exeè¿›ç¨‹äº§ç”Ÿçš„æ–°çº¿ç¨‹ï¼›è€ƒè™‘åˆ°é™æ€æˆå‘˜æ˜¯è¯¥è¿‡ç¨‹çš„ä¸€éƒ¨åˆ†ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šé‡åˆ°ä»¥ä¸‹æƒ…å†µï¼šå‡ ä¸ªä¸åŒçš„çº¿ç¨‹å°è¯•è®¿é—®é™æ€ï¼ˆç”±å¤šä¸ªçº¿ç¨‹å…±äº«çš„ï¼‰å˜é‡çš„æ•°æ®ï¼Œè¿™æœ€ç»ˆå¯èƒ½ä¼šå¯¼è‡´å¤šçº¿ç¨‹é—®é¢˜ã€‚</p>
<p>çº¿ç¨‹å®‰å…¨æ€§ä¸‹çš„Dictionary <a href="https://msdn.microsoft.com/en-us/library/xfhwa508%28v=vs.100%29.aspx" target="_blank" rel="noopener">æ–‡æ¡£</a>å£°æ˜ä»¥ä¸‹å†…å®¹ï¼š</p>
<blockquote>
<p>Dictionary&lt;TKey, TValue&gt;åªè¦ä¸ä¿®æ”¹é›†åˆï¼ŒA å°±å¯ä»¥åŒæ—¶æ”¯æŒå¤šä¸ªé˜…è¯»å™¨ã€‚å³ä½¿è¿™æ ·ï¼Œé€šè¿‡é›†åˆè¿›è¡Œæšä¸¾æœ¬è´¨ä¸Šä¹Ÿä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„è¿‡ç¨‹ã€‚åœ¨æå°‘çš„æšä¸¾ä¸å†™è®¿é—®ç«äº‰çš„æƒ…å†µä¸‹ï¼Œå¿…é¡»åœ¨æ•´ä¸ªæšä¸¾æœŸé—´é”å®šé›†åˆã€‚è¦å…è®¸å¤šä¸ªçº¿ç¨‹è®¿é—®è¯¥é›†åˆè¿›è¡Œè¯»å†™ï¼Œæ‚¨å¿…é¡»å®ç°è‡ªå·±çš„åŒæ­¥ã€‚</p>
</blockquote>
<p>æ­¤å£°æ˜è§£é‡Šäº†ä¸ºä»€ä¹ˆæˆ‘ä»¬å¯èƒ½ä¼šé‡åˆ°æ­¤é—®é¢˜ã€‚æ ¹æ®è½¬å‚¨ä¿¡æ¯ï¼Œé—®é¢˜å‡ºåœ¨å­—å…¸çš„FindEntryæ–¹æ³•ä¸Šï¼š</p>
<p><img src="https://uploader.shimo.im/f/RrbDyIKOrqQQ2qt0.png!thumbnail" alt="å›¾ç‰‡"></p>
<p>å¦‚æœæŸ¥çœ‹å­—å…¸çš„FindEntry <a href="http://referencesource.microsoft.com/#mscorlib/system/collections/generic/dictionary.cs,bcd13bb775d408f1" target="_blank" rel="noopener">å®ç°ï¼Œ</a>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¯¥æ–¹æ³•éå†å†…éƒ¨ç»“æ„ï¼ˆå­˜å‚¨æ¡¶ï¼‰ä»¥æŸ¥æ‰¾å€¼ã€‚</p>
<p>å› æ­¤ï¼Œä»¥ä¸‹.NETä»£ç æšä¸¾äº†é›†åˆï¼Œè¿™ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„æ“ä½œã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">public override Task OnDisconnected() &#123;</span><br><span class="line">    	try</span><br><span class="line">    	&#123;</span><br><span class="line">        	var userId = GetUserId();</span><br><span class="line">        	string connId;</span><br><span class="line">        	if (onlineSessions.TryGetValue(userId, out connId))</span><br><span class="line">            	onlineSessions.Remove(userId);</span><br><span class="line">    	&#125;</span><br><span class="line">    	catch (Exception)</span><br><span class="line">    	&#123;</span><br><span class="line">        	// ignored</span><br><span class="line">    	&#125;</span><br><span class="line">    	return base.OnDisconnected();</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>

<h2 id="ç»“è®º"><a href="#ç»“è®º" class="headerlink" title="ç»“è®º"></a>ç»“è®º</h2><p>æ­£å¦‚æˆ‘ä»¬åœ¨è½¬å‚¨ä¸­çœ‹åˆ°çš„é‚£æ ·ï¼Œæœ‰å¤šä¸ªçº¿ç¨‹è¯•å›¾åŒæ—¶è¿­ä»£å’Œä¿®æ”¹å…±äº«èµ„æºï¼ˆé™æ€å­—å…¸ï¼‰ï¼Œæœ€ç»ˆå¯¼è‡´è¿­ä»£è¿›å…¥æ— é™å¾ªç¯ï¼Œä»è€Œå¯¼è‡´çº¿ç¨‹æ¶ˆè€—è¶…è¿‡90ï¼…çš„CPUã€‚ ã€‚</p>
<p>æœ‰å‡ ç§å¯èƒ½çš„è§£å†³æ–¹æ¡ˆã€‚æˆ‘ä»¬é¦–å…ˆå®ç°çš„æ–¹æ³•æ˜¯é”å®šå’ŒåŒæ­¥å¯¹å­—å…¸çš„è®¿é—®ï¼Œä½†ä¼šæŸå¤±æ€§èƒ½ã€‚é‚£æ—¶æœåŠ¡å™¨æ¯å¤©éƒ½å´©æºƒï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦å°½å¿«è§£å†³æ­¤é—®é¢˜ã€‚å³ä½¿è¿™ä¸æ˜¯æœ€ä½³è§£å†³æ–¹æ¡ˆï¼Œå®ƒä¹Ÿè§£å†³äº†è¯¥é—®é¢˜ã€‚</p>
<p>è§£å†³è¿™ä¸ªé—®é¢˜çš„ä¸‹ä¸€æ­¥æ˜¯åˆ†æä»£ç å¹¶æ‰¾åˆ°æœ€ä¼˜è§£å†³æ–¹æ¡ˆã€‚é‡æ„ä»£ç æ˜¯ä¸€ä¸ªé€‰é¡¹:æ–°çš„ConcurrentDictionaryç±»å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå› ä¸ºå®ƒåªé”å®šåœ¨ä¸€ä¸ªæ¡¶çº§åˆ«ï¼Œè¿™å°†æé«˜æ•´ä½“æ€§èƒ½ã€‚å°½ç®¡è¿™æ˜¯ä¸€å¤§æ­¥ï¼Œè¿˜éœ€è¦è¿›ä¸€æ­¥çš„åˆ†æã€‚</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://techq.xyz/2020/04/06/æŠ€æœ¯/memory-manage-in-c#/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="æºªæº">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="xiyuanæŠ€æœ¯åœˆ">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2020/04/06/æŠ€æœ¯/memory-manage-in-c#/" class="post-title-link" itemprop="url">.NETä¸­çš„å†…å­˜ç®¡ç†</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2020-04-06 16:28:00" itemprop="dateCreated datePublished" datetime="2020-04-06T16:28:00+00:00">2020-04-06</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2021-04-25 11:04:00" itemprop="dateModified" datetime="2021-04-25T11:04:00+00:00">2021-04-25</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/æŠ€æœ¯/" itemprop="url" rel="index"><span itemprop="name">æŠ€æœ¯</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="NETä¸­çš„å†…å­˜ç®¡ç†"><a href="#NETä¸­çš„å†…å­˜ç®¡ç†" class="headerlink" title=".NETä¸­çš„å†…å­˜ç®¡ç†"></a>.NETä¸­çš„å†…å­˜ç®¡ç†</h1><p> *<em>èµ„æºåˆ†é…<br>*</em><br>Microsoft .NETå…¬å…±è¯­è¨€è¿è¡Œæ—¶è¦æ±‚ä»æ‰˜ç®¡å †åˆ†é…æ‰€æœ‰èµ„æºã€‚å½“åº”ç”¨ç¨‹åºä¸å†éœ€è¦å¯¹è±¡æ—¶ï¼Œå®ƒä»¬å°†è‡ªåŠ¨é‡Šæ”¾ã€‚</p>
<p>åˆå§‹åŒ–è¿›ç¨‹åï¼Œè¿è¡Œæ—¶å°†ä¿ç•™åœ°å€ç©ºé—´çš„è¿ç»­åŒºåŸŸï¼Œè¯¥åŒºåŸŸæœ€åˆæ²¡æœ‰ä¸ºå…¶åˆ†é…å­˜å‚¨ç©ºé—´ã€‚è¯¥åœ°å€ç©ºé—´åŒºåŸŸæ˜¯æ‰˜ç®¡å †ã€‚å †è¿˜ç»´æŠ¤ä¸€ä¸ªæŒ‡é’ˆã€‚è¯¥æŒ‡é’ˆæŒ‡ç¤ºä¸‹ä¸€ä¸ªå¯¹è±¡å°†åœ¨å †ä¸­åˆ†é…çš„ä½ç½®ã€‚æœ€åˆï¼Œå°†æŒ‡é’ˆè®¾ç½®ä¸ºä¿ç•™åœ°å€ç©ºé—´åŒºåŸŸçš„åŸºåœ°å€ã€‚</p>
<p>åº”ç”¨ç¨‹åºä½¿ç”¨newè¿ç®—ç¬¦åˆ›å»ºä¸€ä¸ªå¯¹è±¡ã€‚è¯¥è¿ç®—ç¬¦é¦–å…ˆç¡®ä¿æ–°å¯¹è±¡æ‰€éœ€çš„å­—èŠ‚é€‚åˆä¿ç•™åŒºåŸŸï¼ˆå¿…è¦æ—¶è¿›è¡Œå­˜å‚¨ï¼‰ã€‚å¦‚æœå¯¹è±¡åˆé€‚ï¼Œåˆ™æŒ‡é’ˆæŒ‡å‘å †ä¸­çš„å¯¹è±¡ï¼Œè°ƒç”¨è¯¥å¯¹è±¡çš„æ„é€ å‡½æ•°ï¼Œå¹¶ä¸”newè¿ç®—ç¬¦è¿”å›è¯¥å¯¹è±¡çš„åœ°å€ã€‚</p>
<p><img src="https://www.c-sharpcorner.com/UploadFile/tkagarwal/MemoryManagementInNet11232005064832AM/Images/Memory3.gif" alt="Memory3.gif"></p>
<p>ä¸Šå›¾æ˜¾ç¤ºäº†ä¸€ä¸ªç”±ä¸‰ä¸ªå¯¹è±¡ç»„æˆçš„æ‰˜ç®¡å †ï¼šAï¼ŒBå’ŒCã€‚è¦åˆ†é…çš„ä¸‹ä¸€ä¸ªå¯¹è±¡å°†æ”¾ç½®åœ¨NextObjPtræŒ‡å‘çš„ä½ç½®ï¼ˆç´§éšå¯¹è±¡Cä¹‹åï¼‰ã€‚</p>
<p>å½“åº”ç”¨ç¨‹åºè°ƒç”¨newè¿ç®—ç¬¦åˆ›å»ºå¯¹è±¡æ—¶ï¼Œè¯¥åŒºåŸŸä¸­å¯èƒ½æ²¡æœ‰è¶³å¤Ÿçš„åœ°å€ç©ºé—´åˆ†é…ç»™è¯¥å¯¹è±¡ã€‚å †é€šè¿‡å°†æ–°å¯¹è±¡çš„å¤§å°æ·»åŠ åˆ°NextObjPtræ¥æ£€æµ‹åˆ°è¿™ä¸€ç‚¹ã€‚å¦‚æœNextObjPtrè¶…å‡ºåœ°å€ç©ºé—´åŒºåŸŸçš„æœ«å°¾ï¼Œåˆ™å †å·²æ»¡ï¼Œå¿…é¡»æ‰§è¡Œæ”¶é›†ã€‚</p>
<p>å®é™…ä¸Šï¼Œå½“ç¬¬0ä»£å®Œå…¨å¡«æ»¡æ—¶å‘ç”Ÿæ”¶é›†ã€‚ç®€è€Œè¨€ä¹‹ï¼Œç”Ÿæˆæ˜¯ç”±åƒåœ¾æ”¶é›†å™¨å®ç°ä»¥æé«˜æ€§èƒ½çš„ä¸€ç§æœºåˆ¶ã€‚è¿™ä¸ªæƒ³æ³•æ˜¯ï¼Œæ–°åˆ›å»ºçš„å¯¹è±¡æ˜¯å¹´è½»ä¸€ä»£çš„ä¸€éƒ¨åˆ†ï¼Œè€Œåœ¨åº”ç”¨ç¨‹åºç”Ÿå‘½å‘¨æœŸçš„æ—©æœŸåˆ›å»ºçš„å¯¹è±¡æ˜¯è€ä¸€ä»£çš„å¯¹è±¡ã€‚å°†å¯¹è±¡åˆ†æˆå‡ ä»£å¯ä»¥ä½¿åƒåœ¾æ”¶é›†å™¨æ”¶é›†ç‰¹å®šçš„ä¸–ä»£ï¼Œè€Œä¸æ˜¯æ”¶é›†æ‰˜ç®¡å †ä¸­çš„æ‰€æœ‰å¯¹è±¡ã€‚</p>
<p><strong>åƒåœ¾æ”¶é›†ç®—æ³•</strong></p>
<p>åƒåœ¾æ”¶é›†å™¨æ£€æŸ¥ä»¥æŸ¥çœ‹å †ä¸­æ˜¯å¦æœ‰ä¸å†ç”±åº”ç”¨ç¨‹åºä½¿ç”¨çš„å¯¹è±¡ã€‚å¦‚æœå­˜åœ¨æ­¤ç±»å¯¹è±¡ï¼Œåˆ™å¯ä»¥å›æ”¶è¿™äº›å¯¹è±¡ä½¿ç”¨çš„å†…å­˜ã€‚ï¼ˆå¦‚æœæ²¡æœ‰æ›´å¤šçš„å†…å­˜å¯ç”¨äºå †ï¼Œåˆ™newè¿ç®—ç¬¦å°†å¼•å‘OutOfMemoryExceptionã€‚ï¼‰</p>
<p>æ¯ä¸ªåº”ç”¨ç¨‹åºéƒ½æœ‰ä¸€ç»„æ ¹ã€‚æ ¹æ ‡è¯†å­˜å‚¨ä½ç½®ï¼Œè¿™äº›å­˜å‚¨ä½ç½®å¼•ç”¨æ‰˜ç®¡å †ä¸Šçš„å¯¹è±¡æˆ–è®¾ç½®ä¸ºnullçš„å¯¹è±¡ã€‚ä¾‹å¦‚ï¼Œåº”ç”¨ç¨‹åºä¸­çš„æ‰€æœ‰å…¨å±€å’Œé™æ€å¯¹è±¡æŒ‡é’ˆéƒ½è¢«è§†ä¸ºåº”ç”¨ç¨‹åºæ ¹ç›®å½•çš„ä¸€éƒ¨åˆ†ã€‚å¦å¤–ï¼Œçº¿ç¨‹å †æ ˆä¸Šçš„ä»»ä½•å±€éƒ¨å˜é‡/å‚æ•°å¯¹è±¡æŒ‡é’ˆéƒ½è¢«è§†ä¸ºåº”ç”¨ç¨‹åºæ ¹ç›®å½•çš„ä¸€éƒ¨åˆ†ã€‚æœ€åï¼Œä»»ä½•åŒ…å«æŒ‡å‘æ‰˜ç®¡å †ä¸­å¯¹è±¡çš„æŒ‡é’ˆçš„CPUå¯„å­˜å™¨ä¹Ÿè¢«è§†ä¸ºåº”ç”¨ç¨‹åºæ ¹ç›®å½•çš„ä¸€éƒ¨åˆ†ã€‚æ´»åŠ¨æ ¹çš„åˆ—è¡¨ç”±å³æ—¶ï¼ˆJITï¼‰ç¼–è¯‘å™¨å’Œå…¬å…±è¯­è¨€è¿è¡Œæ—¶ç»´æŠ¤ï¼Œå¹¶ä¸”å¯ä»¥ç”±åƒåœ¾æ”¶é›†å™¨çš„ç®—æ³•è®¿é—®ã€‚</p>
<p>å½“åƒåœ¾æ”¶é›†å™¨å¼€å§‹è¿è¡Œæ—¶ï¼Œå®ƒå‡å®šå †ä¸­çš„æ‰€æœ‰å¯¹è±¡éƒ½æ˜¯åƒåœ¾ã€‚æ¢å¥è¯è¯´ï¼Œå®ƒå‡å®šåº”ç”¨ç¨‹åºçš„ä»»ä½•æ ¹éƒ½æ²¡æœ‰å¼•ç”¨å †ä¸­çš„ä»»ä½•å¯¹è±¡ã€‚ç°åœ¨ï¼Œåƒåœ¾æ”¶é›†å™¨å¼€å§‹éå†æ ¹ç›®å½•ï¼Œå¹¶ä¸ºä»æ ¹ç›®å½•å¯è®¿é—®çš„æ‰€æœ‰å¯¹è±¡å»ºç«‹å›¾å½¢ã€‚ä¾‹å¦‚ï¼Œåƒåœ¾æ”¶é›†å™¨å¯ä»¥å®šä½ä¸€ä¸ªæŒ‡å‘å †ä¸­å¯¹è±¡çš„å…¨å±€å˜é‡ã€‚</p>
<p>ä¸‹å›¾æ˜¾ç¤ºäº†å…·æœ‰å‡ ä¸ªå·²åˆ†é…å¯¹è±¡çš„å †ï¼Œå…¶ä¸­åº”ç”¨ç¨‹åºçš„æ ¹ç›´æ¥å¼•ç”¨å¯¹è±¡Aï¼ŒCï¼ŒDå’ŒFã€‚æ‰€æœ‰è¿™äº›å¯¹è±¡éƒ½æˆä¸ºå›¾å½¢çš„ä¸€éƒ¨åˆ†ã€‚åœ¨æ·»åŠ å¯¹è±¡Dæ—¶ï¼Œæ”¶é›†å™¨ä¼šæ³¨æ„åˆ°è¯¥å¯¹è±¡å¼•ç”¨äº†å¯¹è±¡Hï¼Œå¹¶ä¸”å¯¹è±¡Hä¹Ÿå·²æ·»åŠ åˆ°å›¾ä¸­ã€‚æ”¶é›†å™¨å°†ç»§ç»­é€’å½’éå†æ‰€æœ‰å¯åˆ°è¾¾çš„å¯¹è±¡ã€‚</p>
<p>å›¾çš„è¿™ä¸€éƒ¨åˆ†å®Œæˆåï¼Œåƒåœ¾æ”¶é›†å™¨å°†æ£€æŸ¥ä¸‹ä¸€ä¸ªæ ¹å¹¶å†æ¬¡éå†å¯¹è±¡ã€‚å½“åƒåœ¾æ”¶é›†å™¨ä»ä¸€ä¸ªå¯¹è±¡ç§»åŠ¨åˆ°å¦ä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œå¦‚æœå®ƒè¯•å›¾å°†ä¸€ä¸ªå¯¹è±¡æ·»åŠ åˆ°å…ˆå‰æ·»åŠ çš„å›¾å½¢ä¸­ï¼Œåˆ™åƒåœ¾æ”¶é›†å™¨å¯ä»¥åœæ­¢æ²¿è¯¥è·¯å¾„ç§»åŠ¨ã€‚è¿™æœ‰ä¸¤ä¸ªç›®çš„ã€‚é¦–å…ˆï¼Œå®ƒä¸ä¼šå¤šæ¬¡éå†ä¸€ç»„å¯¹è±¡ï¼Œå› æ­¤å¯ä»¥æ˜¾ç€æé«˜æ€§èƒ½ã€‚å…¶æ¬¡ï¼Œå¦‚æœæ‚¨æœ‰ä»»ä½•å¾ªç¯é“¾æ¥çš„å¯¹è±¡åˆ—è¡¨ï¼Œå®ƒå¯ä»¥é˜²æ­¢æ— é™å¾ªç¯ã€‚</p>
<p>ä¸€æ—¦æ£€æŸ¥å®Œæ‰€æœ‰çš„æ ¹ï¼Œåƒåœ¾æ”¶é›†å™¨çš„å›¾å½¢å°±ä¼šåŒ…å«ä»åº”ç”¨ç¨‹åºçš„æ ¹ä»¥æŸç§æ–¹å¼å¯ä»¥è®¿é—®çš„æ‰€æœ‰å¯¹è±¡çš„é›†åˆã€‚åº”ç”¨ç¨‹åºæ— æ³•è®¿é—®è¯¥å›¾ä¸­æœªåŒ…å«çš„ä»»ä½•å¯¹è±¡ï¼Œå› æ­¤å°†å…¶è§†ä¸ºåƒåœ¾ã€‚</p>
<p>åƒåœ¾æ”¶é›†å™¨ç°åœ¨çº¿æ€§åœ°éå†å †ï¼Œå¯»æ‰¾åƒåœ¾å¯¹è±¡çš„è¿ç»­å—ï¼ˆç°åœ¨è¢«è®¤ä¸ºæ˜¯å¯ç”¨ç©ºé—´ï¼‰ã€‚ç„¶åï¼Œåƒåœ¾æ”¶é›†å™¨å°†éåƒåœ¾å¯¹è±¡å‘ä¸‹ç§»åŠ¨åˆ°å†…å­˜ä¸­ï¼ˆä½¿ç”¨æ ‡å‡†çš„memcpyå‡½æ•°ï¼‰ï¼Œä»è€Œæ¶ˆé™¤äº†å †ä¸­çš„æ‰€æœ‰é—´éš™ã€‚å½“ç„¶ï¼Œåœ¨å†…å­˜ä¸­ç§»åŠ¨å¯¹è±¡ä¼šä½¿æŒ‡å‘è¯¥å¯¹è±¡çš„æ‰€æœ‰æŒ‡é’ˆæ— æ•ˆã€‚å› æ­¤ï¼Œåƒåœ¾æ”¶é›†å™¨å¿…é¡»ä¿®æ”¹åº”ç”¨ç¨‹åºçš„æ ¹ï¼Œä»¥ä¾¿æŒ‡é’ˆæŒ‡å‘å¯¹è±¡çš„æ–°ä½ç½®ã€‚å¦å¤–ï¼Œå¦‚æœä»»ä½•å¯¹è±¡åŒ…å«æŒ‡å‘å¦ä¸€ä¸ªå¯¹è±¡çš„æŒ‡é’ˆï¼Œåˆ™åƒåœ¾å›æ”¶å™¨è¿˜è´Ÿè´£æ›´æ­£è¿™äº›æŒ‡é’ˆã€‚</p>
<p>ä¸‹å›¾æ˜¾ç¤ºäº†æ”¶é›†åçš„æ‰˜ç®¡å †ã€‚</p>
<p><img src="https://www.c-sharpcorner.com/UploadFile/tkagarwal/MemoryManagementInNet11232005064832AM/Images/Memory5.gif" alt="Memory5.gif"></p>
<p>åœ¨è¯†åˆ«å®Œæ‰€æœ‰åƒåœ¾ä¹‹åï¼Œæ‰€æœ‰éåƒåœ¾éƒ½å·²å‹ç¼©ï¼Œæ‰€æœ‰éåƒåœ¾æŒ‡é’ˆéƒ½å·²å›ºå®šï¼ŒNextObjPtrå®šä½åœ¨æœ€åä¸€ä¸ªéåƒåœ¾å¯¹è±¡ä¹‹åã€‚æ­¤æ—¶ï¼Œå†æ¬¡å°è¯•æ–°æ“ä½œï¼Œå¹¶æˆåŠŸåˆ›å»ºåº”ç”¨ç¨‹åºè¯·æ±‚çš„èµ„æºã€‚</p>
<p>GCä¼šå¯¹æ€§èƒ½äº§ç”Ÿé‡å¤§å½±å“ï¼Œè¿™æ˜¯ä½¿ç”¨æ‰˜ç®¡å †çš„ä¸»è¦ç¼ºç‚¹ã€‚ä½†æ˜¯ï¼Œè¯·è®°ä½ï¼ŒGCä»…åœ¨å †å·²æ»¡æ—¶æ‰å‘ç”Ÿï¼Œå¹¶ä¸”åœ¨æ­¤ä¹‹å‰ï¼Œæ‰˜ç®¡å †è¦æ¯”Cè¿è¡Œæ—¶å †å¿«å¾—å¤šã€‚è¿è¡Œæ—¶çš„åƒåœ¾æ”¶é›†å™¨è¿˜ä½¿ç”¨Generationsæä¾›äº†ä¸€äº›ä¼˜åŒ–ï¼Œå¯ä»¥å¤§å¤§æé«˜åƒåœ¾æ”¶é›†çš„æ€§èƒ½ã€‚</p>
<p>æ‚¨ä¸å†éœ€è¦å®ç°ç®¡ç†åº”ç”¨ç¨‹åºä½¿ç”¨çš„ä»»ä½•èµ„æºçš„ç”Ÿå­˜æœŸçš„ä»»ä½•ä»£ç ã€‚ç°åœ¨ï¼Œä¸å¯èƒ½æ³„æ¼èµ„æºï¼Œå› ä¸ºå¯ä»¥åœ¨æŸä¸ªæ—¶å€™æ”¶é›†ä»åº”ç”¨ç¨‹åºçš„æ ¹ç›®å½•æ— æ³•è®¿é—®çš„ä»»ä½•èµ„æºã€‚æ­¤å¤–ï¼Œä¹Ÿæ— æ³•è®¿é—®å·²é‡Šæ”¾çš„èµ„æºï¼Œå› ä¸ºå¦‚æœå¯è®¿é—®èµ„æºå°†ä¸ä¼šè¢«é‡Šæ”¾ã€‚å¦‚æœæ— æ³•è®¿é—®ï¼Œåˆ™æ‚¨çš„åº”ç”¨ç¨‹åºæ— æ³•è®¿é—®å®ƒã€‚</p>
<p>ä»¥ä¸‹ä»£ç æ¼”ç¤ºäº†å¦‚ä½•åˆ†é…å’Œç®¡ç†èµ„æºï¼š</p>
<p> <code>class Application
{
public static int Main(String[] args)
{
// ArrayList object created in heap, myArray is now in root
ArrayList myArray = new ArrayList();
// Create 10000 objects in the heap
for (int x = 0; x &lt; 10000; x++)
{
myArray.Add(new Object()); // Object object created in heap
}
// Right now, myArray is a root (on the thread&#39;s stack). So,
// myArray is reachable and the 10000 objects it points to are also reachable.
Console.WriteLine(myArray.Count);
// After the last reference to myArray in the code, myArray is not a root.
// Note that the method doesn&#39;t have to return, the JIT compiler knows
// to make myArray not a root after the last reference to it in the code.
// Since myArray is not a root, all 10001 objects are not reachable
// and are considered garbage. However, the objects are not
// collected until a GC is performed.
}
}</code></p>
<p>å¦‚æœGCéå¸¸å‡ºè‰²ï¼Œé‚£ä¹ˆæ‚¨å¯èƒ½æƒ³çŸ¥é“ä¸ºä»€ä¹ˆå®ƒä¸åœ¨ANSI C ++ä¸­ã€‚åŸå› æ˜¯åƒåœ¾æ”¶é›†å™¨å¿…é¡»èƒ½å¤Ÿæ ‡è¯†åº”ç”¨ç¨‹åºçš„æ ¹ï¼Œè¿˜å¿…é¡»èƒ½å¤Ÿæ‰¾åˆ°æ‰€æœ‰å¯¹è±¡æŒ‡é’ˆã€‚C ++çš„é—®é¢˜åœ¨äºå®ƒå…è®¸å°†æŒ‡é’ˆä»ä¸€ç§ç±»å‹è½¬æ¢ä¸ºå¦ä¸€ç§ç±»å‹ï¼Œå¹¶ä¸”æ— æ³•çŸ¥é“æŒ‡é’ˆæ‰€æŒ‡çš„æ˜¯ä»€ä¹ˆã€‚åœ¨å…¬å…±è¯­è¨€è¿è¡Œåº“ä¸­ï¼Œæ‰˜ç®¡å †å§‹ç»ˆçŸ¥é“å¯¹è±¡çš„å®é™…ç±»å‹ï¼Œå¹¶ä¸”å…ƒæ•°æ®ä¿¡æ¯ç”¨äºç¡®å®šå¯¹è±¡çš„å“ªäº›æˆå‘˜å¼•ç”¨å…¶ä»–å¯¹è±¡ã€‚</p>
<p><strong>ä¸–ä»£</strong></p>
<p>çº¯ç²¹ä¸ºäº†æé«˜æ€§èƒ½è€Œå­˜åœ¨çš„åƒåœ¾æ”¶é›†å™¨çš„ä¸€ä¸ªåŠŸèƒ½ç§°ä¸ºâ€œä¸–ä»£â€ã€‚åˆ†ä»£åƒåœ¾æ”¶é›†å™¨ï¼ˆä¹Ÿç§°ä¸ºä¸´æ—¶åƒåœ¾æ”¶é›†å™¨ï¼‰è¿›è¡Œä»¥ä¸‹å‡è®¾ï¼š</p>
<ul>
<li>å¯¹è±¡è¶Šæ–°ï¼Œå…¶ç”Ÿå­˜æœŸå°±ä¼šè¶ŠçŸ­ã€‚</li>
<li>å¯¹è±¡è¶Šæ—§ï¼Œå…¶å¯¿å‘½å°†è¶Šé•¿ã€‚</li>
<li>è¾ƒæ–°çš„å¯¹è±¡å¾€å¾€å½¼æ­¤ä¹‹é—´å…·æœ‰å¾ˆå¼ºçš„å…³ç³»ï¼Œå¹¶ä¸”ç»å¸¸åœ¨åŒä¸€æ—¶é—´è®¿é—®ã€‚</li>
<li>å‹ç¼©ä¸€éƒ¨åˆ†å †æ¯”å‹ç¼©æ•´ä¸ªå †è¦å¿«ã€‚</li>
</ul>
<p>åˆå§‹åŒ–åï¼Œæ‰˜ç®¡å †ä¸åŒ…å«ä»»ä½•å¯¹è±¡ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œæ·»åŠ åˆ°å †ä¸­çš„å¯¹è±¡è¢«ç§°ä¸ºç¬¬0ä»£ã€‚ç®€è€Œè¨€ä¹‹ï¼Œç¬¬0ä»£ä¸­çš„å¯¹è±¡æ˜¯ä»æœªè¢«åƒåœ¾æ”¶é›†å™¨æ£€æŸ¥è¿‡çš„å¹´è½»å¯¹è±¡ã€‚</p>
<p><img src="https://www.c-sharpcorner.com/UploadFile/tkagarwal/MemoryManagementInNet11232005064832AM/Images/Memory6.gif" alt="Memory6.gif"></p>
<p>ç°åœ¨ï¼Œå¦‚æœå°†æ›´å¤šå¯¹è±¡æ·»åŠ åˆ°å †ä¸­ï¼Œåˆ™å°†å¡«å……å †ï¼Œå¹¶ä¸”å¿…é¡»è¿›è¡Œåƒåœ¾å›æ”¶ã€‚åƒåœ¾æ”¶é›†å™¨åˆ†æå †æ—¶ï¼Œå°†æ„å»ºåƒåœ¾ï¼ˆæ­¤å¤„ä»¥ç»¿è‰²æ˜¾ç¤ºï¼‰å’Œéåƒåœ¾å¯¹è±¡çš„å›¾å½¢ã€‚å¯ä»¥å°†æ”¶é›†åˆ°çš„æ‰€æœ‰å¯¹è±¡å‹ç¼©åˆ°å †çš„æœ€å·¦ä¾§ã€‚è¿™äº›å¯¹è±¡åœ¨æ”¶è—ä¸­å¹¸å­˜ä¸‹æ¥ï¼Œå¹¶ä¸”æ›´æ—§ï¼Œç°åœ¨è¢«è®¤ä¸ºæ˜¯ç¬¬ä¸€ä»£ã€‚</p>
<p><img src="https://www.c-sharpcorner.com/UploadFile/tkagarwal/MemoryManagementInNet11232005064832AM/Images/Memory7.gif" alt="Memory7.gif"></p>
<p>éšç€æ›´å¤šå¯¹è±¡æ·»åŠ åˆ°å †ä¸­ï¼Œè¿™äº›æ–°çš„å¹´è½»å¯¹è±¡å°†æ”¾ç½®åœ¨ç¬¬0ä»£ä¸­ã€‚å¦‚æœå†æ¬¡å¡«å……ç¬¬0ä»£ï¼Œåˆ™ä¼šæ‰§è¡ŒGCã€‚è¿™æ¬¡ï¼Œå°†ç¬¬1ä»£ä¸­å¹¸å­˜çš„æ‰€æœ‰å¯¹è±¡å‹ç¼©å¹¶è§†ä¸ºç¬¬2ä»£ï¼ˆè¯·å‚è§ä¸‹å›¾ï¼‰ã€‚ç°åœ¨å‹ç¼©äº†ç¬¬0ä»£ä¸­çš„æ‰€æœ‰å¹¸å­˜è€…ï¼Œå¹¶è®¤ä¸ºå®ƒä»¬æ˜¯ç¬¬1ä»£ã€‚ç¬¬0ä»£å½“å‰ä¸åŒ…å«ä»»ä½•å¯¹è±¡ï¼Œä½†æ˜¯æ‰€æœ‰æ–°å¯¹è±¡å°†è¿›å…¥ç¬¬0ä»£ã€‚</p>
<p><img src="https://www.c-sharpcorner.com/UploadFile/tkagarwal/MemoryManagementInNet11232005064832AM/Images/Memory8.gif" alt="Memory8.gif"></p>
<p>å½“å‰ï¼Œç¬¬äºŒä»£æ˜¯è¿è¡Œæ—¶çš„åƒåœ¾æ”¶é›†å™¨æ”¯æŒçš„æœ€é«˜ä¸€ä»£ã€‚å½“å°†æ¥å‘ç”Ÿæ”¶é›†æ—¶ï¼Œå½“å‰ç¬¬2ä»£ä¸­å°šå­˜çš„æ‰€æœ‰å¯¹è±¡ä»…ä¿ç•™åœ¨ç¬¬2ä»£ä¸­ã€‚</p>
<p><strong>ä¸–ä»£GCæ€§èƒ½ä¼˜åŒ–</strong></p>
<p>åˆ†ä»£åƒåœ¾æ”¶é›†æé«˜äº†æ€§èƒ½ã€‚å½“å †å¡«æ»¡å¹¶å‘ç”Ÿæ”¶é›†æ—¶ï¼Œåƒåœ¾æ”¶é›†å™¨å¯ä»¥é€‰æ‹©ä»…æ£€æŸ¥ç¬¬0ä»£ä¸­çš„å¯¹è±¡ï¼Œè€Œå¿½ç•¥ä»»ä½•æ›´å¤§çš„åä»£ä¸­çš„å¯¹è±¡ã€‚æ¯•ç«Ÿï¼Œå¯¹è±¡è¶Šæ–°ï¼Œåˆ™é¢„æœŸå¯¿å‘½è¶ŠçŸ­ã€‚å› æ­¤ï¼Œæ”¶é›†å’Œå‹ç¼©ç¬¬0ä»£å¯¹è±¡å¾ˆå¯èƒ½ä¼šä»å †ä¸­å›æ”¶å¤§é‡ç©ºé—´ï¼Œå¹¶ä¸”æ¯”æ”¶é›†å™¨æ£€æŸ¥æ‰€æœ‰ä»£çš„å¯¹è±¡è¦å¿«ã€‚</p>
<p>åˆ†ä»£æ”¶é›†å™¨å¯ä»¥é€šè¿‡ä¸éå†æ‰˜ç®¡å †ä¸­çš„æ¯ä¸ªå¯¹è±¡æ¥æä¾›æ›´å¤šä¼˜åŒ–ã€‚å¦‚æœæ ¹æˆ–å¯¹è±¡å¼•ç”¨çš„æ˜¯æ—§å¯¹è±¡ï¼Œåˆ™åƒåœ¾æ”¶é›†å™¨å¯ä»¥å¿½ç•¥ä»»ä½•è¾ƒæ—§å¯¹è±¡çš„å†…éƒ¨å¼•ç”¨ï¼Œä»è€Œå‡å°‘äº†æ„å»ºå¯è®¿é—®å¯¹è±¡å›¾æ‰€éœ€çš„æ—¶é—´ã€‚å½“ç„¶ï¼Œæ—§å¯¹è±¡å¯èƒ½æ˜¯æŒ‡æ–°å¯¹è±¡ã€‚ä¸ºäº†æ£€æŸ¥è¿™äº›å¯¹è±¡ï¼Œæ”¶é›†å™¨å¯ä»¥åˆ©ç”¨ç³»ç»Ÿçš„å†™ç›‘è§†æ”¯æŒï¼ˆç”±Kernel32.dllä¸­çš„Win32 GetWriteWatchå‡½æ•°æä¾›ï¼‰ã€‚æ­¤æ”¯æŒä½¿æ”¶é›†å™¨çŸ¥é“è‡ªä¸Šæ¬¡æ”¶é›†ä»¥æ¥å·²å°†å“ªäº›æ—§å¯¹è±¡ï¼ˆå¦‚æœæœ‰ï¼‰å†™å…¥äº†ã€‚å¯ä»¥æ£€æŸ¥è¿™äº›ç‰¹å®šçš„æ—§å¯¹è±¡çš„å¼•ç”¨ï¼Œä»¥æŸ¥çœ‹å®ƒä»¬æ˜¯å¦å¼•ç”¨äº†ä»»ä½•æ–°å¯¹è±¡ã€‚</p>
<p>å¦‚æœæ”¶é›†ç¬¬0ä»£æœªæä¾›å¿…è¦çš„å­˜å‚¨é‡ï¼Œåˆ™æ”¶é›†å™¨å¯ä»¥å°è¯•æ”¶é›†ç¬¬1ä»£å’Œç¬¬0ä»£çš„å¯¹è±¡ã€‚å¦‚æœæ‰€æœ‰å…¶ä»–æ“ä½œå‡å¤±è´¥ï¼Œåˆ™æ”¶é›†å™¨å¯ä»¥æ”¶é›†ç¬¬2ä»£ï¼Œç¬¬1ä»£å’Œç¬¬9ä»£çš„æ‰€æœ‰å¯¹è±¡ã€‚ 0ã€‚</p>
<p>å‰é¢æåˆ°çš„ä¸€ç§å‡è®¾æ˜¯ï¼Œè¾ƒæ–°çš„å¯¹è±¡ä¹‹é—´å¾€å¾€å…·æœ‰å¾ˆå¼ºçš„å…³ç³»ï¼Œå¹¶ä¸”ç»å¸¸åœ¨åŒä¸€æ—¶é—´è®¿é—®ã€‚ç”±äºæ–°å¯¹è±¡æ˜¯åœ¨å†…å­˜ä¸­è¿ç»­åˆ†é…çš„ï¼Œå› æ­¤æ‚¨å¯ä»¥ä»å¼•ç”¨çš„ä½ç½®è·å¾—æ€§èƒ½ã€‚æ›´å…·ä½“åœ°è¯´ï¼Œå¾ˆå¯èƒ½æ‰€æœ‰å¯¹è±¡éƒ½å¯ä»¥é©»ç•™åœ¨CPUçš„ç¼“å­˜ä¸­ã€‚æ‚¨çš„åº”ç”¨ç¨‹åºå°†ä»¥æƒŠäººçš„é€Ÿåº¦è®¿é—®è¿™äº›å¯¹è±¡ï¼Œå› ä¸ºCPUå°†èƒ½å¤Ÿæ‰§è¡Œå…¶å¤§å¤šæ•°æ“ä½œï¼Œè€Œä¸ä¼šå¯¼è‡´å¼ºåˆ¶RAMè®¿é—®çš„é«˜é€Ÿç¼“å­˜æœªå‘½ä¸­ã€‚</p>
<p>å¾®è½¯çš„æ€§èƒ½æµ‹è¯•è¡¨æ˜ï¼Œæ‰˜ç®¡å †åˆ†é…æ¯”Win32 HeapAllocå‡½æ•°æ‰§è¡Œçš„æ ‡å‡†åˆ†é…æ›´å¿«ã€‚è¿™äº›æµ‹è¯•è¿˜è¡¨æ˜ï¼Œåœ¨200 MHz Pentiumä¸Šæ‰§è¡Œç¬¬0ä»£å®Œæ•´GCæ‰€éœ€çš„æ—¶é—´å°‘äº1æ¯«ç§’ã€‚Microsoftçš„ç›®æ ‡æ˜¯ä½¿GCèŠ±è´¹çš„æ—¶é—´ä¸æ¯”æ™®é€šé¡µé¢é”™è¯¯å¤šã€‚</p>
<p><strong>Win32å †çš„ç¼ºç‚¹ï¼š</strong></p>
<ul>
<li>å¤§å¤šæ•°å †ï¼ˆä¾‹å¦‚Cè¿è¡Œæ—¶å †ï¼‰åœ¨æ‰¾åˆ°å¯ç”¨ç©ºé—´çš„ä»»ä½•åœ°æ–¹åˆ†é…å¯¹è±¡ã€‚å› æ­¤ï¼Œå¦‚æœæˆ‘è¿ç»­åˆ›å»ºå¤šä¸ªå¯¹è±¡ï¼Œåˆ™è¿™äº›å¯¹è±¡å¾ˆæœ‰å¯èƒ½å°†è¢«å…†å­—èŠ‚çš„åœ°å€ç©ºé—´åˆ†éš”å¼€ã€‚ä½†æ˜¯ï¼Œåœ¨æ‰˜ç®¡å †ä¸­ï¼Œè¿ç»­åˆ†é…å‡ ä¸ªå¯¹è±¡å¯ç¡®ä¿å¯¹è±¡åœ¨å†…å­˜ä¸­æ˜¯è¿ç»­çš„ã€‚</li>
<li>ä»Win32å †åˆ†é…å†…å­˜æ—¶ï¼Œå¿…é¡»æ£€æŸ¥è¯¥å †ä»¥æ‰¾åˆ°å¯ä»¥æ»¡è¶³è¯·æ±‚çš„å†…å­˜å—ã€‚è¿™åœ¨æ‰˜ç®¡å †ä¸­ä¸æ˜¯å¿…éœ€çš„ï¼Œå› ä¸ºæ­¤å¤„å¯¹è±¡åœ¨å†…å­˜ä¸­æ˜¯è¿ç»­çš„ã€‚</li>
<li>åœ¨Win32å †ä¸­ï¼Œå¿…é¡»ç»´æŠ¤å †ç»´æŠ¤çš„æ•°æ®ç»“æ„ã€‚å¦ä¸€æ–¹é¢ï¼Œæ‰˜ç®¡å †ä»…éœ€è¦å¢åŠ å †æŒ‡é’ˆã€‚</li>
</ul>
<p><strong>ç»ˆæ¥å™¨</strong></p>
<p>åƒåœ¾æ”¶é›†å™¨æä¾›äº†æ‚¨å¯èƒ½æƒ³åˆ©ç”¨çš„å…¶ä»–åŠŸèƒ½ï¼šç»ˆç»“å¤„ç†ã€‚æœ€ç»ˆç¡®å®šå…è®¸èµ„æºåœ¨è¢«æ”¶é›†åå¯¹å…¶è¿›è¡Œé€‚å½“çš„æ¸…ç†ã€‚é€šè¿‡ä½¿ç”¨ç»ˆç»“å¤„ç†ï¼Œå½“åƒåœ¾å›æ”¶å™¨å†³å®šé‡Šæ”¾èµ„æºçš„å†…å­˜æ—¶ï¼Œä»£è¡¨æ–‡ä»¶æˆ–ç½‘ç»œè¿æ¥çš„èµ„æºä¾¿èƒ½å¤Ÿæ­£ç¡®æ¸…ç†è‡ªèº«ã€‚</p>
<p>å½“åƒåœ¾æ”¶é›†å™¨æ£€æµ‹åˆ°å¯¹è±¡æ˜¯åƒåœ¾æ—¶ï¼Œåƒåœ¾æ”¶é›†å™¨å°†è°ƒç”¨å¯¹è±¡çš„Finalizeæ–¹æ³•ï¼ˆå¦‚æœå­˜åœ¨ï¼‰ï¼Œç„¶åå›æ”¶è¯¥å¯¹è±¡çš„å†…å­˜ã€‚ä¾‹å¦‚ï¼Œå‡è®¾æ‚¨å…·æœ‰ä»¥ä¸‹ç±»å‹ï¼ˆåœ¨Cï¼ƒä¸­ï¼‰ï¼š</p>
<p> <code>public class BaseObj</code><br><code>{</code><br><code>public BaseObj()</code><br><code>{</code><br><code>}</code><br><code>protected override void Finalize()</code><br><code>{</code><br><code>// Perform resource cleanup code here</code><br><code>// Example: Close file/Close network connection</code><br><code>Console.WriteLine(&quot;In Finalize.&quot;);</code><br><code>}</code><br><code>}</code></p>
<p>ç°åœ¨ï¼Œæ‚¨å¯ä»¥é€šè¿‡è°ƒç”¨ä»¥ä¸‹å†…å®¹æ¥åˆ›å»ºè¯¥å¯¹è±¡çš„å®ä¾‹ï¼š</p>
<p> <code>BaseObj bo = new BaseObj();</code> </p>
<p>å°†æ¥çš„æŸä¸ªæ—¶å€™ï¼Œåƒåœ¾æ”¶é›†å™¨å°†ç¡®å®šè¯¥å¯¹è±¡ä¸ºåƒåœ¾ã€‚å‘ç”Ÿè¿™ç§æƒ…å†µæ—¶ï¼Œåƒåœ¾æ”¶é›†å™¨å°†çœ‹åˆ°è¯¥ç±»å‹å…·æœ‰Finalizeæ–¹æ³•ï¼Œå¹¶å°†è°ƒç”¨è¯¥æ–¹æ³•ï¼Œä»è€Œä½¿â€œ In Finalizeâ€å‡ºç°åœ¨æ§åˆ¶å°çª—å£ä¸­å¹¶å›æ”¶è¯¥å¯¹è±¡ä½¿ç”¨çš„å†…å­˜å—ã€‚</p>
<p>è®¸å¤šä¹ æƒ¯äºä½¿ç”¨C ++è¿›è¡Œç¼–ç¨‹çš„å¼€å‘äººå‘˜éƒ½ä¼šåœ¨ææ„å‡½æ•°å’ŒFinalizeæ–¹æ³•ä¹‹é—´å»ºç«‹ç›´æ¥çš„å…³è”ã€‚ä½†æ˜¯ï¼Œå¯¹è±¡ç»ˆç»“å¤„ç†å’Œææ„å‡½æ•°å…·æœ‰éå¸¸ä¸åŒçš„è¯­ä¹‰ï¼Œåœ¨è€ƒè™‘ç»ˆç»“å¤„ç†æ—¶ï¼Œæœ€å¥½å¿˜è®°æ‚¨å¯¹ææ„å‡½æ•°çš„äº†è§£ã€‚å—ç®¡å¯¹è±¡æ°¸è¿œä¸ä¼šæœ‰ææ„å‡½æ•°ã€‚</p>
<p>è®¾è®¡ç±»å‹æ—¶ï¼Œæœ€å¥½é¿å…ä½¿ç”¨Finalizeæ–¹æ³•ã€‚æœ‰å‡ ä¸ªåŸå› ï¼š</p>
<ul>
<li>å¯ç»ˆç»“å¯¹è±¡è¢«æå‡ä¸ºè¾ƒæ—©çš„ä¸€ä»£ï¼Œè¿™å¢åŠ äº†å†…å­˜å‹åŠ›ï¼Œå¹¶åœ¨åƒåœ¾æ”¶é›†å™¨ç¡®å®šå¯¹è±¡ä¸ºåƒåœ¾æ—¶é˜»æ­¢äº†å¯¹è±¡çš„å†…å­˜è¢«æ”¶é›†ã€‚æ­¤å¤–ï¼Œè¯¥å¯¹è±¡ç›´æ¥æˆ–é—´æ¥å¼•ç”¨çš„æ‰€æœ‰å¯¹è±¡ä¹Ÿå°†å¾—åˆ°æå‡ã€‚</li>
</ul>
<ul>
<li>å¯ç»ˆç»“å¯¹è±¡éœ€è¦æ›´é•¿çš„åˆ†é…æ—¶é—´ã€‚</li>
</ul>
<ul>
<li>å¼ºåˆ¶åƒåœ¾æ”¶é›†å™¨æ‰§è¡ŒFinalizeæ–¹æ³•ä¼šä¸¥é‡å½±å“æ€§èƒ½ã€‚è¯·è®°ä½ï¼Œæ¯ä¸ªå¯¹è±¡éƒ½å·²å®Œæˆã€‚å› æ­¤ï¼Œå¦‚æœæˆ‘æœ‰10,000ä¸ªå¯¹è±¡çš„æ•°ç»„ï¼Œåˆ™æ¯ä¸ªå¯¹è±¡éƒ½å¿…é¡»è°ƒç”¨å…¶Finalizeæ–¹æ³•ã€‚</li>
</ul>
<ul>
<li>ç»ˆç»“å¯¹è±¡å¯ä»¥å¼•ç”¨å…¶ä»–ï¼ˆä¸å¯ç»ˆç»“ï¼‰å¯¹è±¡ï¼Œä»è€Œä¸å¿…è¦åœ°å»¶é•¿å…¶å¯¿å‘½ã€‚å®é™…ä¸Šï¼Œæ‚¨å¯èƒ½éœ€è¦è€ƒè™‘å°†ç±»å‹åˆ†ä¸ºä¸¤ç§ä¸åŒçš„ç±»å‹ï¼šä¸€ç§è½»å‹ç±»å‹ï¼Œå…¶å…·æœ‰ä¸å¼•ç”¨ä»»ä½•å…¶ä»–å¯¹è±¡çš„Finalizeæ–¹æ³•ï¼Œä¸€ä¸ªå•ç‹¬çš„ç±»å‹ï¼Œå…¶ç±»å‹ä¸å…·æœ‰å¼•ç”¨å…¶ä»–å¯¹è±¡çš„Finalizeæ–¹æ³•ã€‚</li>
</ul>
<ul>
<li>æ‚¨æ— æ³•æ§åˆ¶Finalizeæ–¹æ³•ä½•æ—¶æ‰§è¡Œã€‚è¯¥å¯¹è±¡å¯èƒ½ä¼šä¿ç•™èµ„æºï¼Œç›´åˆ°ä¸‹ä¸€æ¬¡åƒåœ¾æ”¶é›†å™¨è¿è¡Œä¸ºæ­¢ã€‚</li>
</ul>
<ul>
<li>å½“åº”ç”¨ç¨‹åºç»ˆæ­¢æ—¶ï¼ŒæŸäº›å¯¹è±¡ä»ç„¶å¯ä»¥è®¿é—®ï¼Œå¹¶ä¸”ä¸ä¼šè°ƒç”¨å…¶Finalizeæ–¹æ³•ã€‚å¦‚æœåå°çº¿ç¨‹æ­£åœ¨ä½¿ç”¨å¯¹è±¡ï¼Œæˆ–è€…åœ¨åº”ç”¨ç¨‹åºå…³é—­æˆ–AppDomainå¸è½½æœŸé—´åˆ›å»ºäº†å¯¹è±¡ï¼Œåˆ™ä¼šå‘ç”Ÿè¿™ç§æƒ…å†µã€‚æ­¤å¤–ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œåº”ç”¨ç¨‹åºé€€å‡ºæ—¶ï¼Œä¸å¯è¾¾å¯¹è±¡ä¸ä¼šè°ƒç”¨Finalizeæ–¹æ³•ï¼Œå› æ­¤åº”ç”¨ç¨‹åºå¯èƒ½ä¼šè¿…é€Ÿç»ˆæ­¢ã€‚å½“ç„¶ï¼Œå°†å›æ”¶æ‰€æœ‰æ“ä½œç³»ç»Ÿèµ„æºï¼Œä½†æ˜¯æ‰˜ç®¡å †ä¸­çš„ä»»ä½•å¯¹è±¡éƒ½æ— æ³•æ­£å¸¸æ¸…ç†ã€‚æ‚¨å¯ä»¥é€šè¿‡è°ƒç”¨System.GCç±»å‹çš„RequestFinalizeOnShutdownæ–¹æ³•æ¥æ›´æ”¹æ­¤é»˜è®¤è¡Œä¸ºã€‚ä½†æ˜¯ï¼Œåº”è°¨æ…ä½¿ç”¨æ­¤æ–¹æ³•ï¼Œå› ä¸ºè°ƒç”¨å®ƒæ„å‘³ç€æ‚¨çš„ç±»å‹æ­£åœ¨æ§åˆ¶æ•´ä¸ªåº”ç”¨ç¨‹åºçš„ç­–ç•¥ã€‚</li>
</ul>
<ul>
<li>è¿è¡Œæ—¶æ— æ³•ä¿è¯Finalizeæ–¹æ³•çš„è°ƒç”¨é¡ºåºã€‚ä¾‹å¦‚ï¼Œå‡è®¾æœ‰ä¸€ä¸ªå¯¹è±¡åŒ…å«ä¸€ä¸ªæŒ‡å‘å†…éƒ¨å¯¹è±¡çš„æŒ‡é’ˆã€‚åƒåœ¾æ”¶é›†å™¨æ£€æµ‹åˆ°ä¸¤ä¸ªå¯¹è±¡éƒ½æ˜¯åƒåœ¾ã€‚æ­¤å¤–ï¼Œå‡è®¾é¦–å…ˆè°ƒç”¨å†…éƒ¨å¯¹è±¡çš„Finalizeæ–¹æ³•ã€‚ç°åœ¨ï¼Œå…è®¸å¤–éƒ¨å¯¹è±¡çš„Finalizeæ–¹æ³•è®¿é—®å†…éƒ¨å¯¹è±¡å¹¶å¯¹å…¶è°ƒç”¨æ–¹æ³•ï¼Œä½†æ˜¯å†…éƒ¨å¯¹è±¡å·²å®Œæˆï¼Œå¹¶ä¸”ç»“æœå¯èƒ½æ— æ³•é¢„æµ‹ã€‚å› æ­¤ï¼Œå¼ºçƒˆå»ºè®®Finalizeæ–¹æ³•ä¸è¦è®¿é—®ä»»ä½•å†…éƒ¨æˆå‘˜å¯¹è±¡ã€‚</li>
</ul>
<p>å¦‚æœç¡®å®šç±»å‹å¿…é¡»å®ç°Finalizeæ–¹æ³•ï¼Œåˆ™è¯·ç¡®ä¿ä»£ç å°½å¿«æ‰§è¡Œã€‚é¿å…æ‰€æœ‰ä¼šé˜»æ­¢Finalizeæ–¹æ³•çš„æ“ä½œï¼ŒåŒ…æ‹¬ä»»ä½•çº¿ç¨‹åŒæ­¥æ“ä½œã€‚å¦å¤–ï¼Œå¦‚æœæ‚¨è®©ä»»ä½•å¼‚å¸¸è½¬ä¹‰äº†Finalizeæ–¹æ³•ï¼Œåˆ™ç³»ç»Ÿä»…å‡å®šFinalizeæ–¹æ³•å·²è¿”å›ï¼Œå¹¶ç»§ç»­è°ƒç”¨å…¶ä»–å¯¹è±¡çš„Finalizeæ–¹æ³•ã€‚</p>
<p>å½“ç¼–è¯‘å™¨ä¸ºæ„é€ å‡½æ•°ç”Ÿæˆä»£ç æ—¶ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨æ’å…¥å¯¹åŸºæœ¬ç±»å‹çš„æ„é€ å‡½æ•°çš„è°ƒç”¨ã€‚åŒæ ·ï¼Œå½“C ++ç¼–è¯‘å™¨ä¸ºææ„å‡½æ•°ç”Ÿæˆä»£ç æ—¶ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨æ’å…¥å¯¹åŸºæœ¬ç±»å‹çš„ææ„å‡½æ•°çš„è°ƒç”¨ã€‚ç»ˆç»“æ–¹æ³•ä¸åŒäºææ„å‡½æ•°ã€‚ç¼–è¯‘å™¨å¯¹Finalizeæ–¹æ³•æ²¡æœ‰ç‰¹æ®ŠçŸ¥è¯†ï¼Œå› æ­¤ç¼–è¯‘å™¨ä¸ä¼šè‡ªåŠ¨ç”Ÿæˆä»£ç ä»¥è°ƒç”¨åŸºæœ¬ç±»å‹çš„Finalizeæ–¹æ³•ã€‚å¦‚æœæ‚¨æƒ³è¦è¿™ç§è¡Œä¸ºï¼Œå¹¶ä¸”ç»å¸¸è¿™æ ·åšï¼Œé‚£ä¹ˆå¿…é¡»ä»ç±»å‹çš„Finalizeæ–¹æ³•ä¸­æ˜¾å¼è°ƒç”¨åŸºæœ¬ç±»å‹çš„Finalizeæ–¹æ³•ï¼š</p>
<p><code>public class BaseObj
{
public BaseObj()
{
}
protected override void Finalize()
{
Console.WriteLine(&quot;In Finalize.&quot;);
base.Finalize(); // Call base type&#39;s Finalize
}
}</code></p>
<p>è¯·æ³¨æ„ï¼Œé€šå¸¸å°†åŸºç±»å‹çš„Finalizeæ–¹æ³•ç§°ä¸ºæ´¾ç”Ÿç±»å‹çš„Finalizeæ–¹æ³•ä¸­çš„æœ€åä¸€æ¡è¯­å¥ã€‚è¿™æ ·å¯ä»¥ä½¿åŸºç¡€å¯¹è±¡ä¿æŒå°½å¯èƒ½é•¿çš„ç”Ÿå‘½ã€‚ç”±äºè°ƒç”¨åŸºæœ¬ç±»å‹çš„Finalizeæ–¹æ³•å¾ˆå¸¸è§ï¼Œå› æ­¤Cï¼ƒçš„è¯­æ³•ç®€åŒ–äº†æ‚¨çš„å·¥ä½œã€‚åœ¨Cï¼ƒä¸­ï¼Œä»¥ä¸‹ä»£ç ï¼š</p>
<p> <code>class MyObject
{
MyObject()
{
}
}</code></p>
<p><strong>ç»ˆç»“å†…éƒ¨</strong></p>
<p>å½“åº”ç”¨ç¨‹åºåˆ›å»ºæ–°å¯¹è±¡æ—¶ï¼Œæ–°è¿ç®—ç¬¦å°†ä»å †ä¸­åˆ†é…å†…å­˜ã€‚å¦‚æœå¯¹è±¡çš„ç±»å‹åŒ…å«Finalizeæ–¹æ³•ï¼Œåˆ™å°†æŒ‡å‘è¯¥å¯¹è±¡çš„æŒ‡é’ˆæ”¾åœ¨ç»ˆç»“é˜Ÿåˆ—ä¸­ã€‚ç»ˆç»“é˜Ÿåˆ—æ˜¯ç”±åƒåœ¾æ”¶é›†å™¨æ§åˆ¶çš„å†…éƒ¨æ•°æ®ç»“æ„ã€‚é˜Ÿåˆ—ä¸­çš„æ¯ä¸ªæ¡ç›®éƒ½æŒ‡å‘ä¸€ä¸ªå¯¹è±¡ï¼Œåœ¨å¯ä»¥å›æ”¶è¯¥å¯¹è±¡çš„å†…å­˜ä¹‹å‰ï¼Œåº”è°ƒç”¨è¯¥å¯¹è±¡çš„Finalizeæ–¹æ³•ã€‚</p>
<p>ä¸‹å›¾æ˜¾ç¤ºäº†åŒ…å«å¤šä¸ªå¯¹è±¡çš„å †ã€‚ä»åº”ç”¨ç¨‹åºçš„æ ¹ç›®å½•å¯ä»¥è®¿é—®å…¶ä¸­çš„æŸäº›å¯¹è±¡ï¼Œè€ŒæŸäº›åˆ™ä¸èƒ½ã€‚åˆ›å»ºå¯¹è±¡Cï¼ŒEï¼ŒFï¼ŒIå’ŒJæ—¶ï¼Œç³»ç»Ÿæ£€æµ‹åˆ°è¿™äº›å¯¹è±¡å…·æœ‰Finalizeæ–¹æ³•ï¼Œå¹¶å°†æŒ‡å‘è¿™äº›å¯¹è±¡çš„æŒ‡é’ˆæ·»åŠ åˆ°äº†ç»ˆç»“é˜Ÿåˆ—ä¸­ã€‚</p>
<p><img src="https://www.c-sharpcorner.com/UploadFile/tkagarwal/MemoryManagementInNet11232005064832AM/Images/Memory9.gif" alt="Memory9.gif"></p>
<p>å‘ç”ŸGCæ—¶ï¼Œå¯¹è±¡Bï¼ŒEï¼ŒGï¼ŒHï¼ŒIå’ŒJè¢«ç¡®å®šä¸ºåƒåœ¾ã€‚åƒåœ¾æ”¶é›†å™¨æ‰«æå®Œæˆé˜Ÿåˆ—ï¼Œä»¥æŸ¥æ‰¾æŒ‡å‘è¿™äº›å¯¹è±¡çš„æŒ‡é’ˆã€‚å½“æ‰¾åˆ°ä¸€ä¸ªæŒ‡é’ˆæ—¶ï¼Œè¯¥æŒ‡é’ˆå°†ä»ç»ˆç»“é˜Ÿåˆ—ä¸­åˆ é™¤ï¼Œå¹¶é™„åŠ åˆ°æ˜“ç¢é˜Ÿåˆ—ï¼ˆå‘éŸ³ä¸ºâ€œ F-reachableâ€ï¼‰ã€‚æ˜“ç¢é˜Ÿåˆ—æ˜¯ç”±åƒåœ¾æ”¶é›†å™¨æ§åˆ¶çš„å¦ä¸€ä¸ªå†…éƒ¨æ•°æ®ç»“æ„ã€‚æ˜“ç¢é˜Ÿåˆ—ä¸­çš„æ¯ä¸ªæŒ‡é’ˆéƒ½æ ‡è¯†ä¸€ä¸ªå¯¹è±¡ï¼Œè¯¥å¯¹è±¡å·²å‡†å¤‡å¥½è°ƒç”¨å…¶Finalizeæ–¹æ³•ã€‚</p>
<p>æ”¶é›†ä¹‹åï¼Œæ‰˜ç®¡å †å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚åœ¨è¿™é‡Œï¼Œæ‚¨çœ‹åˆ°å¯¹è±¡Bï¼ŒGå’ŒHå ç”¨çš„å†…å­˜å·²è¢«å›æ”¶ï¼Œå› ä¸ºè¿™äº›å¯¹è±¡æ²¡æœ‰éœ€è¦è°ƒç”¨çš„Finalizeæ–¹æ³•ã€‚ä½†æ˜¯ï¼Œæ— æ³•å›æ”¶å¯¹è±¡Eï¼ŒIå’ŒJå ç”¨çš„å†…å­˜ï¼Œå› ä¸ºå°šæœªè°ƒç”¨å®ƒä»¬çš„Finalizeæ–¹æ³•ã€‚</p>
<p><img src="https://www.c-sharpcorner.com/UploadFile/tkagarwal/MemoryManagementInNet11232005064832AM/Images/Memory10.gif" alt="Memory10.gif"></p>
<p>æœ‰ä¸€ä¸ªä¸“ç”¨çš„è¿è¡Œæ—¶çº¿ç¨‹ä¸“ç”¨äºè°ƒç”¨Finalizeæ–¹æ³•ã€‚å½“å¯è®¿é—®é˜Ÿåˆ—ä¸ºç©ºæ—¶ï¼ˆé€šå¸¸æ˜¯è¿™ç§æƒ…å†µï¼‰ï¼Œè¯¥çº¿ç¨‹è¿›å…¥ç¡çœ çŠ¶æ€ã€‚ä½†æ˜¯ï¼Œå½“å‡ºç°æ¡ç›®æ—¶ï¼Œè¯¥çº¿ç¨‹å°†å”¤é†’ï¼Œä»é˜Ÿåˆ—ä¸­åˆ é™¤æ¯ä¸ªæ¡ç›®ï¼Œå¹¶è°ƒç”¨æ¯ä¸ªå¯¹è±¡çš„Finalizeæ–¹æ³•ã€‚å› æ­¤ï¼Œæ‚¨ä¸åº”åœ¨Finalizeæ–¹æ³•ä¸­æ‰§è¡Œä»»ä½•æœ‰å…³æ‰§è¡Œä»£ç çš„çº¿ç¨‹çš„å‡è®¾çš„ä»£ç ã€‚ä¾‹å¦‚ï¼Œé¿å…åœ¨Finalizeæ–¹æ³•ä¸­è®¿é—®çº¿ç¨‹æœ¬åœ°å­˜å‚¨ã€‚</p>
<p>ç»ˆç»“é˜Ÿåˆ—ä¸æ˜“ç¢é˜Ÿåˆ—çš„äº¤äº’éå¸¸æœ‰è¶£ã€‚é¦–å…ˆï¼Œè®©æˆ‘å‘Šè¯‰æ‚¨æ˜“ç¢é˜Ÿåˆ—çš„åç§°ã€‚få¾ˆæ˜æ˜¾ï¼Œä»£è¡¨å®šç¨¿ï¼›æ˜“ç¢é˜Ÿåˆ—ä¸­çš„æ¯ä¸ªæ¡ç›®éƒ½åº”è°ƒç”¨å…¶Finalizeæ–¹æ³•ã€‚åç§°çš„â€œå¯åˆ°è¾¾â€éƒ¨åˆ†è¡¨ç¤ºå¯¹è±¡å¯åˆ°è¾¾ã€‚æ¢å¥è¯è¯´ï¼Œæ˜“ç¢é˜Ÿåˆ—è¢«è§†ä¸ºæ ¹ï¼Œå°±åƒå…¨å±€å˜é‡å’Œé™æ€å˜é‡æ˜¯æ ¹ä¸€æ ·ã€‚å› æ­¤ï¼Œå¦‚æœå¯¹è±¡åœ¨æ˜“ç¢é˜Ÿåˆ—ä¸­ï¼Œåˆ™è¯¥å¯¹è±¡å¯è®¿é—®ä¸”ä¸æ˜¯åƒåœ¾ã€‚</p>
<p>ç®€è€Œè¨€ä¹‹ï¼Œå½“å¯¹è±¡ä¸å¯è®¿é—®æ—¶ï¼Œåƒåœ¾æ”¶é›†å™¨å°†å…¶è§†ä¸ºå¯¹è±¡åƒåœ¾ã€‚ç„¶åï¼Œå½“åƒåœ¾æ”¶é›†å™¨å°†å¯¹è±¡çš„æ¡ç›®ä»ç»ˆç»“é˜Ÿåˆ—ç§»åˆ°å¯è®¿é—®é˜Ÿåˆ—æ—¶ï¼Œè¯¥å¯¹è±¡ä¸å†è¢«è§†ä¸ºåƒåœ¾ï¼Œå¹¶ä¸”ä¸å›æ”¶å…¶å†…å­˜ã€‚è‡³æ­¤ï¼Œåƒåœ¾æ”¶é›†å™¨å·²ç»å®Œæˆäº†å¯¹åƒåœ¾çš„è¯†åˆ«ã€‚æŸäº›æ ‡è¯†ä¸ºåƒåœ¾çš„å¯¹è±¡å·²è¢«é‡æ–°åˆ†ç±»ä¸ºéåƒåœ¾ã€‚åƒåœ¾æ”¶é›†å™¨å‹ç¼©å¯å›æ”¶å†…å­˜ï¼Œç‰¹æ®Šçš„è¿è¡Œæ—¶çº¿ç¨‹æ¸…ç©ºæ˜“ç¢é˜Ÿåˆ—ï¼Œæ‰§è¡Œæ¯ä¸ªå¯¹è±¡çš„Finalizeæ–¹æ³•ã€‚</p>
<p><img src="https://www.c-sharpcorner.com/UploadFile/tkagarwal/MemoryManagementInNet11232005064832AM/Images/Memory11.gif" alt="Memory11.gif"></p>
<p>ä¸‹æ¬¡è°ƒç”¨åƒåœ¾å›æ”¶å™¨æ—¶ï¼Œå®ƒä¼šçœ‹åˆ°æœ€ç»ˆå¯¹è±¡æ˜¯çœŸæ­£çš„åƒåœ¾ï¼Œå› ä¸ºåº”ç”¨ç¨‹åºçš„æ ¹ä¸æŒ‡å‘è¯¥å¯¹è±¡ï¼Œå¹¶ä¸”æ˜“ç¢é˜Ÿåˆ—ä¸å†æŒ‡å‘è¯¥å¯¹è±¡ã€‚ç°åœ¨ï¼Œåªéœ€å›æ”¶è¯¥å¯¹è±¡çš„å†…å­˜å³å¯ã€‚è¿™é‡Œè¦äº†è§£çš„é‡è¦ä¸€ç‚¹æ˜¯ï¼Œéœ€è¦ä¸¤ä¸ªGCæ¥å›æ”¶éœ€è¦ç»ˆç»“å¤„ç†çš„å¯¹è±¡ä½¿ç”¨çš„å†…å­˜ã€‚å®é™…ä¸Šï¼Œå¯èƒ½éœ€è¦ä¸¤ä¸ªä»¥ä¸Šçš„é›†åˆï¼Œå› ä¸ºè¿™äº›å¯¹è±¡å¯ä»¥æå‡ä¸ºè¾ƒè€çš„ä¸€ä»£ã€‚ä¸Šå›¾æ˜¾ç¤ºäº†ç¬¬äºŒä¸ªGCä¹‹åæ‰˜ç®¡å †çš„å¤–è§‚ã€‚</p>
<p><strong>å¤„ç½®æ–¹æ³•</strong></p>
<p>ä½¿ç”¨æ­¤æ–¹æ³•å¯ä»¥å…³é—­æˆ–é‡Šæ”¾ç”±å®ç°æ­¤æ¥å£çš„ç±»çš„å®ä¾‹æŒæœ‰çš„éæ‰˜ç®¡èµ„æºï¼Œä¾‹å¦‚æ–‡ä»¶ï¼Œæµå’Œå¥æŸ„ã€‚æŒ‰ç…§æƒ¯ä¾‹ï¼Œæ­¤æ–¹æ³•ç”¨äºä¸é‡Šæ”¾å¯¹è±¡æ‹¥æœ‰çš„èµ„æºæˆ–å‡†å¤‡å¯¹è±¡é‡ç”¨ç›¸å…³çš„æ‰€æœ‰ä»»åŠ¡ã€‚</p>
<p>åœ¨å®ç°æ­¤æ–¹æ³•æ—¶ï¼Œå¯¹è±¡å¿…é¡»è®¾æ³•é€šè¿‡åœ¨åŒ…å«å±‚æ¬¡ç»“æ„ä¸­ä¼ æ’­è°ƒç”¨æ¥ç¡®ä¿é‡Šæ”¾æ‰€æœ‰ä¿ç•™çš„èµ„æºã€‚ä¾‹å¦‚ï¼Œå¦‚æœå¯¹è±¡Aåˆ†é…äº†å¯¹è±¡Bï¼Œè€Œå¯¹è±¡Båˆ†é…äº†å¯¹è±¡Cï¼Œåˆ™Açš„Disposeå®ç°å¿…é¡»è°ƒç”¨Bä¸Šçš„Disposeï¼Œåè€…åˆå¿…é¡»è°ƒç”¨Cä¸Šçš„Disposeã€‚å¯¹è±¡è¿˜å¿…é¡»è°ƒç”¨å…¶åŸºç±»çš„Disposeæ–¹æ³•ã€‚å¦‚æœåŸºç±»å®ç°IDisposableã€‚</p>
<p><code>å¦‚æœå¤šæ¬¡è°ƒç”¨å¯¹è±¡çš„</code>Disposeæ–¹æ³•ï¼Œåˆ™è¯¥å¯¹è±¡å¿…é¡»å¿½ç•¥ç¬¬ä¸€ä¸ªè°ƒç”¨ä¹‹åçš„æ‰€æœ‰è°ƒç”¨ã€‚å¦‚æœå¤šæ¬¡è°ƒç”¨å…¶Disposeæ–¹æ³•ï¼Œåˆ™è¯¥å¯¹è±¡ä¸å¾—å¼•å‘å¼‚å¸¸ã€‚å¦‚æœç”±äºå·²é‡Šæ”¾èµ„æºå¹¶ä¸”ä»¥å‰æœªè°ƒç”¨è¿‡Disposeè€Œå‘ç”Ÿé”™è¯¯ï¼Œåˆ™Disposeå¯èƒ½å¼•å‘å¼‚å¸¸ã€‚</p>
<p><code>å› ä¸ºå¿…é¡»æ˜¾å¼è°ƒç”¨</code>Disposeæ–¹æ³•ï¼Œæ‰€ä»¥å®ç°IDisposableçš„å¯¹è±¡è¿˜å¿…é¡»å®ç°ç»ˆç»“å™¨ï¼Œä»¥åœ¨ä¸è°ƒç”¨Disposeæ—¶å¤„ç†é‡Šæ”¾èµ„æºã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œåƒåœ¾å›æ”¶å™¨å°†åœ¨å›æ”¶å¯¹è±¡çš„å†…å­˜ä¹‹å‰è‡ªåŠ¨è°ƒç”¨å…¶ç»ˆç»“å™¨ã€‚ä½†æ˜¯ï¼Œä¸€æ—¦è°ƒç”¨äº†Disposeæ–¹æ³•ï¼Œåƒåœ¾æ”¶é›†å™¨é€šå¸¸å°±ä¸éœ€è¦è°ƒç”¨å·²å¤„ç†å¯¹è±¡çš„ç»ˆç»“å™¨ã€‚ä¸ºäº†é˜²æ­¢è‡ªåŠ¨å®Œæˆï¼ŒDisposeå®ç°å¯ä»¥è°ƒç”¨GC.SuppressFinalizeæ–¹æ³•ã€‚</p>
<p><strong>é€šè¿‡System.GCç›´æ¥æ§åˆ¶</strong></p>
<p>System.GCç±»å‹ä½¿æ‚¨çš„åº”ç”¨ç¨‹åºå¯ä»¥ç›´æ¥æ§åˆ¶åƒåœ¾æ”¶é›†å™¨ã€‚æ‚¨å¯ä»¥é€šè¿‡è¯»å–GC.MaxGenerationå±æ€§æ¥æŸ¥è¯¢æ‰˜ç®¡å †æ”¯æŒçš„æœ€å¤§ç”Ÿæˆé‡ã€‚å½“å‰ï¼ŒGC.MaxGenerationå±æ€§å§‹ç»ˆè¿”å›2ã€‚</p>
<p>ä¹Ÿå¯ä»¥é€šè¿‡è°ƒç”¨æ­¤å¤„æ˜¾ç¤ºçš„ä¸¤ä¸ªæ–¹æ³•ä¹‹ä¸€æ¥å¼ºåˆ¶åƒåœ¾æ”¶é›†å™¨æ‰§è¡Œæ”¶é›†ï¼š</p>
<p><code>void GC.Collect(Int32 Generation)
void GC.Collect()</code></p>
<p>ç¬¬ä¸€ç§æ–¹æ³•å…è®¸æ‚¨æŒ‡å®šè¦æ”¶é›†çš„ä¸–ä»£ã€‚æ‚¨å¯ä»¥å°†0èŒƒå›´å†…çš„ä»»ä½•æ•´æ•°ä¼ é€’ç»™GC.MaxGenerationï¼ˆå«ï¼‰ã€‚ä¼ é€’0å¯¼è‡´ç”Ÿæˆ0è¢«æ”¶é›†ï¼›ä¼ é€’1å¯¼è‡´æ”¶é›†ç¬¬1ä»£å’Œç¬¬0ä»£ï¼›ä¼ é€’2ä¼šå¯¼è‡´ç”Ÿæˆ2ã€1ã€0å’Œ0ã€‚ä¸å¸¦å‚æ•°çš„Collectæ–¹æ³•çš„ç‰ˆæœ¬å¼ºåˆ¶æ‰€æœ‰ä¸–ä»£çš„å®Œæ•´é›†åˆï¼Œç­‰æ•ˆäºè°ƒç”¨ï¼š</p>
<p><code>GC.Collectï¼ˆGC.MaxGenerationï¼‰;</code></p>
<p>GCç±»å‹è¿˜æä¾›äº†WaitForPendingFinalizersæ–¹æ³•ã€‚æ­¤æ–¹æ³•åªæ˜¯æŒ‚èµ·è°ƒç”¨çº¿ç¨‹ï¼Œç›´åˆ°å¤„ç†æ˜“ç¢é˜Ÿåˆ—çš„çº¿ç¨‹æ¸…ç©ºäº†é˜Ÿåˆ—ï¼Œç„¶åè°ƒç”¨æ¯ä¸ªå¯¹è±¡çš„Finalizeæ–¹æ³•ã€‚åœ¨å¤§å¤šæ•°åº”ç”¨ç¨‹åºä¸­ï¼Œæ‚¨ä¸å¤ªå¯èƒ½éœ€è¦è°ƒç”¨æ­¤æ–¹æ³•ã€‚</p>
<p>æœ€åï¼Œåƒåœ¾æ”¶é›†å™¨æä¾›äº†ä¸¤ç§æ–¹æ³•ï¼Œå¯è®©æ‚¨ç¡®å®šå¯¹è±¡å½“å‰å¤„äºå“ªä¸ªä¸–ä»£ï¼š</p>
<p><code>Int32 GetGenerationï¼ˆObject objï¼‰</code><br><code>Int32 GetGenerationï¼ˆWeakReference wrï¼‰</code></p>
<p>GetGenerationçš„ç¬¬ä¸€ä¸ªç‰ˆæœ¬å°†å¯¹è±¡å¼•ç”¨ä½œä¸ºå‚æ•°ï¼Œè€Œç¬¬äºŒä¸ªç‰ˆæœ¬å°†WeakReferenceå¼•ç”¨ä½œä¸ºå‚æ•°ã€‚å½“ç„¶ï¼Œè¿”å›çš„å€¼å°†ä»‹äº0åˆ°GC.MaxGenerationä¹‹é—´ï¼ˆå«ï¼‰ã€‚</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://techq.xyz/2020/04/05/æŠ€æœ¯/understanding-garbage-collection-in-.net/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="æºªæº">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="xiyuanæŠ€æœ¯åœˆ">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2020/04/05/æŠ€æœ¯/understanding-garbage-collection-in-.net/" class="post-title-link" itemprop="url">äº†è§£.NETä¸­çš„åƒåœ¾å›æ”¶</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2020-04-05 16:28:00" itemprop="dateCreated datePublished" datetime="2020-04-05T16:28:00+00:00">2020-04-05</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2021-04-25 11:04:00" itemprop="dateModified" datetime="2021-04-25T11:04:00+00:00">2021-04-25</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/æŠ€æœ¯/" itemprop="url" rel="index"><span itemprop="name">æŠ€æœ¯</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="äº†è§£-NETä¸­çš„åƒåœ¾å›æ”¶"><a href="#äº†è§£-NETä¸­çš„åƒåœ¾å›æ”¶" class="headerlink" title="äº†è§£.NETä¸­çš„åƒåœ¾å›æ”¶"></a>äº†è§£.NETä¸­çš„åƒåœ¾å›æ”¶</h1><blockquote>
<p> ä¸€æ—¦äº†è§£äº†.NETçš„åƒåœ¾æ”¶é›†å™¨æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Œé‚£ä¹ˆå¯èƒ½ä¼šè§¦åŠ.NETåº”ç”¨ç¨‹åºçš„ä¸€äº›æ›´ä¸ºç¥ç§˜çš„é—®é¢˜çš„åŸå› å°±ä¼šå˜å¾—æ›´åŠ æ¸…æ¥šã€‚NETå¯èƒ½å·²æ‰¿è¯ºè¦ç»“æŸæ˜¾å¼å†…å­˜ç®¡ç†ï¼Œä½†åœ¨å¼€å‘.NETåº”ç”¨ç¨‹åºæ—¶ï¼Œä»ç„¶æœ‰å¿…è¦åˆ†æå†…å­˜çš„ä½¿ç”¨æƒ…å†µï¼Œä»¥ä¾¿é¿å…ä¸å†…å­˜ç›¸å…³çš„é”™è¯¯å’ŒæŸäº›æ€§èƒ½é—®é¢˜ã€‚ </p>
</blockquote>
<p>.NETçš„åƒåœ¾æ”¶é›†å™¨å·²åœ¨Windowsåº”ç”¨ç¨‹åºä¸­ä½œä¸ºæ˜¾å¼å†…å­˜ç®¡ç†å’Œå†…å­˜æ³„æ¼çš„ç»“æŸè€Œå‡ºå”®ç»™æˆ‘ä»¬ï¼šè¿™ä¸ªæƒ³æ³•æ˜¯ï¼Œåœ¨åå°è¿è¡Œåƒåœ¾æ”¶é›†å™¨çš„æƒ…å†µä¸‹ï¼Œå¼€å‘äººå‘˜ä¸å†éœ€è¦æ‹…å¿ƒç®¡ç†å®ƒä»¬åˆ›å»ºçš„å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸâ€“åº”ç”¨ç¨‹åºå®Œæˆå¤„ç†åï¼Œåƒåœ¾æ”¶é›†å™¨å°†å¯¹å…¶è¿›è¡Œå¤„ç†ã€‚</p>
<p>ä½†æ˜¯ï¼Œå®é™…æƒ…å†µè¦å¤æ‚å¾—å¤šã€‚åƒåœ¾æ”¶é›†å™¨æ— ç–‘è§£å†³äº†éæ‰˜ç®¡ç¨‹åºä¸­æœ€å¸¸è§çš„æ³„æ¼-ç”±å¼€å‘äººå‘˜åœ¨å®Œæˆä½¿ç”¨åå¿˜è®°é‡Šæ”¾å†…å­˜è€Œå¼•èµ·çš„æ³„æ¼ã€‚å®ƒè¿˜è§£å†³äº†å†…å­˜é‡Šæ”¾è¿‡æ—©çš„ç›¸å…³é—®é¢˜ï¼Œä½†æ˜¯å½“åƒåœ¾æ”¶é›†å™¨å¯¹å¼€å‘äººå‘˜å¯¹å¯¹è±¡æ˜¯å¦ä»ç„¶å¤„äºâ€œæ´»åŠ¨çŠ¶æ€â€å¹¶ä¸”èƒ½å¤Ÿè¿›è¡Œå¼€å‘æ—¶æœ‰ä¸åŒçš„çœ‹æ³•æ—¶ï¼Œè§£å†³è¯¥é—®é¢˜çš„æ–¹å¼å¯èƒ½å¯¼è‡´å†…å­˜æ³„æ¼ã€‚è¦ä½¿ç”¨çš„ã€‚è§£å†³è¿™äº›é—®é¢˜ä¹‹å‰ï¼Œæ‚¨éœ€è¦å¯¹æ”¶é›†å™¨çš„å·¥ä½œæ–¹å¼æœ‰æ‰€äº†è§£ã€‚</p>
<h1 id="åƒåœ¾æ”¶é›†å™¨å¦‚ä½•å·¥ä½œ"><a href="#åƒåœ¾æ”¶é›†å™¨å¦‚ä½•å·¥ä½œ" class="headerlink" title="åƒåœ¾æ”¶é›†å™¨å¦‚ä½•å·¥ä½œ"></a>åƒåœ¾æ”¶é›†å™¨å¦‚ä½•å·¥ä½œ</h1><p>é‚£ä¹ˆï¼Œåƒåœ¾æ”¶é›†å™¨å¦‚ä½•å®ç°å…¶é­”åŠ›ï¼ŸåŸºæœ¬æ€æƒ³éå¸¸ç®€å•ï¼šå®ƒæ£€æŸ¥å¯¹è±¡åœ¨å†…å­˜ä¸­çš„å¸ƒå±€æ–¹å¼ï¼Œå¹¶é€šè¿‡éµå¾ªä¸€ç³»åˆ—å¼•ç”¨æ¥æ ‡è¯†æ­£åœ¨è¿è¡Œçš„ç¨‹åºå¯ä»¥â€œè®¿é—®â€çš„æ‰€æœ‰é‚£äº›å¯¹è±¡ã€‚</p>
<p>å½“åƒåœ¾å›æ”¶å¼€å§‹æ—¶ï¼Œå®ƒå°†æŸ¥çœ‹ä¸€ç»„ç§°ä¸ºâ€œ GCæ ¹â€çš„å¼•ç”¨ã€‚è¿™äº›æ˜¯ç”±äºæŸç§åŸå› æ€»æ˜¯å¯ä»¥è®¿é—®çš„å†…å­˜ä½ç½®ï¼Œå¹¶ä¸”åŒ…å«å¯¹ç¨‹åºåˆ›å»ºçš„å¯¹è±¡çš„å¼•ç”¨ã€‚å®ƒå°†è¿™äº›å¯¹è±¡æ ‡è®°ä¸ºâ€œæ´»åŠ¨â€ï¼Œç„¶åæŸ¥çœ‹å®ƒä»¬å¼•ç”¨çš„æ‰€æœ‰å¯¹è±¡ã€‚å®ƒä¹Ÿå°†è¿™äº›æ ‡è®°ä¸ºâ€œå®æ—¶â€ã€‚å®ƒä»¥è¿™ç§æ–¹å¼ç»§ç»­ï¼Œéå†å®ƒçŸ¥é“æ˜¯â€œæ´»åŠ¨â€çš„æ‰€æœ‰å¯¹è±¡ã€‚å®ƒå°†å®ƒä»¬å¼•ç”¨çš„æ‰€æœ‰å†…å®¹éƒ½æ ‡è®°ä¸ºä¹Ÿè¢«ä½¿ç”¨ï¼Œç›´åˆ°æ‰¾ä¸åˆ°å…¶ä»–å¯¹è±¡ä¸ºæ­¢ã€‚</p>
<p>å¦‚æœæŸä¸ªå¯¹è±¡æˆ–å…¶è¶…ç±»ä¹‹ä¸€çš„å­—æ®µåŒ…å«å¦ä¸€ä¸ªå¯¹è±¡ï¼Œåˆ™è¯¥å¯¹è±¡ç”±åƒåœ¾æ”¶é›†å™¨æ ‡è¯†ä¸ºå¼•ç”¨å¦ä¸€ä¸ªå¯¹è±¡ã€‚</p>
<p>ä¸€æ—¦çŸ¥é“äº†æ‰€æœ‰è¿™äº›æ´»åŠ¨å¯¹è±¡ï¼Œå°±å¯ä»¥ä¸¢å¼ƒæ‰€æœ‰å‰©ä½™çš„å¯¹è±¡ï¼Œå¹¶å°†ç©ºé—´é‡æ–°ç”¨äºæ–°å¯¹è±¡ã€‚.NETå‹ç¼©å†…å­˜ï¼Œä»¥ç¡®ä¿æ²¡æœ‰é—´éš™ï¼ˆæœ‰æ•ˆåœ°å‹ç¼©ä¸¢å¼ƒçš„å¯¹è±¡ä¸å­˜åœ¨ï¼‰â€“è¿™æ„å‘³ç€ç©ºé—²å†…å­˜å§‹ç»ˆä½äºå †çš„æœ«å°¾ï¼Œå¹¶å¯ä»¥éå¸¸å¿«é€Ÿåœ°åˆ†é…æ–°å¯¹è±¡ã€‚</p>
<p>GCæ ¹æœ¬èº«ä¸æ˜¯å¯¹è±¡ï¼Œè€Œæ˜¯å¯¹å¯¹è±¡çš„å¼•ç”¨ã€‚GCæ ¹å¼•ç”¨çš„ä»»ä½•å¯¹è±¡å°†è‡ªåŠ¨åœ¨ä¸‹ä¸€ä¸ªåƒåœ¾å›æ”¶ä¸­ä¿ç•™ä¸‹æ¥ã€‚.NETä¸­æœ‰å››ç§ä¸»è¦çš„æ ¹ï¼š</p>
<p>å½“å‰æ­£åœ¨è¿è¡Œçš„æ–¹æ³•ä¸­çš„å±€éƒ¨å˜é‡è¢«è§†ä¸ºGCæ ¹ã€‚è¿™äº›å˜é‡å¼•ç”¨çš„å¯¹è±¡å§‹ç»ˆå¯ä»¥é€šè¿‡å£°æ˜å®ƒä»¬çš„æ–¹æ³•ç«‹å³è®¿é—®ï¼Œå› æ­¤å¿…é¡»ä¿ç•™å®ƒä»¬ã€‚è¿™äº›æ ¹çš„ç”Ÿå‘½å‘¨æœŸå¯ä»¥å–å†³äºç¨‹åºçš„æ„å»ºæ–¹å¼ã€‚åœ¨è°ƒè¯•ç‰ˆæœ¬ä¸­ï¼Œå±€éƒ¨å˜é‡çš„æŒç»­æ—¶é—´ä¸æ–¹æ³•åœ¨å †æ ˆä¸Šçš„æ—¶é—´ä¸€æ ·é•¿ã€‚åœ¨å‘è¡Œç‰ˆæœ¬ä¸­ï¼ŒJITèƒ½å¤ŸæŸ¥çœ‹ç¨‹åºç»“æ„ä»¥æ‰¾å‡ºæ‰§è¡Œè¿‡ç¨‹ä¸­è¯¥æ–¹æ³•å¯ä»¥ä½¿ç”¨å˜é‡çš„æœ€åä¸€ç‚¹ï¼Œå¹¶åœ¨ä¸å†éœ€è¦è¯¥å˜é‡æ—¶å°†å…¶ä¸¢å¼ƒã€‚è¿™ç§ç­–ç•¥å¹¶ä¸æ€»æ˜¯ä½¿ç”¨ï¼Œå¯ä»¥é€šè¿‡ä¾‹å¦‚åœ¨è°ƒè¯•å™¨ä¸­è¿è¡Œç¨‹åºæ¥å…³é—­ã€‚</p>
<p>é™æ€å˜é‡ä¹Ÿå§‹ç»ˆè¢«è§†ä¸ºGCæ ¹ã€‚å£°æ˜å®ƒä»¬çš„ç±»å¯ä»¥éšæ—¶è®¿é—®å®ƒä»¬å¼•ç”¨çš„å¯¹è±¡ï¼ˆå¦‚æœæ˜¯å…¬å…±çš„ï¼Œåˆ™å¯ä»¥è®¿é—®ç¨‹åºçš„å…¶ä½™éƒ¨åˆ†ï¼‰ï¼Œå› æ­¤.NETå°†å§‹ç»ˆä¿æŒå®ƒä»¬ä¸å˜ã€‚å£°æ˜ä¸ºâ€œçº¿ç¨‹é™æ€â€çš„å˜é‡ä»…ä¼šåœ¨è¯¥çº¿ç¨‹è¿è¡Œæ—¶æŒç»­å­˜åœ¨ã€‚</p>
<p>å¦‚æœé€šè¿‡äº’æ“ä½œå°†æ‰˜ç®¡å¯¹è±¡ä¼ é€’ç»™éæ‰˜ç®¡COM +åº“ï¼Œåˆ™è¯¥å¯¹è±¡ä¹Ÿå°†æˆä¸ºå…·æœ‰å¼•ç”¨è®¡æ•°çš„GCæ ¹ã€‚è¿™æ˜¯å› ä¸ºCOM +ä¸è¿›è¡Œåƒåœ¾æ”¶é›†ï¼šå®ƒä½¿ç”¨å¼•ç”¨è®¡æ•°ç³»ç»Ÿï¼›é€šè¿‡å°†å¼•ç”¨è®¡æ•°è®¾ç½®ä¸º0ï¼Œä¸€æ—¦COM +åº“å®Œæˆäº†è¯¥å¯¹è±¡ï¼Œå®ƒå°†ä¸å†æ˜¯GCæ ¹ç›®å½•ï¼Œå¹¶ä¸”å¯ä»¥å†æ¬¡æ”¶é›†ã€‚</p>
<p>å¦‚æœå¯¹è±¡å…·æœ‰ç»ˆç»“å™¨ï¼Œåˆ™åœ¨åƒåœ¾å›æ”¶å™¨ç¡®å®šè¯¥å¯¹è±¡ä¸å†â€œå¤„äºæ´»åŠ¨çŠ¶æ€â€æ—¶ï¼Œä¸ä¼šç«‹å³å°†å…¶åˆ é™¤ã€‚ç›¸åï¼Œå®ƒæˆä¸ºä¸€ç§ç‰¹æ®Šçš„æ ¹ï¼Œç›´åˆ°.NETè°ƒç”¨äº†finalizeræ–¹æ³•ã€‚è¿™æ„å‘³ç€è¿™äº›å¯¹è±¡é€šå¸¸éœ€è¦ä»å†…å­˜ä¸­åˆ é™¤ä¸€ä¸ªä»¥ä¸Šçš„åƒåœ¾å›æ”¶ï¼Œå› ä¸ºå®ƒä»¬åœ¨ç¬¬ä¸€æ¬¡å‘ç°æœªä½¿ç”¨æ—¶ä»å°†ç”Ÿå­˜ã€‚</p>
<h2 id="å¯¹è±¡å›¾"><a href="#å¯¹è±¡å›¾" class="headerlink" title="å¯¹è±¡å›¾"></a>å¯¹è±¡å›¾</h2><p>æ€»ä½“è€Œè¨€ï¼Œ.NETä¸­çš„å†…å­˜å½¢æˆäº†ä¸€ä¸ªå¤æ‚çš„ï¼Œæ‰“ç»“çš„å¼•ç”¨å’Œäº¤å‰å¼•ç”¨å›¾ã€‚è¿™å¯èƒ½ä½¿å¾—å¾ˆéš¾ç¡®å®šç‰¹å®šå¯¹è±¡ä½¿ç”¨çš„å†…å­˜é‡ã€‚ä¾‹å¦‚ï¼ŒList <x>å¯¹è±¡ä½¿ç”¨çš„å†…å­˜éå¸¸å°ï¼Œå› ä¸ºList <x>ç±»åªæœ‰å‡ ä¸ªå­—æ®µã€‚ä½†æ˜¯ï¼Œå…¶ä¸­ä¹‹ä¸€æ˜¯åˆ—è¡¨ä¸­çš„å¯¹è±¡æ•°ç»„ï¼šå¦‚æœåˆ—è¡¨ä¸­æœ‰è®¸å¤šæ¡ç›®ï¼Œåˆ™è¿™å¯èƒ½ä¼šå¾ˆå¤§ã€‚è¿™å‡ ä¹æ€»æ˜¯ç”±åˆ—è¡¨â€œç‹¬å â€ï¼Œå› æ­¤å…³ç³»éå¸¸ç®€å•ï¼šåˆ—è¡¨çš„æ€»å¤§å°æ˜¯å°çš„åˆå§‹å¯¹è±¡å’Œå®ƒå¼•ç”¨çš„å¤§æ•°ç»„çš„å¤§å°ã€‚ä½†æ˜¯ï¼Œæ•°ç»„ä¸­çš„å¯¹è±¡å¯èƒ½å®Œå…¨æ˜¯å¦ä¸€å›äº‹ï¼šå¾ˆå¯èƒ½å­˜åœ¨é€šè¿‡å†…å­˜çš„å…¶ä»–è·¯å¾„æ¥è®¿é—®å®ƒä»¬ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œ</x></x></p>
<p>å½“å¾ªç¯å¼•ç”¨å¼€å§‹èµ·ä½œç”¨æ—¶ï¼Œäº‹æƒ…å˜å¾—æ›´åŠ æ··ä¹±ã€‚</p>
<p><img src="https://www.red-gate.com/simple-talk/wp-content/uploads/imported/737-image001.jpg" alt="737-image001.jpg"></p>
<p>åœ¨å¼€å‘ä»£ç æ—¶ï¼Œé€šå¸¸å°†å†…å­˜è§†ä¸ºç»„ç»‡ä¸ºæ›´å®¹æ˜“ç†è§£çš„ç»“æ„ï¼šä»å„ä¸ªæ ¹å¼€å§‹çš„æ ‘ï¼š</p>
<p><img src="https://www.red-gate.com/simple-talk/wp-content/uploads/imported/737-image002.jpg" alt="737-image002.jpg"></p>
<p>ç¡®å®ï¼Œä»¥è¿™ç§æ–¹å¼è¿›è¡Œæ€è€ƒç¡®å®ä½¿ï¼ˆæ›´ç¡®å®å¯èƒ½ï¼‰æ€è€ƒå¯¹è±¡åœ¨å†…å­˜ä¸­çš„å¸ƒå±€æ–¹å¼ã€‚è¿™ä¹Ÿæ˜¯ç¼–å†™ç¨‹åºæˆ–ä½¿ç”¨è°ƒè¯•å™¨æ—¶è¡¨ç¤ºæ•°æ®çš„æ–¹å¼ï¼Œä½†è¿™å¾ˆå®¹æ˜“å¿˜è®°ä¸€ä¸ªå¯¹è±¡å¯ä»¥é™„åŠ åˆ°å¤šä¸ªæ ¹ã€‚è¿™é€šå¸¸æ˜¯.NETä¸­å†…å­˜æ³„æ¼çš„æ¥æºï¼šå¼€å‘äººå‘˜å¿˜è®°æˆ–ä»æœªæ„è¯†åˆ°ï¼Œä¸€ä¸ªå¯¹è±¡é”šå®šåˆ°å¤šä¸ªæ ¹ã€‚è€ƒè™‘ä¸€ä¸‹æ­¤å¤„æ‰€ç¤ºçš„æƒ…å†µï¼šå°†GC root 2è®¾ç½®ä¸ºnullå®é™…ä¸Šä¸ä¼šå…è®¸åƒåœ¾æ”¶é›†å™¨åˆ é™¤ä»»ä½•å¯¹è±¡ï¼Œè¿™å¯ä»¥ä»æŸ¥çœ‹å®Œæ•´å›¾å½¢ä¸­çœ‹åˆ°ï¼Œè€Œä¸èƒ½ä»æ ‘ä¸­çœ‹åˆ°ã€‚</p>
<p>å†…å­˜å‰–æå™¨å¯ä»¥ä»å¦ä¸€ä¸ªè§’åº¦æŸ¥çœ‹å›¾å½¢ï¼Œå°±åƒæ ‘æ ¹æ¤äºå•ä¸ªå¯¹è±¡å¹¶å‘åè·Ÿéšå¼•ç”¨ä»¥å°†GCæ ¹æ”¾åœ¨å¶å­ä¸Šä¸€æ ·ã€‚å¯¹äºæ ¹2å¼•ç”¨çš„ClassCå¯¹è±¡ï¼Œæˆ‘ä»¬å¯ä»¥å‘åè·Ÿéšå¼•ç”¨ä»¥è·å–ä¸‹å›¾ï¼š</p>
<p><img src="https://www.red-gate.com/simple-talk/wp-content/uploads/imported/737-image003.jpg" alt="737-image003.jpg"></p>
<p>é€šè¿‡è¿™ç§æ–¹å¼çš„æ€è€ƒè¡¨æ˜ï¼ŒClassCå¯¹è±¡å…·æœ‰ä¸¤ä¸ªæœ€ç»ˆçš„â€œæ‰€æœ‰è€…â€ï¼Œåœ¨åƒåœ¾æ”¶é›†å™¨å°†å…¶åˆ é™¤ä¹‹å‰ï¼Œè¿™ä¸¤ä¸ªå¯¹è±¡éƒ½å¿…é¡»æ”¾å¼ƒå®ƒã€‚ä¸€æ—¦å°†GCæ ¹ç›®å½•2è®¾ç½®ä¸ºnullï¼Œå°±å¯ä»¥æ–­å¼€GCæ ¹ç›®å½•3ä¸è¯¥å¯¹è±¡ä¹‹é—´çš„ä»»ä½•é“¾æ¥ï¼Œä»¥ä¾¿å°†å…¶åˆ é™¤ã€‚</p>
<p>åœ¨å®é™…çš„.NETåº”ç”¨ç¨‹åºä¸­ï¼Œè¿™ç§æƒ…å†µå¾ˆå®¹æ˜“å‡ºç°ã€‚æœ€å¸¸è§çš„æ˜¯ï¼Œæ•°æ®å¯¹è±¡è¢«ç”¨æˆ·ç•Œé¢ä¸­çš„å…ƒç´ å¼•ç”¨ï¼Œä½†åœ¨æ•°æ®å¤„ç†å®Œæ¯•åä¸ä¼šè¢«åˆ é™¤ã€‚è¿™ç§æƒ…å†µå¹¶ä¸æ˜¯å¾ˆæ³„æ¼ï¼šå½“ç”¨æ–°æ•°æ®æ›´æ–°UIæ§ä»¶æ—¶ï¼Œå°†å›æ”¶å†…å­˜ï¼Œä½†æ˜¯è¿™å¯èƒ½æ„å‘³ç€åº”ç”¨ç¨‹åºä½¿ç”¨çš„å†…å­˜æ¯”é¢„æœŸçš„è¦å¤šå¾—å¤šã€‚äº‹ä»¶å¤„ç†ç¨‹åºæ˜¯å¦ä¸€ä¸ªå¸¸è§åŸå› ï¼šå¾ˆå®¹æ˜“å¿˜è®°ä¸€ä¸ªå¯¹è±¡çš„å¯¿å‘½è‡³å°‘ä¸å®ƒä»ä¸­æ¥æ”¶äº‹ä»¶çš„å¯¹è±¡ä¸€æ ·é•¿ï¼Œå¯¹äºæŸäº›å…¨å±€äº‹ä»¶å¤„ç†ç¨‹åºï¼ˆå¦‚Applicationç±»ä¸­çš„äº‹ä»¶ï¼‰ï¼Œè¿™ç§æƒ…å†µæ°¸è¿œå­˜åœ¨ã€‚</p>
<p>å®é™…çš„åº”ç”¨ç¨‹åºï¼Œå°¤å…¶æ˜¯é‚£äº›å…·æœ‰ç”¨æˆ·ç•Œé¢ç»„ä»¶çš„åº”ç”¨ç¨‹åºï¼Œå…·æœ‰æ¯”è¿™å¤æ‚å¾—å¤šçš„å›¾å½¢ã€‚ç”šè‡³å¯ä»¥ä»å¤§é‡ä¸åŒçš„åœ°æ–¹å¼•ç”¨å¯¹è¯æ¡†ä¸­çš„æ ‡ç­¾ä¹‹ç±»çš„ç®€å•å†…å®¹â€¦</p>
<p><img src="https://www.red-gate.com/simple-talk/wp-content/uploads/imported/737-image004.jpg" alt="737-image004.jpg"></p>
<p>å¾ˆå®¹æ˜“çœ‹åˆ°å¶ç„¶çš„ç‰©ä½“å¦‚ä½•åœ¨è¿·å®«ä¸­ä¸¢å¤±ã€‚</p>
<h1 id="åƒåœ¾æ”¶é›†å™¨çš„å±€é™æ€§"><a href="#åƒåœ¾æ”¶é›†å™¨çš„å±€é™æ€§" class="headerlink" title="åƒåœ¾æ”¶é›†å™¨çš„å±€é™æ€§"></a>åƒåœ¾æ”¶é›†å™¨çš„å±€é™æ€§</h1><h2 id="ä»åœ¨å¼•ç”¨çš„æœªä½¿ç”¨å¯¹è±¡"><a href="#ä»åœ¨å¼•ç”¨çš„æœªä½¿ç”¨å¯¹è±¡" class="headerlink" title="ä»åœ¨å¼•ç”¨çš„æœªä½¿ç”¨å¯¹è±¡"></a>ä»åœ¨å¼•ç”¨çš„æœªä½¿ç”¨å¯¹è±¡</h2><p>.NETä¸­åƒåœ¾æ”¶é›†å™¨çš„æœ€å¤§å±€é™æ€§æ˜¯ä¸€ä¸ªç»†å¾®çš„é™åˆ¶ï¼šè™½ç„¶å®ƒå¯ä»¥æ£€æµ‹å’Œåˆ é™¤æœªä½¿ç”¨çš„å¯¹è±¡ï¼Œä½†å®é™…ä¸Šå®ƒä¼šæ‰¾åˆ°<em>æœªå¼•ç”¨çš„</em>å¯¹è±¡ã€‚è¿™æ˜¯ä¸€ä¸ªé‡è¦çš„åŒºåˆ«ï¼šç¨‹åºå¯èƒ½æ°¸è¿œä¸ä¼šå†å¼•ç”¨å¯¹è±¡ã€‚ä½†æ˜¯ï¼Œå°½ç®¡æœ‰ä¸€äº›è·¯å¾„å¯¼è‡´å®ƒå¯èƒ½ä»è¢«ä½¿ç”¨ï¼Œä½†å®ƒæ°¸è¿œä¸ä¼šä»å†…å­˜ä¸­é‡Šæ”¾å‡ºæ¥ã€‚è¿™å¯¼è‡´å†…å­˜æ³„æ¼ï¼›åœ¨.NETä¸­ï¼Œå½“å°†ä¸å†ä½¿ç”¨çš„å¯¹è±¡ä¿æŒå¼•ç”¨çŠ¶æ€æ—¶ï¼Œä¼šå‘ç”Ÿè¿™äº›æƒ…å†µã€‚</p>
<p>å°½ç®¡å†…å­˜ä½¿ç”¨ç‡ä¸Šå‡çš„ç—‡çŠ¶å¾ˆæ˜æ˜¾ï¼Œä½†è¿™äº›æ³„æ¼çš„æ¥æºå¯èƒ½å¾ˆéš¾å‘ç°ã€‚æœ‰å¿…è¦ç¡®å®šå“ªäº›æœªä½¿ç”¨çš„å¯¹è±¡ä¿ç•™åœ¨å†…å­˜ä¸­ï¼Œç„¶åè·Ÿè¸ªå¼•ç”¨ä»¥æ‰¾å‡ºä¸ºä»€ä¹ˆä¸æ”¶é›†å®ƒä»¬ã€‚å†…å­˜åˆ†æå™¨å¯¹äºæ­¤ä»»åŠ¡è‡³å…³é‡è¦ï¼šé€šè¿‡æ¯”è¾ƒå‘ç”Ÿæ³„æ¼æ—¶çš„å†…å­˜çŠ¶æ€ï¼Œå¯ä»¥æ‰¾åˆ°éº»çƒ¦çš„æœªä½¿ç”¨å¯¹è±¡ï¼Œä½†æ˜¯æ²¡æœ‰è°ƒè¯•å™¨å¯ä»¥å‘åè·Ÿè¸ªå¯¹è±¡å¼•ç”¨ã€‚</p>
<p>åƒåœ¾æ”¶é›†å™¨æ—¨åœ¨å¤„ç†å¤§é‡èµ„æºï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œé‡Šæ”¾å¯¹è±¡çš„ä½ç½®æ— å…³ç´§è¦ã€‚åœ¨ç°ä»£ç³»ç»Ÿä¸Šï¼Œå†…å­˜å±äºè¿™ä¸€ç±»ï¼ˆä½•æ—¶å›æ”¶å†…å­˜æ— å…³ç´§è¦ï¼Œåªè¦åŠæ—¶å®Œæˆä»¥é˜²æ­¢æ–°åˆ†é…å¤±è´¥ï¼‰ã€‚ä»ç„¶æœ‰ä¸€äº›èµ„æºä¸å±äºæ­¤ç±»ï¼šä¾‹å¦‚ï¼Œéœ€è¦å¿«é€Ÿå…³é—­æ–‡ä»¶å¥æŸ„ä»¥é¿å…å¼•èµ·åº”ç”¨ç¨‹åºä¹‹é—´çš„å…±äº«å†²çªã€‚è¿™äº›èµ„æºä¸èƒ½ç”±åƒåœ¾æ”¶é›†å™¨å®Œå…¨ç®¡ç†ï¼Œå› æ­¤.NETä¸ºç®¡ç†è¿™äº›èµ„æºçš„å¯¹è±¡æä¾›<code>Dispose</code>ï¼ˆï¼‰æ–¹æ³•ä»¥åŠ<code>using</code>ï¼ˆï¼‰æ„é€ ã€‚åœ¨è¿™äº›æƒ…å†µä¸‹ï¼Œå¯¹è±¡çš„ç¨€ç¼ºèµ„æºå¯é€šè¿‡å®æ–½<code>Dispose</code> æ–¹æ³•ï¼Œä½†æ˜¯ç´§è¦çš„å†…å­˜è¦å°‘å¾—å¤šï¼Œç„¶åç”±åƒåœ¾å›æ”¶å™¨é‡Šæ”¾ã€‚</p>
<p><code>Dispose</code>æ„å‘³ç€.NETæ²¡æœ‰ä»€ä¹ˆç‰¹åˆ«çš„ï¼Œå› æ­¤ä»å¿…é¡»å–æ¶ˆå¼•ç”¨å·²å¤„ç½®çš„å¯¹è±¡ã€‚è¿™ä½¿å·²å¤„ç½®ä½†å°šæœªå›æ”¶çš„å¯¹è±¡æˆä¸ºå†…å­˜æ³„æ¼æºçš„è‰¯å¥½å€™é€‰å¯¹è±¡ã€‚</p>
<h2 id="å †çš„ç¢ç‰‡"><a href="#å †çš„ç¢ç‰‡" class="headerlink" title="å †çš„ç¢ç‰‡"></a>å †çš„ç¢ç‰‡</h2><p>.NETä¸­ä¸€ä¸ªé²œä¸ºäººçŸ¥çš„é™åˆ¶æ˜¯å¤§å¯¹è±¡å †çš„é™åˆ¶ã€‚æˆä¸ºè¯¥å †ä¸€éƒ¨åˆ†çš„å¯¹è±¡ä¸ä¼šåœ¨è¿è¡Œæ—¶ç§»åŠ¨ï¼Œè¿™å¯èƒ½å¯¼è‡´ç¨‹åºè¿‡æ—©åœ°è€—å°½å†…å­˜ã€‚å½“æŸäº›å¯¹è±¡çš„å¯¿å‘½æ¯”å…¶ä»–å¯¹è±¡é•¿æ—¶ï¼Œè¿™å°†å¯¼è‡´å †åœ¨å¯¹è±¡è¿‡å»æ‰€åœ¨çš„ä½ç½®å½¢æˆå­”-è¿™ç§°ä¸ºç¢ç‰‡ã€‚å½“ç¨‹åºè¦æ±‚ä¸€ä¸ªå¤§çš„å†…å­˜å—ï¼Œä½†å †å˜å¾—éå¸¸åˆ†æ•£ï¼Œä»¥è‡³äºæ²¡æœ‰å•ä¸ªå†…å­˜åŒºåŸŸè¶³ä»¥å®¹çº³å®ƒæ—¶ï¼Œå°±ä¼šå‘ç”Ÿé—®é¢˜ã€‚å†…å­˜åˆ†æå™¨å¯ä»¥ä¼°è®¡ç¨‹åºå¯ä»¥åˆ†é…çš„æœ€å¤§å¯¹è±¡ï¼šå¦‚æœè¯¥å¯¹è±¡æ­£åœ¨ä¸‹é™ï¼Œåˆ™å¾ˆå¯èƒ½æ˜¯åŸå› ã€‚ä¸€ä¸ª<code>OutOfMemoryException</code>å½“ç¨‹åºæ˜¾ç„¶å…·æœ‰å¤§é‡å¯ç”¨å†…å­˜æ—¶ï¼Œé€šå¸¸ä¼šå‘ç”Ÿç”±ç¢ç‰‡å¼•èµ·çš„é”™è¯¯â€“åœ¨32ä½ç³»ç»Ÿä¸Šï¼Œè¿›ç¨‹åº”è‡³å°‘èƒ½å¤Ÿä½¿ç”¨1.5Gbï¼Œä½†æ˜¯ç”±äºç¢ç‰‡å¯¼è‡´çš„æ•…éšœé€šå¸¸ä¼šåœ¨ä½¿ç”¨è¯¥ç¢ç‰‡ä¹‹å‰å¼€å§‹å‘ç”Ÿå¾ˆå¤šå†…å­˜ã€‚</p>
<p>ç¢ç‰‡åŒ–çš„å¦ä¸€ä¸ªå¾å…†æ˜¯.NETé€šå¸¸å¿…é¡»ä¿ç•™åˆ†é…ç»™åº”ç”¨ç¨‹åºçš„ç©ºæ´æ‰€ä½¿ç”¨çš„å†…å­˜ã€‚è¿™æ˜¾ç„¶å¯¼è‡´å®ƒä½¿ç”¨æ¯”åœ¨ä»»åŠ¡ç®¡ç†å™¨ä¸­æŸ¥çœ‹æ‰€éœ€çš„å†…å­˜æ›´å¤šçš„å†…å­˜ã€‚è¿™ç§æ•ˆæœé€šå¸¸ç›¸å¯¹æ¥è¯´æ˜¯æ— å®³çš„ï¼šWindowséå¸¸æ“…é•¿äºæ„è¯†åˆ°æœªè¢«å ç”¨çš„å­”æ‰€å ç”¨çš„å†…å­˜å¹¶å°†å…¶åˆ†é¡µï¼Œå¹¶ä¸”å¦‚æœç¢ç‰‡æ²¡æœ‰æ¶åŒ–ï¼Œåˆ™ç¨‹åºå°†ä¸ä¼šè€—å°½å†…å­˜ã€‚ä½†æ˜¯ï¼Œå¯¹äºç”¨æˆ·è€Œè¨€ï¼Œè¿™çœ‹èµ·æ¥å¹¶ä¸å¥½ï¼Œä»–ä»¬å¯èƒ½ä¼šè®¤ä¸ºè¯¥åº”ç”¨ç¨‹åºæµªè´¹ä¸”â€œ bloè‚¿â€ã€‚å½“æ¢æŸ¥å™¨æ˜¾ç¤ºç¨‹åºåˆ†é…çš„å¯¹è±¡ä»…ä½¿ç”¨å°‘é‡å†…å­˜ï¼Œè€Œä»»åŠ¡ç®¡ç†å™¨æ˜¾ç¤ºè¯¥è¿›ç¨‹å ç”¨å¤§é‡ç©ºé—´æ—¶ï¼Œé€šå¸¸ä¼šå‘ç”Ÿè¿™ç§æƒ…å†µã€‚</p>
<h1 id="åƒåœ¾æ”¶é›†å™¨çš„æ€§èƒ½"><a href="#åƒåœ¾æ”¶é›†å™¨çš„æ€§èƒ½" class="headerlink" title="åƒåœ¾æ”¶é›†å™¨çš„æ€§èƒ½"></a>åƒåœ¾æ”¶é›†å™¨çš„æ€§èƒ½</h1><p>åœ¨æ€§èƒ½æ–¹é¢ï¼Œåƒåœ¾æ”¶é›†ç³»ç»Ÿçš„æœ€é‡è¦ç‰¹å¾æ˜¯åƒåœ¾æ”¶é›†å™¨å¯ä»¥éšæ—¶å¼€å§‹æ‰§è¡Œã€‚è¿™ä½¿å®ƒä»¬ä¸é€‚ç”¨äºå®šæ—¶è‡³å…³é‡è¦çš„æƒ…å†µï¼Œå› ä¸ºä»»ä½•æ“ä½œçš„å®šæ—¶éƒ½å¯èƒ½è¢«æ”¶é›†å™¨çš„æ“ä½œæ‰€æŠ›å¼ƒã€‚</p>
<p>.NETæ”¶é›†å™¨æœ‰ä¸¤ç§ä¸»è¦çš„æ“ä½œæ¨¡å¼ï¼šå¹¶å‘å’ŒåŒæ­¥ï¼ˆæœ‰æ—¶ç§°ä¸ºå·¥ä½œç«™å’ŒæœåŠ¡å™¨ï¼‰ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå¹¶å‘åƒåœ¾æ”¶é›†ç”¨äºæ¡Œé¢åº”ç”¨ç¨‹åºï¼ŒåŒæ­¥ç”¨äºæœåŠ¡å™¨åº”ç”¨ç¨‹åºï¼ˆä¾‹å¦‚ASP.NETï¼‰ã€‚</p>
<p>åœ¨å¹¶å‘æ¨¡å¼ä¸‹ï¼Œ.NETå°†å°è¯•é¿å…åœ¨è¿›è¡Œæ”¶é›†æ—¶åœæ­¢æ­£åœ¨è¿è¡Œçš„ç¨‹åºã€‚è¿™æ„å‘³ç€åœ¨ç»™å®šçš„æ—¶é—´å†…åº”ç”¨ç¨‹åºå¯ä»¥å®Œæˆçš„æ€»æ¬¡æ•°è¾ƒå°‘ï¼Œä½†åº”ç”¨ç¨‹åºä¸ä¼šæš‚åœã€‚è¿™å¯¹äº¤äº’å¼åº”ç”¨ç¨‹åºå¾ˆæœ‰ç”¨ï¼Œåœ¨äº¤äº’åº”ç”¨ç¨‹åºä¸­ï¼Œç»™ç”¨æˆ·ç•™ä¸‹å°è±¡ï¼Œå³åº”ç”¨ç¨‹åºåº”ç«‹å³åšå‡ºå“åº”ï¼Œè¿™ä¸€ç‚¹å¾ˆé‡è¦ã€‚</p>
<p>åœ¨åŒæ­¥æ¨¡å¼ä¸‹ï¼Œ.NETå°†åœ¨åƒåœ¾æ”¶é›†å™¨è¿è¡Œæ—¶æŒ‚èµ·æ­£åœ¨è¿è¡Œçš„åº”ç”¨ç¨‹åºã€‚å®é™…ä¸Šï¼Œè¿™æ€»ä½“ä¸Šæ¯”å¹¶å‘æ¨¡å¼æ›´æœ‰æ•ˆâ€“åƒåœ¾å›æ”¶èŠ±è´¹ç›¸åŒçš„æ—¶é—´ï¼Œä½†æ˜¯ä¸å¿…ä¸ç¨‹åºç»§ç»­è¿è¡Œè¿›è¡Œç«äº‰â€“ä½†æ˜¯ï¼Œè¿™æ„å‘³ç€å¿…é¡»æ‰§è¡Œå®Œæ•´çš„å›æ”¶æ—¶ä¼šæœ‰æ˜æ˜¾çš„æš‚åœã€‚ ã€‚</p>
<p>å¦‚æœé»˜è®¤è®¾ç½®ä¸åˆé€‚ï¼Œåˆ™å¯ä»¥åœ¨åº”ç”¨ç¨‹åºçš„é…ç½®æ–‡ä»¶ä¸­è®¾ç½®åƒåœ¾æ”¶é›†å™¨çš„ç±»å‹ã€‚å½“æ›´é‡è¦çš„æ˜¯åº”ç”¨ç¨‹åºå…·æœ‰é«˜ååé‡è€Œä¸æ˜¯æ˜¾ç¤ºå“åº”æ—¶ï¼Œé€‰æ‹©åŒæ­¥æ”¶é›†å™¨å¯èƒ½å¾ˆæœ‰ç”¨ã€‚</p>
<p>åœ¨å¤§å‹åº”ç”¨ç¨‹åºä¸­ï¼Œåƒåœ¾æ”¶é›†å™¨éœ€è¦å¤„ç†çš„å¯¹è±¡æ•°é‡ä¼šå˜å¾—éå¸¸å¤§ï¼Œè¿™æ„å‘³ç€è®¿é—®å’Œé‡æ–°æ’åˆ—æ‰€æœ‰å¯¹è±¡éƒ½å°†èŠ±è´¹å¾ˆé•¿æ—¶é—´ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œ.NETä½¿ç”¨äº†â€œåˆ†ä»£â€åƒåœ¾æ”¶é›†å™¨ï¼Œè¯¥åƒåœ¾æ”¶é›†å™¨è¯•å›¾å°†ä¼˜å…ˆçº§èµ‹äºˆè¾ƒå°çš„ä¸€ç»„å¯¹è±¡ã€‚è¿™ä¸ªæƒ³æ³•æ˜¯ï¼Œæœ€è¿‘åˆ›å»ºçš„å¯¹è±¡æ›´æœ‰å¯èƒ½è¢«å¿«é€Ÿé‡Šæ”¾ï¼Œå› æ­¤ï¼Œå½“è¯•å›¾é‡Šæ”¾å†…å­˜æ—¶ï¼Œåˆ†ä»£åƒåœ¾æ”¶é›†å™¨ä¼šä¼˜å…ˆå¤„ç†å®ƒä»¬ï¼Œå› æ­¤.NETé¦–å…ˆæŸ¥çœ‹è‡ªä¸Šä¸€æ¬¡åƒåœ¾æ”¶é›†ä»¥æ¥å·²åˆ†é…çš„å¯¹è±¡ï¼Œå¹¶ä¸”åªä¼šå¼€å§‹å¦‚æœæ— æ³•é€šè¿‡è¿™ç§æ–¹å¼é‡Šæ”¾è¶³å¤Ÿçš„ç©ºé—´ï¼Œè¯·è€ƒè™‘ä½¿ç”¨è¾ƒæ—§çš„å¯¹è±¡ã€‚</p>
<p>å¦‚æœ.NETå¯ä»¥è‡ªè¡Œé€‰æ‹©æ”¶é›†æ—¶é—´ï¼Œåˆ™æ­¤ç³»ç»Ÿæ•ˆæœæœ€ä½³ï¼Œå¹¶ä¸”å¦‚æœ<code>GC.Collect</code>è°ƒç”¨ï¼ˆï¼‰ä¼šä¸­æ–­è¯¥ç³»ç»Ÿï¼Œå› ä¸ºè¿™é€šå¸¸ä¼šå¯¼è‡´æ–°å¯¹è±¡è¿‡æ—©åœ°å˜æ—§ï¼Œè¿™å¢åŠ äº†åœ¨ä¸ä¹…çš„å°†æ¥å†æ¬¡è¿›è¡Œæ˜‚è´µçš„å®Œæ•´æ”¶é›†çš„å¯èƒ½æ€§ã€‚</p>
<p>å…·æœ‰ç»ˆç»“å™¨çš„ç±»ä¹Ÿä¼šç ´ååƒåœ¾æ”¶é›†å™¨çš„å¹³ç¨³è¿è¡Œã€‚è¿™äº›ç±»çš„å¯¹è±¡ä¸èƒ½ç«‹å³åˆ é™¤ï¼šç›¸åï¼Œå®ƒä»¬è¿›å…¥ç»ˆç»“å™¨é˜Ÿåˆ—ï¼Œå¹¶åœ¨è¿è¡Œç»ˆç»“å™¨åä»å†…å­˜ä¸­åˆ é™¤ã€‚è¿™æ„å‘³ç€å®ƒä»¬æ‰€å¼•ç”¨çš„ä»»ä½•å¯¹è±¡ï¼ˆä»¥åŠé‚£äº›å¯¹è±¡æ‰€å¼•ç”¨çš„ä»»ä½•å¯¹è±¡ï¼Œä¾æ­¤ç±»æ¨ï¼‰è‡³å°‘ä¹Ÿå¿…é¡»åœ¨æ­¤ä¹‹å‰ä¿ç•™åœ¨å†…å­˜ä¸­ï¼Œå¹¶ä¸”åœ¨å†…å­˜å†æ¬¡å¯ç”¨ä¹‹å‰éœ€è¦ä¸¤æ¬¡åƒåœ¾å›æ”¶ã€‚å¦‚æœè¯¥å›¾åŒ…å«å¸¦æœ‰ç»ˆç»“å™¨çš„è®¸å¤šå¯¹è±¡ï¼Œåˆ™è¿™å¯èƒ½æ„å‘³ç€åƒåœ¾æ”¶é›†å™¨éœ€è¦å¤šæ¬¡é€šè¿‡æ‰èƒ½å®Œå…¨é‡Šæ”¾æ‰€æœ‰æœªå¼•ç”¨çš„å¯¹è±¡ã€‚</p>
<p>æœ‰ä¸€ä¸ªé¿å…æ­¤é—®é¢˜çš„ç®€å•æ–¹æ³•ï¼š<code>IDisposable</code>åœ¨å¯ç»ˆç»“ç±»ä¸Šå®ç°ï¼Œå°†å®Œæˆå¯¹è±¡æ‰€éœ€çš„æ“ä½œç§»åˆ°<code>Dispose()</code>æ–¹æ³•ä¸­å¹¶<code>GC.SuppressFinalize()</code>åœ¨æœ€åè°ƒç”¨ã€‚ç„¶åå¯ä»¥ä¿®æ”¹ç»ˆç»“å™¨ä»¥è°ƒç”¨è¯¥<code>Dispose()</code>æ–¹æ³•ã€‚<code>GC.SuppressFinalize()</code>å‘Šè¯‰åƒåœ¾å›æ”¶å™¨ï¼Œè¯¥å¯¹è±¡ä¸å†éœ€è¦ç»ˆç»“ï¼Œå¯ä»¥ç«‹å³è¢«åƒåœ¾å›æ”¶ï¼Œè¿™å¯ä»¥å¯¼è‡´æ›´å¿«åœ°å›æ”¶å†…å­˜ã€‚</p>
<h1 id="ç»“è®º"><a href="#ç»“è®º" class="headerlink" title="ç»“è®º"></a>ç»“è®º</h1><p>å¦‚æœæ‚¨èŠ±ä¸€äº›æ—¶é—´äº†è§£åƒåœ¾æ”¶é›†å™¨çš„å·¥ä½œæ–¹å¼ï¼Œåˆ™æ›´å®¹æ˜“ç†è§£åº”ç”¨ç¨‹åºä¸­çš„å†…å­˜å’Œæ€§èƒ½é—®é¢˜ã€‚å®ƒè¡¨æ˜ï¼Œå°½ç®¡.NETå‡è½»äº†å†…å­˜ç®¡ç†çš„è´Ÿæ‹…ï¼Œä½†å¹¶ä¸èƒ½å®Œå…¨æ¶ˆé™¤è·Ÿè¸ªå’Œç®¡ç†èµ„æºçš„éœ€æ±‚ã€‚ä½†æ˜¯ï¼Œä½¿ç”¨å†…å­˜åˆ†æå™¨æ¥è¯Šæ–­å’Œä¿®å¤.NETä¸­çš„é—®é¢˜æ›´åŠ å®¹æ˜“ã€‚è€ƒè™‘åˆ°.NETåœ¨å¼€å‘ä¸­å°½æ—©ç®¡ç†å†…å­˜çš„æ–¹å¼å¯ä»¥å¸®åŠ©å‡å°‘é—®é¢˜ï¼Œä½†æ˜¯å³ä½¿é‚£æ ·ï¼Œç”±äºæ¡†æ¶æˆ–ç¬¬ä¸‰æ–¹åº“çš„å¤æ‚æ€§ï¼Œæ­¤ç±»é—®é¢˜ä»ç„¶å¯èƒ½å‡ºç°ã€‚</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/3/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/3/">3</a><span class="page-number current">4</span><a class="page-number" href="/page/5/">5</a><span class="space">&hellip;</span><a class="page-number" href="/page/9/">9</a><a class="extend next" rel="next" href="/page/5/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <div class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">æºªæº</p>
              <div class="site-description motion-element" itemprop="description"></div>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives">
                
                    <span class="site-state-item-count">81</span>
                    <span class="site-state-item-name">posts</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">4</span>
                    <span class="site-state-item-name">categories</span>
                  
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">4</span>
                    <span class="site-state-item-name">tags</span>
                  
                </div>
              
            </nav>
          

          

          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="https://www.cnblogs.com/xiyuanmore" title="åšå®¢å›­ &rarr; https://www.cnblogs.com/xiyuanmore" rel="noopener" target="_blank"><i class="fa fa-fw fa-åšå®¢å›­"></i>åšå®¢å›­</a>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="https://blog.csdn.net/farway000" title="CSDN &rarr; https://blog.csdn.net/farway000" rel="noopener" target="_blank"><i class="fa fa-fw fa-CSDN"></i>CSDN</a>
                </span>
              
            </div>
          

          

          
          

          
            
          
          

        </div>
      </div>

      

      

    </div>
  </aside>
  


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2021</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">æºªæº</span>

  

  
</div>


  <div class="powered-by">Powered by <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> v3.9.0</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme â€“ <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> v7.1.2</div>
#<div><a href="http://www.beian.miit.gov.cn/">ICPå¤‡æ¡ˆå·:æ¹˜ICPå¤‡19001531å·-2</a></div>



        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  <script src="/lib/jquery/index.js?v=3.4.1"></script>

  
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>


  


  <script src="/js/utils.js?v=7.1.2"></script>

  <script src="/js/motion.js?v=7.1.2"></script>



  
  


  <script src="/js/affix.js?v=7.1.2"></script>

  <script src="/js/schemes/pisces.js?v=7.1.2"></script>



  

  


  <script src="/js/next-boot.js?v=7.1.2"></script>


  

  

  

  



  




  

  

  

  

  

  

  

  

  

  

  

  

  

  

</body>
</html>
